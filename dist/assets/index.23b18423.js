(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();function cn(e,t){const i=Object.create(null),r=e.split(",");for(let n=0;n<r.length;n++)i[r[n]]=!0;return t?n=>!!i[n.toLowerCase()]:n=>!!i[n]}const Fh="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",Nh=cn(Fh);function mr(e){if(J(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],n=bt(r)?Uh(r):mr(r);if(n)for(const s in n)t[s]=n[s]}return t}else{if(bt(e))return e;if(mt(e))return e}}const Gh=/;(?![^(]*\))/g,Bh=/:([^]+)/,Hh=/\/\*.*?\*\//gs;function Uh(e){const t={};return e.replace(Hh,"").split(Gh).forEach(i=>{if(i){const r=i.split(Bh);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function _r(e){let t="";if(bt(e))t=e;else if(J(e))for(let i=0;i<e.length;i++){const r=_r(e[i]);r&&(t+=r+" ")}else if(mt(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function Wh(e){if(!e)return null;let{class:t,style:i}=e;return t&&!bt(t)&&(e.class=_r(t)),i&&(e.style=mr(i)),e}const zh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jh=cn(zh);function yo(e){return!!e||e===""}function Yh(e,t){if(e.length!==t.length)return!1;let i=!0;for(let r=0;i&&r<e.length;r++)i=De(e[r],t[r]);return i}function De(e,t){if(e===t)return!0;let i=fa(e),r=fa(t);if(i||r)return i&&r?e.getTime()===t.getTime():!1;if(i=or(e),r=or(t),i||r)return e===t;if(i=J(e),r=J(t),i||r)return i&&r?Yh(e,t):!1;if(i=mt(e),r=mt(t),i||r){if(!i||!r)return!1;const n=Object.keys(e).length,s=Object.keys(t).length;if(n!==s)return!1;for(const a in e){const o=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(o&&!l||!o&&l||!De(e[a],t[a]))return!1}}return String(e)===String(t)}function fn(e,t){return e.findIndex(i=>De(i,t))}const bo=e=>bt(e)?e:e==null?"":J(e)||mt(e)&&(e.toString===So||!it(e.toString))?JSON.stringify(e,Co,2):String(e),Co=(e,t)=>t&&t.__v_isRef?Co(e,t.value):Ci(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,n])=>(i[`${r} =>`]=n,i),{})}:ai(t)?{[`Set(${t.size})`]:[...t.values()]}:mt(t)&&!J(t)&&!wo(t)?String(t):t,vt={},bi=[],ie=()=>{},Xh=()=>!1,Kh=/^on[^a-z]/,yr=e=>Kh.test(e),ws=e=>e.startsWith("onUpdate:"),Et=Object.assign,xs=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Vh=Object.prototype.hasOwnProperty,lt=(e,t)=>Vh.call(e,t),J=Array.isArray,Ci=e=>br(e)==="[object Map]",ai=e=>br(e)==="[object Set]",fa=e=>br(e)==="[object Date]",it=e=>typeof e=="function",bt=e=>typeof e=="string",or=e=>typeof e=="symbol",mt=e=>e!==null&&typeof e=="object",Es=e=>mt(e)&&it(e.then)&&it(e.catch),So=Object.prototype.toString,br=e=>So.call(e),$h=e=>br(e).slice(8,-1),wo=e=>br(e)==="[object Object]",Ts=e=>bt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ji=cn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),un=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},qh=/-(\w)/g,Wt=un(e=>e.replace(qh,(t,i)=>i?i.toUpperCase():"")),Jh=/\B([A-Z])/g,Jt=un(e=>e.replace(Jh,"-$1").toLowerCase()),Cr=un(e=>e.charAt(0).toUpperCase()+e.slice(1)),Qi=un(e=>e?`on${Cr(e)}`:""),Ai=(e,t)=>!Object.is(e,t),Si=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},en=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},be=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ua;const Qh=()=>ua||(ua=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let jt;class Ps{constructor(t=!1){this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=jt,!t&&jt&&(this.index=(jt.scopes||(jt.scopes=[])).push(this)-1)}run(t){if(this.active){const i=jt;try{return jt=this,t()}finally{jt=i}}}on(){jt=this}off(){jt=this.parent}stop(t){if(this.active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this.active=!1}}}function Zh(e){return new Ps(e)}function xo(e,t=jt){t&&t.active&&t.effects.push(e)}function tc(){return jt}function ec(e){jt&&jt.cleanups.push(e)}const As=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Eo=e=>(e.w&Fe)>0,To=e=>(e.n&Fe)>0,ic=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Fe},rc=e=>{const{deps:t}=e;if(t.length){let i=0;for(let r=0;r<t.length;r++){const n=t[r];Eo(n)&&!To(n)?n.delete(e):t[i++]=n,n.w&=~Fe,n.n&=~Fe}t.length=i}},$n=new WeakMap;let Yi=0,Fe=1;const qn=30;let ee;const Qe=Symbol(""),Jn=Symbol("");class Sr{constructor(t,i=null,r){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,xo(this,r)}run(){if(!this.active)return this.fn();let t=ee,i=Le;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ee,ee=this,Le=!0,Fe=1<<++Yi,Yi<=qn?ic(this):da(this),this.fn()}finally{Yi<=qn&&rc(this),Fe=1<<--Yi,ee=this.parent,Le=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ee===this?this.deferStop=!0:this.active&&(da(this),this.onStop&&this.onStop(),this.active=!1)}}function da(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}function nc(e,t){e.effect&&(e=e.effect.fn);const i=new Sr(e);t&&(Et(i,t),t.scope&&xo(i,t.scope)),(!t||!t.lazy)&&i.run();const r=i.run.bind(i);return r.effect=i,r}function sc(e){e.effect.stop()}let Le=!0;const Po=[];function Li(){Po.push(Le),Le=!1}function Ii(){const e=Po.pop();Le=e===void 0?!0:e}function $t(e,t,i){if(Le&&ee){let r=$n.get(e);r||$n.set(e,r=new Map);let n=r.get(i);n||r.set(i,n=As()),Ao(n)}}function Ao(e,t){let i=!1;Yi<=qn?To(e)||(e.n|=Fe,i=!Eo(e)):i=!e.has(ee),i&&(e.add(ee),ee.deps.push(e))}function Ce(e,t,i,r,n,s){const a=$n.get(e);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(i==="length"&&J(e)){const l=be(r);a.forEach((h,c)=>{(c==="length"||c>=l)&&o.push(h)})}else switch(i!==void 0&&o.push(a.get(i)),t){case"add":J(e)?Ts(i)&&o.push(a.get("length")):(o.push(a.get(Qe)),Ci(e)&&o.push(a.get(Jn)));break;case"delete":J(e)||(o.push(a.get(Qe)),Ci(e)&&o.push(a.get(Jn)));break;case"set":Ci(e)&&o.push(a.get(Qe));break}if(o.length===1)o[0]&&Qn(o[0]);else{const l=[];for(const h of o)h&&l.push(...h);Qn(As(l))}}function Qn(e,t){const i=J(e)?e:[...e];for(const r of i)r.computed&&ga(r);for(const r of i)r.computed||ga(r)}function ga(e,t){(e!==ee||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const ac=cn("__proto__,__v_isRef,__isVue"),ko=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(or)),oc=dn(),lc=dn(!1,!0),hc=dn(!0),cc=dn(!0,!0),pa=fc();function fc(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const r=ht(this);for(let s=0,a=this.length;s<a;s++)$t(r,"get",s+"");const n=r[t](...i);return n===-1||n===!1?r[t](...i.map(ht)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){Li();const r=ht(this)[t].apply(this,i);return Ii(),r}}),e}function dn(e=!1,t=!1){return function(r,n,s){if(n==="__v_isReactive")return!e;if(n==="__v_isReadonly")return e;if(n==="__v_isShallow")return t;if(n==="__v_raw"&&s===(e?t?Fo:Do:t?Io:Lo).get(r))return r;const a=J(r);if(!e&&a&&lt(pa,n))return Reflect.get(pa,n,s);const o=Reflect.get(r,n,s);return(or(n)?ko.has(n):ac(n))||(e||$t(r,"get",n),t)?o:Ot(o)?a&&Ts(n)?o:o.value:mt(o)?e?Ms(o):le(o):o}}const uc=Mo(),dc=Mo(!0);function Mo(e=!1){return function(i,r,n,s){let a=i[r];if(ii(a)&&Ot(a)&&!Ot(n))return!1;if(!e&&(!lr(n)&&!ii(n)&&(a=ht(a),n=ht(n)),!J(i)&&Ot(a)&&!Ot(n)))return a.value=n,!0;const o=J(i)&&Ts(r)?Number(r)<i.length:lt(i,r),l=Reflect.set(i,r,n,s);return i===ht(s)&&(o?Ai(n,a)&&Ce(i,"set",r,n):Ce(i,"add",r,n)),l}}function gc(e,t){const i=lt(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&i&&Ce(e,"delete",t,void 0),r}function pc(e,t){const i=Reflect.has(e,t);return(!or(t)||!ko.has(t))&&$t(e,"has",t),i}function vc(e){return $t(e,"iterate",J(e)?"length":Qe),Reflect.ownKeys(e)}const Ro={get:oc,set:uc,deleteProperty:gc,has:pc,ownKeys:vc},Oo={get:hc,set(e,t){return!0},deleteProperty(e,t){return!0}},mc=Et({},Ro,{get:lc,set:dc}),_c=Et({},Oo,{get:cc}),ks=e=>e,gn=e=>Reflect.getPrototypeOf(e);function Pr(e,t,i=!1,r=!1){e=e.__v_raw;const n=ht(e),s=ht(t);i||(t!==s&&$t(n,"get",t),$t(n,"get",s));const{has:a}=gn(n),o=r?ks:i?Ls:hr;if(a.call(n,t))return o(e.get(t));if(a.call(n,s))return o(e.get(s));e!==n&&e.get(t)}function Ar(e,t=!1){const i=this.__v_raw,r=ht(i),n=ht(e);return t||(e!==n&&$t(r,"has",e),$t(r,"has",n)),e===n?i.has(e):i.has(e)||i.has(n)}function kr(e,t=!1){return e=e.__v_raw,!t&&$t(ht(e),"iterate",Qe),Reflect.get(e,"size",e)}function va(e){e=ht(e);const t=ht(this);return gn(t).has.call(t,e)||(t.add(e),Ce(t,"add",e,e)),this}function ma(e,t){t=ht(t);const i=ht(this),{has:r,get:n}=gn(i);let s=r.call(i,e);s||(e=ht(e),s=r.call(i,e));const a=n.call(i,e);return i.set(e,t),s?Ai(t,a)&&Ce(i,"set",e,t):Ce(i,"add",e,t),this}function _a(e){const t=ht(this),{has:i,get:r}=gn(t);let n=i.call(t,e);n||(e=ht(e),n=i.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return n&&Ce(t,"delete",e,void 0),s}function ya(){const e=ht(this),t=e.size!==0,i=e.clear();return t&&Ce(e,"clear",void 0,void 0),i}function Mr(e,t){return function(r,n){const s=this,a=s.__v_raw,o=ht(a),l=t?ks:e?Ls:hr;return!e&&$t(o,"iterate",Qe),a.forEach((h,c)=>r.call(n,l(h),l(c),s))}}function Rr(e,t,i){return function(...r){const n=this.__v_raw,s=ht(n),a=Ci(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,h=n[e](...r),c=i?ks:t?Ls:hr;return!t&&$t(s,"iterate",l?Jn:Qe),{next(){const{value:f,done:u}=h.next();return u?{value:f,done:u}:{value:o?[c(f[0]),c(f[1])]:c(f),done:u}},[Symbol.iterator](){return this}}}}function Te(e){return function(...t){return e==="delete"?!1:this}}function yc(){const e={get(s){return Pr(this,s)},get size(){return kr(this)},has:Ar,add:va,set:ma,delete:_a,clear:ya,forEach:Mr(!1,!1)},t={get(s){return Pr(this,s,!1,!0)},get size(){return kr(this)},has:Ar,add:va,set:ma,delete:_a,clear:ya,forEach:Mr(!1,!0)},i={get(s){return Pr(this,s,!0)},get size(){return kr(this,!0)},has(s){return Ar.call(this,s,!0)},add:Te("add"),set:Te("set"),delete:Te("delete"),clear:Te("clear"),forEach:Mr(!0,!1)},r={get(s){return Pr(this,s,!0,!0)},get size(){return kr(this,!0)},has(s){return Ar.call(this,s,!0)},add:Te("add"),set:Te("set"),delete:Te("delete"),clear:Te("clear"),forEach:Mr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=Rr(s,!1,!1),i[s]=Rr(s,!0,!1),t[s]=Rr(s,!1,!0),r[s]=Rr(s,!0,!0)}),[e,i,t,r]}const[bc,Cc,Sc,wc]=yc();function pn(e,t){const i=t?e?wc:Sc:e?Cc:bc;return(r,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(lt(i,n)&&n in r?i:r,n,s)}const xc={get:pn(!1,!1)},Ec={get:pn(!1,!0)},Tc={get:pn(!0,!1)},Pc={get:pn(!0,!0)},Lo=new WeakMap,Io=new WeakMap,Do=new WeakMap,Fo=new WeakMap;function Ac(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kc(e){return e.__v_skip||!Object.isExtensible(e)?0:Ac($h(e))}function le(e){return ii(e)?e:vn(e,!1,Ro,xc,Lo)}function No(e){return vn(e,!1,mc,Ec,Io)}function Ms(e){return vn(e,!0,Oo,Tc,Do)}function Mc(e){return vn(e,!0,_c,Pc,Fo)}function vn(e,t,i,r,n){if(!mt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=n.get(e);if(s)return s;const a=kc(e);if(a===0)return e;const o=new Proxy(e,a===2?r:i);return n.set(e,o),o}function Ze(e){return ii(e)?Ze(e.__v_raw):!!(e&&e.__v_isReactive)}function ii(e){return!!(e&&e.__v_isReadonly)}function lr(e){return!!(e&&e.__v_isShallow)}function Rs(e){return Ze(e)||ii(e)}function ht(e){const t=e&&e.__v_raw;return t?ht(t):e}function Os(e){return en(e,"__v_skip",!0),e}const hr=e=>mt(e)?le(e):e,Ls=e=>mt(e)?Ms(e):e;function Is(e){Le&&ee&&(e=ht(e),Ao(e.dep||(e.dep=As())))}function mn(e,t){e=ht(e),e.dep&&Qn(e.dep)}function Ot(e){return!!(e&&e.__v_isRef===!0)}function fe(e){return Go(e,!1)}function Rc(e){return Go(e,!0)}function Go(e,t){return Ot(e)?e:new Oc(e,t)}class Oc{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:ht(t),this._value=i?t:hr(t)}get value(){return Is(this),this._value}set value(t){const i=this.__v_isShallow||lr(t)||ii(t);t=i?t:ht(t),Ai(t,this._rawValue)&&(this._rawValue=t,this._value=i?t:hr(t),mn(this))}}function Lc(e){mn(e)}function Oe(e){return Ot(e)?e.value:e}const Ic={get:(e,t,i)=>Oe(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const n=e[t];return Ot(n)&&!Ot(i)?(n.value=i,!0):Reflect.set(e,t,i,r)}};function Ds(e){return Ze(e)?e:new Proxy(e,Ic)}class Dc{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:i,set:r}=t(()=>Is(this),()=>mn(this));this._get=i,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function Fc(e){return new Dc(e)}function Nc(e){const t=J(e)?new Array(e.length):{};for(const i in e)t[i]=Bo(e,i);return t}class Gc{constructor(t,i,r){this._object=t,this._key=i,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function Bo(e,t,i){const r=e[t];return Ot(r)?r:new Gc(e,t,i)}var Ho;class Bc{constructor(t,i,r,n){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this[Ho]=!1,this._dirty=!0,this.effect=new Sr(t,()=>{this._dirty||(this._dirty=!0,mn(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=r}get value(){const t=ht(this);return Is(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}Ho="__v_isReadonly";function Ke(e,t,i=!1){let r,n;const s=it(e);return s?(r=e,n=ie):(r=e.get,n=e.set),new Bc(r,n,s||!n,i)}function Hc(e,...t){}function ye(e,t,i,r){let n;try{n=r?e(...r):e()}catch(s){oi(s,t,i)}return n}function Kt(e,t,i,r){if(it(e)){const s=ye(e,t,i,r);return s&&Es(s)&&s.catch(a=>{oi(a,t,i)}),s}const n=[];for(let s=0;s<e.length;s++)n.push(Kt(e[s],t,i,r));return n}function oi(e,t,i,r=!0){const n=t?t.vnode:null;if(t){let s=t.parent;const a=t.proxy,o=i;for(;s;){const h=s.ec;if(h){for(let c=0;c<h.length;c++)if(h[c](e,a,o)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){ye(l,null,10,[e,a,o]);return}}Uc(e,i,n,r)}function Uc(e,t,i,r=!0){console.error(e)}let cr=!1,Zn=!1;const Ft=[];let he=0;const wi=[];let me=null,$e=0;const Uo=Promise.resolve();let Fs=null;function Ns(e){const t=Fs||Uo;return e?t.then(this?e.bind(this):e):t}function Wc(e){let t=he+1,i=Ft.length;for(;t<i;){const r=t+i>>>1;fr(Ft[r])<e?t=r+1:i=r}return t}function _n(e){(!Ft.length||!Ft.includes(e,cr&&e.allowRecurse?he+1:he))&&(e.id==null?Ft.push(e):Ft.splice(Wc(e.id),0,e),Wo())}function Wo(){!cr&&!Zn&&(Zn=!0,Fs=Uo.then(zo))}function zc(e){const t=Ft.indexOf(e);t>he&&Ft.splice(t,1)}function Gs(e){J(e)?wi.push(...e):(!me||!me.includes(e,e.allowRecurse?$e+1:$e))&&wi.push(e),Wo()}function ba(e,t=cr?he+1:0){for(;t<Ft.length;t++){const i=Ft[t];i&&i.pre&&(Ft.splice(t,1),t--,i())}}function rn(e){if(wi.length){const t=[...new Set(wi)];if(wi.length=0,me){me.push(...t);return}for(me=t,me.sort((i,r)=>fr(i)-fr(r)),$e=0;$e<me.length;$e++)me[$e]();me=null,$e=0}}const fr=e=>e.id==null?1/0:e.id,jc=(e,t)=>{const i=fr(e)-fr(t);if(i===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return i};function zo(e){Zn=!1,cr=!0,Ft.sort(jc);const t=ie;try{for(he=0;he<Ft.length;he++){const i=Ft[he];i&&i.active!==!1&&ye(i,null,14)}}finally{he=0,Ft.length=0,rn(),cr=!1,Fs=null,(Ft.length||wi.length)&&zo()}}let mi,Or=[];function jo(e,t){var i,r;mi=e,mi?(mi.enabled=!0,Or.forEach(({event:n,args:s})=>mi.emit(n,...s)),Or=[]):typeof window<"u"&&window.HTMLElement&&!(!((r=(i=window.navigator)===null||i===void 0?void 0:i.userAgent)===null||r===void 0)&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{jo(s,t)}),setTimeout(()=>{mi||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Or=[])},3e3)):Or=[]}function Yc(e,t,...i){if(e.isUnmounted)return;const r=e.vnode.props||vt;let n=i;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in r){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:u}=r[c]||vt;u&&(n=i.map(g=>bt(g)?g.trim():g)),f&&(n=i.map(be))}let o,l=r[o=Qi(t)]||r[o=Qi(Wt(t))];!l&&s&&(l=r[o=Qi(Jt(t))]),l&&Kt(l,e,6,n);const h=r[o+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Kt(h,e,6,n)}}function Yo(e,t,i=!1){const r=t.emitsCache,n=r.get(e);if(n!==void 0)return n;const s=e.emits;let a={},o=!1;if(!it(e)){const l=h=>{const c=Yo(h,t,!0);c&&(o=!0,Et(a,c))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(mt(e)&&r.set(e,null),null):(J(s)?s.forEach(l=>a[l]=null):Et(a,s),mt(e)&&r.set(e,a),a)}function yn(e,t){return!e||!yr(t)?!1:(t=t.slice(2).replace(/Once$/,""),lt(e,t[0].toLowerCase()+t.slice(1))||lt(e,Jt(t))||lt(e,t))}let It=null,bn=null;function ur(e){const t=It;return It=e,bn=e&&e.type.__scopeId||null,t}function Xc(e){bn=e}function Kc(){bn=null}const Vc=e=>dr;function dr(e,t=It,i){if(!t||e._n)return e;const r=(...n)=>{r._d&&as(-1);const s=ur(t);let a;try{a=e(...n)}finally{ur(s),r._d&&as(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function qr(e){const{type:t,vnode:i,proxy:r,withProxy:n,props:s,propsOptions:[a],slots:o,attrs:l,emit:h,render:c,renderCache:f,data:u,setupState:g,ctx:d,inheritAttrs:b}=e;let C,_;const p=ur(e);try{if(i.shapeFlag&4){const S=n||r;C=Yt(c.call(S,S,f,s,g,u,d)),_=l}else{const S=t;C=Yt(S.length>1?S(s,{attrs:l,slots:o,emit:h}):S(s,null)),_=t.props?l:qc(l)}}catch(S){ir.length=0,oi(S,e,1),C=ft(Nt)}let v=C;if(_&&b!==!1){const S=Object.keys(_),{shapeFlag:P}=v;S.length&&P&7&&(a&&S.some(ws)&&(_=Jc(_,a)),v=de(v,_))}return i.dirs&&(v=de(v),v.dirs=v.dirs?v.dirs.concat(i.dirs):i.dirs),i.transition&&(v.transition=i.transition),C=v,ur(p),C}function $c(e){let t;for(let i=0;i<e.length;i++){const r=e[i];if(Ne(r)){if(r.type!==Nt||r.children==="v-if"){if(t)return;t=r}}else return}return t}const qc=e=>{let t;for(const i in e)(i==="class"||i==="style"||yr(i))&&((t||(t={}))[i]=e[i]);return t},Jc=(e,t)=>{const i={};for(const r in e)(!ws(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function Qc(e,t,i){const{props:r,children:n,component:s}=e,{props:a,children:o,patchFlag:l}=t,h=s.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?Ca(r,a,h):!!a;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const u=c[f];if(a[u]!==r[u]&&!yn(h,u))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?Ca(r,a,h):!0:!!a;return!1}function Ca(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const s=r[n];if(t[s]!==e[s]&&!yn(i,s))return!0}return!1}function Bs({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const Xo=e=>e.__isSuspense,Zc={name:"Suspense",__isSuspense:!0,process(e,t,i,r,n,s,a,o,l,h){e==null?ef(t,i,r,n,s,a,o,l,h):rf(e,t,i,r,n,a,o,l,h)},hydrate:nf,create:Hs,normalize:sf},tf=Zc;function gr(e,t){const i=e.props&&e.props[t];it(i)&&i()}function ef(e,t,i,r,n,s,a,o,l){const{p:h,o:{createElement:c}}=l,f=c("div"),u=e.suspense=Hs(e,n,r,t,f,i,s,a,o,l);h(null,u.pendingBranch=e.ssContent,f,null,r,u,s,a),u.deps>0?(gr(e,"onPending"),gr(e,"onFallback"),h(null,e.ssFallback,t,i,r,null,s,a),xi(u,e.ssFallback)):u.resolve()}function rf(e,t,i,r,n,s,a,o,{p:l,um:h,o:{createElement:c}}){const f=t.suspense=e.suspense;f.vnode=t,t.el=e.el;const u=t.ssContent,g=t.ssFallback,{activeBranch:d,pendingBranch:b,isInFallback:C,isHydrating:_}=f;if(b)f.pendingBranch=u,ce(u,b)?(l(b,u,f.hiddenContainer,null,n,f,s,a,o),f.deps<=0?f.resolve():C&&(l(d,g,i,r,n,null,s,a,o),xi(f,g))):(f.pendingId++,_?(f.isHydrating=!1,f.activeBranch=b):h(b,n,f),f.deps=0,f.effects.length=0,f.hiddenContainer=c("div"),C?(l(null,u,f.hiddenContainer,null,n,f,s,a,o),f.deps<=0?f.resolve():(l(d,g,i,r,n,null,s,a,o),xi(f,g))):d&&ce(u,d)?(l(d,u,i,r,n,f,s,a,o),f.resolve(!0)):(l(null,u,f.hiddenContainer,null,n,f,s,a,o),f.deps<=0&&f.resolve()));else if(d&&ce(u,d))l(d,u,i,r,n,f,s,a,o),xi(f,u);else if(gr(t,"onPending"),f.pendingBranch=u,f.pendingId++,l(null,u,f.hiddenContainer,null,n,f,s,a,o),f.deps<=0)f.resolve();else{const{timeout:p,pendingId:v}=f;p>0?setTimeout(()=>{f.pendingId===v&&f.fallback(g)},p):p===0&&f.fallback(g)}}function Hs(e,t,i,r,n,s,a,o,l,h,c=!1){const{p:f,m:u,um:g,n:d,o:{parentNode:b,remove:C}}=h,_=be(e.props&&e.props.timeout),p={vnode:e,parent:t,parentComponent:i,isSVG:a,container:r,hiddenContainer:n,anchor:s,deps:0,pendingId:0,timeout:typeof _=="number"?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:c,isUnmounted:!1,effects:[],resolve(v=!1){const{vnode:S,activeBranch:P,pendingBranch:T,pendingId:A,effects:x,parentComponent:L,container:R}=p;if(p.isHydrating)p.isHydrating=!1;else if(!v){const M=P&&T.transition&&T.transition.mode==="out-in";M&&(P.transition.afterLeave=()=>{A===p.pendingId&&u(T,R,k,0)});let{anchor:k}=p;P&&(k=d(P),g(P,L,p,!0)),M||u(T,R,k,0)}xi(p,T),p.pendingBranch=null,p.isInFallback=!1;let I=p.parent,D=!1;for(;I;){if(I.pendingBranch){I.effects.push(...x),D=!0;break}I=I.parent}D||Gs(x),p.effects=[],gr(S,"onResolve")},fallback(v){if(!p.pendingBranch)return;const{vnode:S,activeBranch:P,parentComponent:T,container:A,isSVG:x}=p;gr(S,"onFallback");const L=d(P),R=()=>{!p.isInFallback||(f(null,v,A,L,T,null,x,o,l),xi(p,v))},I=v.transition&&v.transition.mode==="out-in";I&&(P.transition.afterLeave=R),p.isInFallback=!0,g(P,T,null,!0),I||R()},move(v,S,P){p.activeBranch&&u(p.activeBranch,v,S,P),p.container=v},next(){return p.activeBranch&&d(p.activeBranch)},registerDep(v,S){const P=!!p.pendingBranch;P&&p.deps++;const T=v.vnode.el;v.asyncDep.catch(A=>{oi(A,v,0)}).then(A=>{if(v.isUnmounted||p.isUnmounted||p.pendingId!==v.suspenseId)return;v.asyncResolved=!0;const{vnode:x}=v;os(v,A,!1),T&&(x.el=T);const L=!T&&v.subTree.el;S(v,x,b(T||v.subTree.el),T?null:d(v.subTree),p,a,l),L&&C(L),Bs(v,x.el),P&&--p.deps===0&&p.resolve()})},unmount(v,S){p.isUnmounted=!0,p.activeBranch&&g(p.activeBranch,i,v,S),p.pendingBranch&&g(p.pendingBranch,i,v,S)}};return p}function nf(e,t,i,r,n,s,a,o,l){const h=t.suspense=Hs(t,r,i,e.parentNode,document.createElement("div"),null,n,s,a,o,!0),c=l(e,h.pendingBranch=t.ssContent,i,h,s,a);return h.deps===0&&h.resolve(),c}function sf(e){const{shapeFlag:t,children:i}=e,r=t&32;e.ssContent=Sa(r?i.default:i),e.ssFallback=r?Sa(i.fallback):ft(Nt)}function Sa(e){let t;if(it(e)){const i=si&&e._c;i&&(e._d=!1,Bt()),e=e(),i&&(e._d=!0,t=Ut,yl())}return J(e)&&(e=$c(e)),e=Yt(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(i=>i!==e)),e}function Ko(e,t){t&&t.pendingBranch?J(e)?t.effects.push(...e):t.effects.push(e):Gs(e)}function xi(e,t){e.activeBranch=t;const{vnode:i,parentComponent:r}=e,n=i.el=t.el;r&&r.subTree===i&&(r.vnode.el=n,Bs(r,n))}function Us(e,t){if(kt){let i=kt.provides;const r=kt.parent&&kt.parent.provides;r===i&&(i=kt.provides=Object.create(r)),i[e]=t}}function Ei(e,t,i=!1){const r=kt||It;if(r){const n=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(n&&e in n)return n[e];if(arguments.length>1)return i&&it(t)?t.call(r.proxy):t}}function af(e,t){return wr(e,null,t)}function Vo(e,t){return wr(e,null,{flush:"post"})}function of(e,t){return wr(e,null,{flush:"sync"})}const Lr={};function Zi(e,t,i){return wr(e,t,i)}function wr(e,t,{immediate:i,deep:r,flush:n,onTrack:s,onTrigger:a}=vt){const o=kt;let l,h=!1,c=!1;if(Ot(e)?(l=()=>e.value,h=lr(e)):Ze(e)?(l=()=>e,r=!0):J(e)?(c=!0,h=e.some(v=>Ze(v)||lr(v)),l=()=>e.map(v=>{if(Ot(v))return v.value;if(Ze(v))return Je(v);if(it(v))return ye(v,o,2)})):it(e)?t?l=()=>ye(e,o,2):l=()=>{if(!(o&&o.isUnmounted))return f&&f(),Kt(e,o,3,[u])}:l=ie,t&&r){const v=l;l=()=>Je(v())}let f,u=v=>{f=_.onStop=()=>{ye(v,o,4)}},g;if(Mi)if(u=ie,t?i&&Kt(t,o,3,[l(),c?[]:void 0,u]):l(),n==="sync"){const v=Ll();g=v.__watcherHandles||(v.__watcherHandles=[])}else return ie;let d=c?new Array(e.length).fill(Lr):Lr;const b=()=>{if(!!_.active)if(t){const v=_.run();(r||h||(c?v.some((S,P)=>Ai(S,d[P])):Ai(v,d)))&&(f&&f(),Kt(t,o,3,[v,d===Lr?void 0:c&&d[0]===Lr?[]:d,u]),d=v)}else _.run()};b.allowRecurse=!!t;let C;n==="sync"?C=b:n==="post"?C=()=>Lt(b,o&&o.suspense):(b.pre=!0,o&&(b.id=o.uid),C=()=>_n(b));const _=new Sr(l,C);t?i?b():d=_.run():n==="post"?Lt(_.run.bind(_),o&&o.suspense):_.run();const p=()=>{_.stop(),o&&o.scope&&xs(o.scope.effects,_)};return g&&g.push(p),p}function lf(e,t,i){const r=this.proxy,n=bt(e)?e.includes(".")?$o(r,e):()=>r[e]:e.bind(r,r);let s;it(t)?s=t:(s=t.handler,i=t);const a=kt;Ge(this);const o=wr(n,s.bind(r),i);return a?Ge(a):Ie(),o}function $o(e,t){const i=t.split(".");return()=>{let r=e;for(let n=0;n<i.length&&r;n++)r=r[i[n]];return r}}function Je(e,t){if(!mt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Ot(e))Je(e.value,t);else if(J(e))for(let i=0;i<e.length;i++)Je(e[i],t);else if(ai(e)||Ci(e))e.forEach(i=>{Je(i,t)});else if(wo(e))for(const i in e)Je(e[i],t);return e}function Ws(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Er(()=>{e.isMounted=!0}),xn(()=>{e.isUnmounting=!0}),e}const qt=[Function,Array],hf={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:qt,onEnter:qt,onAfterEnter:qt,onEnterCancelled:qt,onBeforeLeave:qt,onLeave:qt,onAfterLeave:qt,onLeaveCancelled:qt,onBeforeAppear:qt,onAppear:qt,onAfterAppear:qt,onAppearCancelled:qt},setup(e,{slots:t}){const i=He(),r=Ws();let n;return()=>{const s=t.default&&Cn(t.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const b of s)if(b.type!==Nt){a=b;break}}const o=ht(e),{mode:l}=o;if(r.isLeaving)return On(a);const h=wa(a);if(!h)return On(a);const c=ki(h,o,r,i);ri(h,c);const f=i.subTree,u=f&&wa(f);let g=!1;const{getTransitionKey:d}=h.type;if(d){const b=d();n===void 0?n=b:b!==n&&(n=b,g=!0)}if(u&&u.type!==Nt&&(!ce(h,u)||g)){const b=ki(u,o,r,i);if(ri(u,b),l==="out-in")return r.isLeaving=!0,b.afterLeave=()=>{r.isLeaving=!1,i.update.active!==!1&&i.update()},On(a);l==="in-out"&&h.type!==Nt&&(b.delayLeave=(C,_,p)=>{const v=qo(r,u);v[String(u.key)]=u,C._leaveCb=()=>{_(),C._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=p})}return a}}},zs=hf;function qo(e,t){const{leavingVNodes:i}=e;let r=i.get(t.type);return r||(r=Object.create(null),i.set(t.type,r)),r}function ki(e,t,i,r){const{appear:n,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:h,onEnterCancelled:c,onBeforeLeave:f,onLeave:u,onAfterLeave:g,onLeaveCancelled:d,onBeforeAppear:b,onAppear:C,onAfterAppear:_,onAppearCancelled:p}=t,v=String(e.key),S=qo(i,e),P=(x,L)=>{x&&Kt(x,r,9,L)},T=(x,L)=>{const R=L[1];P(x,L),J(x)?x.every(I=>I.length<=1)&&R():x.length<=1&&R()},A={mode:s,persisted:a,beforeEnter(x){let L=o;if(!i.isMounted)if(n)L=b||o;else return;x._leaveCb&&x._leaveCb(!0);const R=S[v];R&&ce(e,R)&&R.el._leaveCb&&R.el._leaveCb(),P(L,[x])},enter(x){let L=l,R=h,I=c;if(!i.isMounted)if(n)L=C||l,R=_||h,I=p||c;else return;let D=!1;const M=x._enterCb=k=>{D||(D=!0,k?P(I,[x]):P(R,[x]),A.delayedLeave&&A.delayedLeave(),x._enterCb=void 0)};L?T(L,[x,M]):M()},leave(x,L){const R=String(e.key);if(x._enterCb&&x._enterCb(!0),i.isUnmounting)return L();P(f,[x]);let I=!1;const D=x._leaveCb=M=>{I||(I=!0,L(),M?P(d,[x]):P(g,[x]),x._leaveCb=void 0,S[R]===e&&delete S[R])};S[R]=e,u?T(u,[x,D]):D()},clone(x){return ki(x,t,i,r)}};return A}function On(e){if(xr(e))return e=de(e),e.children=null,e}function wa(e){return xr(e)?e.children?e.children[0]:void 0:e}function ri(e,t){e.shapeFlag&6&&e.component?ri(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Cn(e,t=!1,i){let r=[],n=0;for(let s=0;s<e.length;s++){let a=e[s];const o=i==null?a.key:String(i)+String(a.key!=null?a.key:s);a.type===Pt?(a.patchFlag&128&&n++,r=r.concat(Cn(a.children,t,o))):(t||a.type!==Nt)&&r.push(o!=null?de(a,{key:o}):a)}if(n>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function js(e){return it(e)?{setup:e,name:e.name}:e}const ti=e=>!!e.type.__asyncLoader;function cf(e){it(e)&&(e={loader:e});const{loader:t,loadingComponent:i,errorComponent:r,delay:n=200,timeout:s,suspensible:a=!0,onError:o}=e;let l=null,h,c=0;const f=()=>(c++,l=null,u()),u=()=>{let g;return l||(g=l=t().catch(d=>{if(d=d instanceof Error?d:new Error(String(d)),o)return new Promise((b,C)=>{o(d,()=>b(f()),()=>C(d),c+1)});throw d}).then(d=>g!==l&&l?l:(d&&(d.__esModule||d[Symbol.toStringTag]==="Module")&&(d=d.default),h=d,d)))};return js({name:"AsyncComponentWrapper",__asyncLoader:u,get __asyncResolved(){return h},setup(){const g=kt;if(h)return()=>Ln(h,g);const d=p=>{l=null,oi(p,g,13,!r)};if(a&&g.suspense||Mi)return u().then(p=>()=>Ln(p,g)).catch(p=>(d(p),()=>r?ft(r,{error:p}):null));const b=fe(!1),C=fe(),_=fe(!!n);return n&&setTimeout(()=>{_.value=!1},n),s!=null&&setTimeout(()=>{if(!b.value&&!C.value){const p=new Error(`Async component timed out after ${s}ms.`);d(p),C.value=p}},s),u().then(()=>{b.value=!0,g.parent&&xr(g.parent.vnode)&&_n(g.parent.update)}).catch(p=>{d(p),C.value=p}),()=>{if(b.value&&h)return Ln(h,g);if(C.value&&r)return ft(r,{error:C.value});if(i&&!_.value)return ft(i)}}})}function Ln(e,t){const{ref:i,props:r,children:n,ce:s}=t.vnode,a=ft(e,r,n);return a.ref=i,a.ce=s,delete t.vnode.ce,a}const xr=e=>e.type.__isKeepAlive,ff={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const i=He(),r=i.ctx;if(!r.renderer)return()=>{const p=t.default&&t.default();return p&&p.length===1?p[0]:p};const n=new Map,s=new Set;let a=null;const o=i.suspense,{renderer:{p:l,m:h,um:c,o:{createElement:f}}}=r,u=f("div");r.activate=(p,v,S,P,T)=>{const A=p.component;h(p,v,S,0,o),l(A.vnode,p,v,S,A,o,P,p.slotScopeIds,T),Lt(()=>{A.isDeactivated=!1,A.a&&Si(A.a);const x=p.props&&p.props.onVnodeMounted;x&&Ht(x,A.parent,p)},o)},r.deactivate=p=>{const v=p.component;h(p,u,null,1,o),Lt(()=>{v.da&&Si(v.da);const S=p.props&&p.props.onVnodeUnmounted;S&&Ht(S,v.parent,p),v.isDeactivated=!0},o)};function g(p){In(p),c(p,i,o,!0)}function d(p){n.forEach((v,S)=>{const P=hs(v.type);P&&(!p||!p(P))&&b(S)})}function b(p){const v=n.get(p);!a||v.type!==a.type?g(v):a&&In(a),n.delete(p),s.delete(p)}Zi(()=>[e.include,e.exclude],([p,v])=>{p&&d(S=>Xi(p,S)),v&&d(S=>!Xi(v,S))},{flush:"post",deep:!0});let C=null;const _=()=>{C!=null&&n.set(C,Dn(i.subTree))};return Er(_),wn(_),xn(()=>{n.forEach(p=>{const{subTree:v,suspense:S}=i,P=Dn(v);if(p.type===P.type){In(P);const T=P.component.da;T&&Lt(T,S);return}g(p)})}),()=>{if(C=null,!t.default)return null;const p=t.default(),v=p[0];if(p.length>1)return a=null,p;if(!Ne(v)||!(v.shapeFlag&4)&&!(v.shapeFlag&128))return a=null,v;let S=Dn(v);const P=S.type,T=hs(ti(S)?S.type.__asyncResolved||{}:P),{include:A,exclude:x,max:L}=e;if(A&&(!T||!Xi(A,T))||x&&T&&Xi(x,T))return a=S,v;const R=S.key==null?P:S.key,I=n.get(R);return S.el&&(S=de(S),v.shapeFlag&128&&(v.ssContent=S)),C=R,I?(S.el=I.el,S.component=I.component,S.transition&&ri(S,S.transition),S.shapeFlag|=512,s.delete(R),s.add(R)):(s.add(R),L&&s.size>parseInt(L,10)&&b(s.values().next().value)),S.shapeFlag|=256,a=S,Xo(v.type)?v:S}}},uf=ff;function Xi(e,t){return J(e)?e.some(i=>Xi(i,t)):bt(e)?e.split(",").includes(t):e.test?e.test(t):!1}function Jo(e,t){Zo(e,"a",t)}function Qo(e,t){Zo(e,"da",t)}function Zo(e,t,i=kt){const r=e.__wdc||(e.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Sn(t,r,i),i){let n=i.parent;for(;n&&n.parent;)xr(n.parent.vnode)&&df(r,t,i,n),n=n.parent}}function df(e,t,i,r){const n=Sn(t,e,r,!0);En(()=>{xs(r[t],n)},i)}function In(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function Dn(e){return e.shapeFlag&128?e.ssContent:e}function Sn(e,t,i=kt,r=!1){if(i){const n=i[e]||(i[e]=[]),s=t.__weh||(t.__weh=(...a)=>{if(i.isUnmounted)return;Li(),Ge(i);const o=Kt(t,i,e,a);return Ie(),Ii(),o});return r?n.unshift(s):n.push(s),s}}const Se=e=>(t,i=kt)=>(!Mi||e==="sp")&&Sn(e,(...r)=>t(...r),i),tl=Se("bm"),Er=Se("m"),el=Se("bu"),wn=Se("u"),xn=Se("bum"),En=Se("um"),il=Se("sp"),rl=Se("rtg"),nl=Se("rtc");function sl(e,t=kt){Sn("ec",e,t)}function gf(e,t){const i=It;if(i===null)return e;const r=Pn(i)||i.proxy,n=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[a,o,l,h=vt]=t[s];a&&(it(a)&&(a={mounted:a,updated:a}),a.deep&&Je(o),n.push({dir:a,instance:r,value:o,oldValue:void 0,arg:l,modifiers:h}))}return e}function oe(e,t,i,r){const n=e.dirs,s=t&&t.dirs;for(let a=0;a<n.length;a++){const o=n[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(Li(),Kt(l,i,8,[e.el,o,e,t]),Ii())}}const Ys="components",pf="directives";function _i(e,t){return Xs(Ys,e,!0,t)||e}const al=Symbol();function vf(e){return bt(e)?Xs(Ys,e,!1)||e:e||al}function mf(e){return Xs(pf,e)}function Xs(e,t,i=!0,r=!1){const n=It||kt;if(n){const s=n.type;if(e===Ys){const o=hs(s,!1);if(o&&(o===t||o===Wt(t)||o===Cr(Wt(t))))return s}const a=xa(n[e]||s[e],t)||xa(n.appContext[e],t);return!a&&r?s:a}}function xa(e,t){return e&&(e[t]||e[Wt(t)]||e[Cr(Wt(t))])}function nn(e,t,i,r){let n;const s=i&&i[r];if(J(e)||bt(e)){n=new Array(e.length);for(let a=0,o=e.length;a<o;a++)n[a]=t(e[a],a,void 0,s&&s[a])}else if(typeof e=="number"){n=new Array(e);for(let a=0;a<e;a++)n[a]=t(a+1,a,void 0,s&&s[a])}else if(mt(e))if(e[Symbol.iterator])n=Array.from(e,(a,o)=>t(a,o,void 0,s&&s[o]));else{const a=Object.keys(e);n=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const h=a[o];n[o]=t(e[h],h,o,s&&s[o])}}else n=[];return i&&(i[r]=n),n}function _f(e,t){for(let i=0;i<t.length;i++){const r=t[i];if(J(r))for(let n=0;n<r.length;n++)e[r[n].name]=r[n].fn;else r&&(e[r.name]=r.key?(...n)=>{const s=r.fn(...n);return s&&(s.key=r.key),s}:r.fn)}return e}function yf(e,t,i={},r,n){if(It.isCE||It.parent&&ti(It.parent)&&It.parent.isCE)return t!=="default"&&(i.name=t),ft("slot",i,r&&r());let s=e[t];s&&s._c&&(s._d=!1),Bt();const a=s&&ol(s(i)),o=pr(Pt,{key:i.key||a&&a.key||`_${t}`},a||(r?r():[]),a&&e._===1?64:-2);return!n&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function ol(e){return e.some(t=>Ne(t)?!(t.type===Nt||t.type===Pt&&!ol(t.children)):!0)?e:null}function bf(e,t){const i={};for(const r in e)i[t&&/[A-Z]/.test(r)?`on:${r}`:Qi(r)]=e[r];return i}const ts=e=>e?Tl(e)?Pn(e)||e.proxy:ts(e.parent):null,tr=Et(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ts(e.parent),$root:e=>ts(e.root),$emit:e=>e.emit,$options:e=>Ks(e),$forceUpdate:e=>e.f||(e.f=()=>_n(e.update)),$nextTick:e=>e.n||(e.n=Ns.bind(e.proxy)),$watch:e=>lf.bind(e)}),Fn=(e,t)=>e!==vt&&!e.__isScriptSetup&&lt(e,t),es={get({_:e},t){const{ctx:i,setupState:r,data:n,props:s,accessCache:a,type:o,appContext:l}=e;let h;if(t[0]!=="$"){const g=a[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return n[t];case 4:return i[t];case 3:return s[t]}else{if(Fn(r,t))return a[t]=1,r[t];if(n!==vt&&lt(n,t))return a[t]=2,n[t];if((h=e.propsOptions[0])&&lt(h,t))return a[t]=3,s[t];if(i!==vt&&lt(i,t))return a[t]=4,i[t];is&&(a[t]=0)}}const c=tr[t];let f,u;if(c)return t==="$attrs"&&$t(e,"get",t),c(e);if((f=o.__cssModules)&&(f=f[t]))return f;if(i!==vt&&lt(i,t))return a[t]=4,i[t];if(u=l.config.globalProperties,lt(u,t))return u[t]},set({_:e},t,i){const{data:r,setupState:n,ctx:s}=e;return Fn(n,t)?(n[t]=i,!0):r!==vt&&lt(r,t)?(r[t]=i,!0):lt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:n,propsOptions:s}},a){let o;return!!i[a]||e!==vt&&lt(e,a)||Fn(t,a)||(o=s[0])&&lt(o,a)||lt(r,a)||lt(tr,a)||lt(n.config.globalProperties,a)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:lt(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}},Cf=Et({},es,{get(e,t){if(t!==Symbol.unscopables)return es.get(e,t,e)},has(e,t){return t[0]!=="_"&&!Nh(t)}});let is=!0;function Sf(e){const t=Ks(e),i=e.proxy,r=e.ctx;is=!1,t.beforeCreate&&Ea(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:a,watch:o,provide:l,inject:h,created:c,beforeMount:f,mounted:u,beforeUpdate:g,updated:d,activated:b,deactivated:C,beforeDestroy:_,beforeUnmount:p,destroyed:v,unmounted:S,render:P,renderTracked:T,renderTriggered:A,errorCaptured:x,serverPrefetch:L,expose:R,inheritAttrs:I,components:D,directives:M,filters:k}=t;if(h&&wf(h,r,null,e.appContext.config.unwrapInjectedRef),a)for(const $ in a){const Z=a[$];it(Z)&&(r[$]=Z.bind(i))}if(n){const $=n.call(i,i);mt($)&&(e.data=le($))}if(is=!0,s)for(const $ in s){const Z=s[$],st=it(Z)?Z.bind(i,i):it(Z.get)?Z.get.bind(i,i):ie,q=!it(Z)&&it(Z.set)?Z.set.bind(i):ie,nt=Zs({get:st,set:q});Object.defineProperty(r,$,{enumerable:!0,configurable:!0,get:()=>nt.value,set:ot=>nt.value=ot})}if(o)for(const $ in o)ll(o[$],r,i,$);if(l){const $=it(l)?l.call(i):l;Reflect.ownKeys($).forEach(Z=>{Us(Z,$[Z])})}c&&Ea(c,e,"c");function W($,Z){J(Z)?Z.forEach(st=>$(st.bind(i))):Z&&$(Z.bind(i))}if(W(tl,f),W(Er,u),W(el,g),W(wn,d),W(Jo,b),W(Qo,C),W(sl,x),W(nl,T),W(rl,A),W(xn,p),W(En,S),W(il,L),J(R))if(R.length){const $=e.exposed||(e.exposed={});R.forEach(Z=>{Object.defineProperty($,Z,{get:()=>i[Z],set:st=>i[Z]=st})})}else e.exposed||(e.exposed={});P&&e.render===ie&&(e.render=P),I!=null&&(e.inheritAttrs=I),D&&(e.components=D),M&&(e.directives=M)}function wf(e,t,i=ie,r=!1){J(e)&&(e=rs(e));for(const n in e){const s=e[n];let a;mt(s)?"default"in s?a=Ei(s.from||n,s.default,!0):a=Ei(s.from||n):a=Ei(s),Ot(a)&&r?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[n]=a}}function Ea(e,t,i){Kt(J(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function ll(e,t,i,r){const n=r.includes(".")?$o(i,r):()=>i[r];if(bt(e)){const s=t[e];it(s)&&Zi(n,s)}else if(it(e))Zi(n,e.bind(i));else if(mt(e))if(J(e))e.forEach(s=>ll(s,t,i,r));else{const s=it(e.handler)?e.handler.bind(i):t[e.handler];it(s)&&Zi(n,s,e)}}function Ks(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!n.length&&!i&&!r?l=t:(l={},n.length&&n.forEach(h=>sn(l,h,a,!0)),sn(l,t,a)),mt(t)&&s.set(t,l),l}function sn(e,t,i,r=!1){const{mixins:n,extends:s}=t;s&&sn(e,s,i,!0),n&&n.forEach(a=>sn(e,a,i,!0));for(const a in t)if(!(r&&a==="expose")){const o=xf[a]||i&&i[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const xf={data:Ta,props:Ve,emits:Ve,methods:Ve,computed:Ve,beforeCreate:Gt,created:Gt,beforeMount:Gt,mounted:Gt,beforeUpdate:Gt,updated:Gt,beforeDestroy:Gt,beforeUnmount:Gt,destroyed:Gt,unmounted:Gt,activated:Gt,deactivated:Gt,errorCaptured:Gt,serverPrefetch:Gt,components:Ve,directives:Ve,watch:Tf,provide:Ta,inject:Ef};function Ta(e,t){return t?e?function(){return Et(it(e)?e.call(this,this):e,it(t)?t.call(this,this):t)}:t:e}function Ef(e,t){return Ve(rs(e),rs(t))}function rs(e){if(J(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Gt(e,t){return e?[...new Set([].concat(e,t))]:t}function Ve(e,t){return e?Et(Et(Object.create(null),e),t):t}function Tf(e,t){if(!e)return t;if(!t)return e;const i=Et(Object.create(null),e);for(const r in t)i[r]=Gt(e[r],t[r]);return i}function Pf(e,t,i,r=!1){const n={},s={};en(s,Tn,1),e.propsDefaults=Object.create(null),hl(e,t,n,s);for(const a in e.propsOptions[0])a in n||(n[a]=void 0);i?e.props=r?n:No(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function Af(e,t,i,r){const{props:n,attrs:s,vnode:{patchFlag:a}}=e,o=ht(n),[l]=e.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let u=c[f];if(yn(e.emitsOptions,u))continue;const g=t[u];if(l)if(lt(s,u))g!==s[u]&&(s[u]=g,h=!0);else{const d=Wt(u);n[d]=ns(l,o,d,g,e,!1)}else g!==s[u]&&(s[u]=g,h=!0)}}}else{hl(e,t,n,s)&&(h=!0);let c;for(const f in o)(!t||!lt(t,f)&&((c=Jt(f))===f||!lt(t,c)))&&(l?i&&(i[f]!==void 0||i[c]!==void 0)&&(n[f]=ns(l,o,f,void 0,e,!0)):delete n[f]);if(s!==o)for(const f in s)(!t||!lt(t,f)&&!0)&&(delete s[f],h=!0)}h&&Ce(e,"set","$attrs")}function hl(e,t,i,r){const[n,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(Ji(l))continue;const h=t[l];let c;n&&lt(n,c=Wt(l))?!s||!s.includes(c)?i[c]=h:(o||(o={}))[c]=h:yn(e.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,a=!0)}if(s){const l=ht(i),h=o||vt;for(let c=0;c<s.length;c++){const f=s[c];i[f]=ns(n,l,f,h[f],e,!lt(h,f))}}return a}function ns(e,t,i,r,n,s){const a=e[i];if(a!=null){const o=lt(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&it(l)){const{propsDefaults:h}=n;i in h?r=h[i]:(Ge(n),r=h[i]=l.call(null,t),Ie())}else r=l}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===Jt(i))&&(r=!0))}return r}function cl(e,t,i=!1){const r=t.propsCache,n=r.get(e);if(n)return n;const s=e.props,a={},o=[];let l=!1;if(!it(e)){const c=f=>{l=!0;const[u,g]=cl(f,t,!0);Et(a,u),g&&o.push(...g)};!i&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!l)return mt(e)&&r.set(e,bi),bi;if(J(s))for(let c=0;c<s.length;c++){const f=Wt(s[c]);Pa(f)&&(a[f]=vt)}else if(s)for(const c in s){const f=Wt(c);if(Pa(f)){const u=s[c],g=a[f]=J(u)||it(u)?{type:u}:Object.assign({},u);if(g){const d=Ma(Boolean,g.type),b=Ma(String,g.type);g[0]=d>-1,g[1]=b<0||d<b,(d>-1||lt(g,"default"))&&o.push(f)}}}const h=[a,o];return mt(e)&&r.set(e,h),h}function Pa(e){return e[0]!=="$"}function Aa(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function ka(e,t){return Aa(e)===Aa(t)}function Ma(e,t){return J(t)?t.findIndex(i=>ka(i,e)):it(t)&&ka(t,e)?0:-1}const fl=e=>e[0]==="_"||e==="$stable",Vs=e=>J(e)?e.map(Yt):[Yt(e)],kf=(e,t,i)=>{if(t._n)return t;const r=dr((...n)=>Vs(t(...n)),i);return r._c=!1,r},ul=(e,t,i)=>{const r=e._ctx;for(const n in e){if(fl(n))continue;const s=e[n];if(it(s))t[n]=kf(n,s,r);else if(s!=null){const a=Vs(s);t[n]=()=>a}}},dl=(e,t)=>{const i=Vs(t);e.slots.default=()=>i},Mf=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=ht(t),en(t,"_",i)):ul(t,e.slots={})}else e.slots={},t&&dl(e,t);en(e.slots,Tn,1)},Rf=(e,t,i)=>{const{vnode:r,slots:n}=e;let s=!0,a=vt;if(r.shapeFlag&32){const o=t._;o?i&&o===1?s=!1:(Et(n,t),!i&&o===1&&delete n._):(s=!t.$stable,ul(t,n)),a=t}else t&&(dl(e,t),a={default:1});if(s)for(const o in n)!fl(o)&&!(o in a)&&delete n[o]};function gl(){return{app:null,config:{isNativeTag:Xh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Of=0;function Lf(e,t){return function(r,n=null){it(r)||(r=Object.assign({},r)),n!=null&&!mt(n)&&(n=null);const s=gl(),a=new Set;let o=!1;const l=s.app={_uid:Of++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:Dl,get config(){return s.config},set config(h){},use(h,...c){return a.has(h)||(h&&it(h.install)?(a.add(h),h.install(l,...c)):it(h)&&(a.add(h),h(l,...c))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,c){return c?(s.components[h]=c,l):s.components[h]},directive(h,c){return c?(s.directives[h]=c,l):s.directives[h]},mount(h,c,f){if(!o){const u=ft(r,n);return u.appContext=s,c&&t?t(u,h):e(u,h,f),o=!0,l._container=h,h.__vue_app__=l,Pn(u.component)||u.component.proxy}},unmount(){o&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,c){return s.provides[h]=c,l}};return l}}function an(e,t,i,r,n=!1){if(J(e)){e.forEach((u,g)=>an(u,t&&(J(t)?t[g]:t),i,r,n));return}if(ti(r)&&!n)return;const s=r.shapeFlag&4?Pn(r.component)||r.component.proxy:r.el,a=n?null:s,{i:o,r:l}=e,h=t&&t.r,c=o.refs===vt?o.refs={}:o.refs,f=o.setupState;if(h!=null&&h!==l&&(bt(h)?(c[h]=null,lt(f,h)&&(f[h]=null)):Ot(h)&&(h.value=null)),it(l))ye(l,o,12,[a,c]);else{const u=bt(l),g=Ot(l);if(u||g){const d=()=>{if(e.f){const b=u?lt(f,l)?f[l]:c[l]:l.value;n?J(b)&&xs(b,s):J(b)?b.includes(s)||b.push(s):u?(c[l]=[s],lt(f,l)&&(f[l]=c[l])):(l.value=[s],e.k&&(c[e.k]=l.value))}else u?(c[l]=a,lt(f,l)&&(f[l]=a)):g&&(l.value=a,e.k&&(c[e.k]=a))};a?(d.id=-1,Lt(d,i)):d()}}}let Pe=!1;const Ir=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",Dr=e=>e.nodeType===8;function If(e){const{mt:t,p:i,o:{patchProp:r,createText:n,nextSibling:s,parentNode:a,remove:o,insert:l,createComment:h}}=e,c=(_,p)=>{if(!p.hasChildNodes()){i(null,_,p),rn(),p._vnode=_;return}Pe=!1,f(p.firstChild,_,null,null,null),rn(),p._vnode=_,Pe&&console.error("Hydration completed but contains mismatches.")},f=(_,p,v,S,P,T=!1)=>{const A=Dr(_)&&_.data==="[",x=()=>b(_,p,v,S,P,A),{type:L,ref:R,shapeFlag:I,patchFlag:D}=p;let M=_.nodeType;p.el=_,D===-2&&(T=!1,p.dynamicChildren=null);let k=null;switch(L){case ni:M!==3?p.children===""?(l(p.el=n(""),a(_),_),k=_):k=x():(_.data!==p.children&&(Pe=!0,_.data=p.children),k=s(_));break;case Nt:M!==8||A?k=x():k=s(_);break;case ei:if(A&&(_=s(_),M=_.nodeType),M===1||M===3){k=_;const X=!p.children.length;for(let W=0;W<p.staticCount;W++)X&&(p.children+=k.nodeType===1?k.outerHTML:k.data),W===p.staticCount-1&&(p.anchor=k),k=s(k);return A?s(k):k}else x();break;case Pt:A?k=d(_,p,v,S,P,T):k=x();break;default:if(I&1)M!==1||p.type.toLowerCase()!==_.tagName.toLowerCase()?k=x():k=u(_,p,v,S,P,T);else if(I&6){p.slotScopeIds=P;const X=a(_);if(t(p,X,null,v,S,Ir(X),T),k=A?C(_):s(_),k&&Dr(k)&&k.data==="teleport end"&&(k=s(k)),ti(p)){let W;A?(W=ft(Pt),W.anchor=k?k.previousSibling:X.lastChild):W=_.nodeType===3?Js(""):ft("div"),W.el=_,p.component.subTree=W}}else I&64?M!==8?k=x():k=p.type.hydrate(_,p,v,S,P,T,e,g):I&128&&(k=p.type.hydrate(_,p,v,S,Ir(a(_)),P,T,e,f))}return R!=null&&an(R,null,S,p),k},u=(_,p,v,S,P,T)=>{T=T||!!p.dynamicChildren;const{type:A,props:x,patchFlag:L,shapeFlag:R,dirs:I}=p,D=A==="input"&&I||A==="option";if(D||L!==-1){if(I&&oe(p,null,v,"created"),x)if(D||!T||L&48)for(const k in x)(D&&k.endsWith("value")||yr(k)&&!Ji(k))&&r(_,k,null,x[k],!1,void 0,v);else x.onClick&&r(_,"onClick",null,x.onClick,!1,void 0,v);let M;if((M=x&&x.onVnodeBeforeMount)&&Ht(M,v,p),I&&oe(p,null,v,"beforeMount"),((M=x&&x.onVnodeMounted)||I)&&Ko(()=>{M&&Ht(M,v,p),I&&oe(p,null,v,"mounted")},S),R&16&&!(x&&(x.innerHTML||x.textContent))){let k=g(_.firstChild,p,_,v,S,P,T);for(;k;){Pe=!0;const X=k;k=k.nextSibling,o(X)}}else R&8&&_.textContent!==p.children&&(Pe=!0,_.textContent=p.children)}return _.nextSibling},g=(_,p,v,S,P,T,A)=>{A=A||!!p.dynamicChildren;const x=p.children,L=x.length;for(let R=0;R<L;R++){const I=A?x[R]:x[R]=Yt(x[R]);if(_)_=f(_,I,S,P,T,A);else{if(I.type===ni&&!I.children)continue;Pe=!0,i(null,I,v,null,S,P,Ir(v),T)}}return _},d=(_,p,v,S,P,T)=>{const{slotScopeIds:A}=p;A&&(P=P?P.concat(A):A);const x=a(_),L=g(s(_),p,x,v,S,P,T);return L&&Dr(L)&&L.data==="]"?s(p.anchor=L):(Pe=!0,l(p.anchor=h("]"),x,L),L)},b=(_,p,v,S,P,T)=>{if(Pe=!0,p.el=null,T){const L=C(_);for(;;){const R=s(_);if(R&&R!==L)o(R);else break}}const A=s(_),x=a(_);return o(_),i(null,p,x,A,v,S,Ir(x),P),A},C=_=>{let p=0;for(;_;)if(_=s(_),_&&Dr(_)&&(_.data==="["&&p++,_.data==="]")){if(p===0)return s(_);p--}return _};return[c,f]}const Lt=Ko;function pl(e){return ml(e)}function vl(e){return ml(e,If)}function ml(e,t){const i=Qh();i.__VUE__=!0;const{insert:r,remove:n,patchProp:s,createElement:a,createText:o,createComment:l,setText:h,setElementText:c,parentNode:f,nextSibling:u,setScopeId:g=ie,insertStaticContent:d}=e,b=(y,w,O,N=null,F=null,j=null,K=!1,z=null,Y=!!w.dynamicChildren)=>{if(y===w)return;y&&!ce(y,w)&&(N=Zt(y),ot(y,F,j,!0),y=null),w.patchFlag===-2&&(Y=!1,w.dynamicChildren=null);const{type:B,ref:tt,shapeFlag:Q}=w;switch(B){case ni:C(y,w,O,N);break;case Nt:_(y,w,O,N);break;case ei:y==null&&p(w,O,N,K);break;case Pt:D(y,w,O,N,F,j,K,z,Y);break;default:Q&1?P(y,w,O,N,F,j,K,z,Y):Q&6?M(y,w,O,N,F,j,K,z,Y):(Q&64||Q&128)&&B.process(y,w,O,N,F,j,K,z,Y,se)}tt!=null&&F&&an(tt,y&&y.ref,j,w||y,!w)},C=(y,w,O,N)=>{if(y==null)r(w.el=o(w.children),O,N);else{const F=w.el=y.el;w.children!==y.children&&h(F,w.children)}},_=(y,w,O,N)=>{y==null?r(w.el=l(w.children||""),O,N):w.el=y.el},p=(y,w,O,N)=>{[y.el,y.anchor]=d(y.children,w,O,N,y.el,y.anchor)},v=({el:y,anchor:w},O,N)=>{let F;for(;y&&y!==w;)F=u(y),r(y,O,N),y=F;r(w,O,N)},S=({el:y,anchor:w})=>{let O;for(;y&&y!==w;)O=u(y),n(y),y=O;n(w)},P=(y,w,O,N,F,j,K,z,Y)=>{K=K||w.type==="svg",y==null?T(w,O,N,F,j,K,z,Y):L(y,w,F,j,K,z,Y)},T=(y,w,O,N,F,j,K,z)=>{let Y,B;const{type:tt,props:Q,shapeFlag:et,transition:rt,dirs:at}=y;if(Y=y.el=a(y.type,j,Q&&Q.is,Q),et&8?c(Y,y.children):et&16&&x(y.children,Y,null,N,F,j&&tt!=="foreignObject",K,z),at&&oe(y,null,N,"created"),Q){for(const gt in Q)gt!=="value"&&!Ji(gt)&&s(Y,gt,null,Q[gt],j,y.children,N,F,xt);"value"in Q&&s(Y,"value",null,Q.value),(B=Q.onVnodeBeforeMount)&&Ht(B,N,y)}A(Y,y,y.scopeId,K,N),at&&oe(y,null,N,"beforeMount");const yt=(!F||F&&!F.pendingBranch)&&rt&&!rt.persisted;yt&&rt.beforeEnter(Y),r(Y,w,O),((B=Q&&Q.onVnodeMounted)||yt||at)&&Lt(()=>{B&&Ht(B,N,y),yt&&rt.enter(Y),at&&oe(y,null,N,"mounted")},F)},A=(y,w,O,N,F)=>{if(O&&g(y,O),N)for(let j=0;j<N.length;j++)g(y,N[j]);if(F){let j=F.subTree;if(w===j){const K=F.vnode;A(y,K,K.scopeId,K.slotScopeIds,F.parent)}}},x=(y,w,O,N,F,j,K,z,Y=0)=>{for(let B=Y;B<y.length;B++){const tt=y[B]=z?Re(y[B]):Yt(y[B]);b(null,tt,w,O,N,F,j,K,z)}},L=(y,w,O,N,F,j,K)=>{const z=w.el=y.el;let{patchFlag:Y,dynamicChildren:B,dirs:tt}=w;Y|=y.patchFlag&16;const Q=y.props||vt,et=w.props||vt;let rt;O&&je(O,!1),(rt=et.onVnodeBeforeUpdate)&&Ht(rt,O,w,y),tt&&oe(w,y,O,"beforeUpdate"),O&&je(O,!0);const at=F&&w.type!=="foreignObject";if(B?R(y.dynamicChildren,B,z,O,N,at,j):K||Z(y,w,z,null,O,N,at,j,!1),Y>0){if(Y&16)I(z,w,Q,et,O,N,F);else if(Y&2&&Q.class!==et.class&&s(z,"class",null,et.class,F),Y&4&&s(z,"style",Q.style,et.style,F),Y&8){const yt=w.dynamicProps;for(let gt=0;gt<yt.length;gt++){const At=yt[gt],te=Q[At],gi=et[At];(gi!==te||At==="value")&&s(z,At,te,gi,F,y.children,O,N,xt)}}Y&1&&y.children!==w.children&&c(z,w.children)}else!K&&B==null&&I(z,w,Q,et,O,N,F);((rt=et.onVnodeUpdated)||tt)&&Lt(()=>{rt&&Ht(rt,O,w,y),tt&&oe(w,y,O,"updated")},N)},R=(y,w,O,N,F,j,K)=>{for(let z=0;z<w.length;z++){const Y=y[z],B=w[z],tt=Y.el&&(Y.type===Pt||!ce(Y,B)||Y.shapeFlag&70)?f(Y.el):O;b(Y,B,tt,null,N,F,j,K,!0)}},I=(y,w,O,N,F,j,K)=>{if(O!==N){if(O!==vt)for(const z in O)!Ji(z)&&!(z in N)&&s(y,z,O[z],null,K,w.children,F,j,xt);for(const z in N){if(Ji(z))continue;const Y=N[z],B=O[z];Y!==B&&z!=="value"&&s(y,z,B,Y,K,w.children,F,j,xt)}"value"in N&&s(y,"value",O.value,N.value)}},D=(y,w,O,N,F,j,K,z,Y)=>{const B=w.el=y?y.el:o(""),tt=w.anchor=y?y.anchor:o("");let{patchFlag:Q,dynamicChildren:et,slotScopeIds:rt}=w;rt&&(z=z?z.concat(rt):rt),y==null?(r(B,O,N),r(tt,O,N),x(w.children,O,tt,F,j,K,z,Y)):Q>0&&Q&64&&et&&y.dynamicChildren?(R(y.dynamicChildren,et,O,F,j,K,z),(w.key!=null||F&&w===F.subTree)&&$s(y,w,!0)):Z(y,w,O,tt,F,j,K,z,Y)},M=(y,w,O,N,F,j,K,z,Y)=>{w.slotScopeIds=z,y==null?w.shapeFlag&512?F.ctx.activate(w,O,N,K,Y):k(w,O,N,F,j,K,Y):X(y,w,Y)},k=(y,w,O,N,F,j,K)=>{const z=y.component=El(y,N,F);if(xr(y)&&(z.ctx.renderer=se),Pl(z),z.asyncDep){if(F&&F.registerDep(z,W),!y.el){const Y=z.subTree=ft(Nt);_(null,Y,w,O)}return}W(z,y,w,O,F,j,K)},X=(y,w,O)=>{const N=w.component=y.component;if(Qc(y,w,O))if(N.asyncDep&&!N.asyncResolved){$(N,w,O);return}else N.next=w,zc(N.update),N.update();else w.el=y.el,N.vnode=w},W=(y,w,O,N,F,j,K)=>{const z=()=>{if(y.isMounted){let{next:tt,bu:Q,u:et,parent:rt,vnode:at}=y,yt=tt,gt;je(y,!1),tt?(tt.el=at.el,$(y,tt,K)):tt=at,Q&&Si(Q),(gt=tt.props&&tt.props.onVnodeBeforeUpdate)&&Ht(gt,rt,tt,at),je(y,!0);const At=qr(y),te=y.subTree;y.subTree=At,b(te,At,f(te.el),Zt(te),y,F,j),tt.el=At.el,yt===null&&Bs(y,At.el),et&&Lt(et,F),(gt=tt.props&&tt.props.onVnodeUpdated)&&Lt(()=>Ht(gt,rt,tt,at),F)}else{let tt;const{el:Q,props:et}=w,{bm:rt,m:at,parent:yt}=y,gt=ti(w);if(je(y,!1),rt&&Si(rt),!gt&&(tt=et&&et.onVnodeBeforeMount)&&Ht(tt,yt,w),je(y,!0),Q&&di){const At=()=>{y.subTree=qr(y),di(Q,y.subTree,y,F,null)};gt?w.type.__asyncLoader().then(()=>!y.isUnmounted&&At()):At()}else{const At=y.subTree=qr(y);b(null,At,O,N,y,F,j),w.el=At.el}if(at&&Lt(at,F),!gt&&(tt=et&&et.onVnodeMounted)){const At=w;Lt(()=>Ht(tt,yt,At),F)}(w.shapeFlag&256||yt&&ti(yt.vnode)&&yt.vnode.shapeFlag&256)&&y.a&&Lt(y.a,F),y.isMounted=!0,w=O=N=null}},Y=y.effect=new Sr(z,()=>_n(B),y.scope),B=y.update=()=>Y.run();B.id=y.uid,je(y,!0),B()},$=(y,w,O)=>{w.component=y;const N=y.vnode.props;y.vnode=w,y.next=null,Af(y,w.props,N,O),Rf(y,w.children,O),Li(),ba(),Ii()},Z=(y,w,O,N,F,j,K,z,Y=!1)=>{const B=y&&y.children,tt=y?y.shapeFlag:0,Q=w.children,{patchFlag:et,shapeFlag:rt}=w;if(et>0){if(et&128){q(B,Q,O,N,F,j,K,z,Y);return}else if(et&256){st(B,Q,O,N,F,j,K,z,Y);return}}rt&8?(tt&16&&xt(B,F,j),Q!==B&&c(O,Q)):tt&16?rt&16?q(B,Q,O,N,F,j,K,z,Y):xt(B,F,j,!0):(tt&8&&c(O,""),rt&16&&x(Q,O,N,F,j,K,z,Y))},st=(y,w,O,N,F,j,K,z,Y)=>{y=y||bi,w=w||bi;const B=y.length,tt=w.length,Q=Math.min(B,tt);let et;for(et=0;et<Q;et++){const rt=w[et]=Y?Re(w[et]):Yt(w[et]);b(y[et],rt,O,null,F,j,K,z,Y)}B>tt?xt(y,F,j,!0,!1,Q):x(w,O,N,F,j,K,z,Y,Q)},q=(y,w,O,N,F,j,K,z,Y)=>{let B=0;const tt=w.length;let Q=y.length-1,et=tt-1;for(;B<=Q&&B<=et;){const rt=y[B],at=w[B]=Y?Re(w[B]):Yt(w[B]);if(ce(rt,at))b(rt,at,O,null,F,j,K,z,Y);else break;B++}for(;B<=Q&&B<=et;){const rt=y[Q],at=w[et]=Y?Re(w[et]):Yt(w[et]);if(ce(rt,at))b(rt,at,O,null,F,j,K,z,Y);else break;Q--,et--}if(B>Q){if(B<=et){const rt=et+1,at=rt<tt?w[rt].el:N;for(;B<=et;)b(null,w[B]=Y?Re(w[B]):Yt(w[B]),O,at,F,j,K,z,Y),B++}}else if(B>et)for(;B<=Q;)ot(y[B],F,j,!0),B++;else{const rt=B,at=B,yt=new Map;for(B=at;B<=et;B++){const zt=w[B]=Y?Re(w[B]):Yt(w[B]);zt.key!=null&&yt.set(zt.key,B)}let gt,At=0;const te=et-at+1;let gi=!1,la=0;const Gi=new Array(te);for(B=0;B<te;B++)Gi[B]=0;for(B=rt;B<=Q;B++){const zt=y[B];if(At>=te){ot(zt,F,j,!0);continue}let ae;if(zt.key!=null)ae=yt.get(zt.key);else for(gt=at;gt<=et;gt++)if(Gi[gt-at]===0&&ce(zt,w[gt])){ae=gt;break}ae===void 0?ot(zt,F,j,!0):(Gi[ae-at]=B+1,ae>=la?la=ae:gi=!0,b(zt,w[ae],O,null,F,j,K,z,Y),At++)}const ha=gi?Df(Gi):bi;for(gt=ha.length-1,B=te-1;B>=0;B--){const zt=at+B,ae=w[zt],ca=zt+1<tt?w[zt+1].el:N;Gi[B]===0?b(null,ae,O,ca,F,j,K,z,Y):gi&&(gt<0||B!==ha[gt]?nt(ae,O,ca,2):gt--)}}},nt=(y,w,O,N,F=null)=>{const{el:j,type:K,transition:z,children:Y,shapeFlag:B}=y;if(B&6){nt(y.component.subTree,w,O,N);return}if(B&128){y.suspense.move(w,O,N);return}if(B&64){K.move(y,w,O,se);return}if(K===Pt){r(j,w,O);for(let Q=0;Q<Y.length;Q++)nt(Y[Q],w,O,N);r(y.anchor,w,O);return}if(K===ei){v(y,w,O);return}if(N!==2&&B&1&&z)if(N===0)z.beforeEnter(j),r(j,w,O),Lt(()=>z.enter(j),F);else{const{leave:Q,delayLeave:et,afterLeave:rt}=z,at=()=>r(j,w,O),yt=()=>{Q(j,()=>{at(),rt&&rt()})};et?et(j,at,yt):yt()}else r(j,w,O)},ot=(y,w,O,N=!1,F=!1)=>{const{type:j,props:K,ref:z,children:Y,dynamicChildren:B,shapeFlag:tt,patchFlag:Q,dirs:et}=y;if(z!=null&&an(z,null,O,y,!0),tt&256){w.ctx.deactivate(y);return}const rt=tt&1&&et,at=!ti(y);let yt;if(at&&(yt=K&&K.onVnodeBeforeUnmount)&&Ht(yt,w,y),tt&6)wt(y.component,O,N);else{if(tt&128){y.suspense.unmount(O,N);return}rt&&oe(y,null,w,"beforeUnmount"),tt&64?y.type.remove(y,w,O,F,se,N):B&&(j!==Pt||Q>0&&Q&64)?xt(B,w,O,!1,!0):(j===Pt&&Q&384||!F&&tt&16)&&xt(Y,w,O),N&&dt(y)}(at&&(yt=K&&K.onVnodeUnmounted)||rt)&&Lt(()=>{yt&&Ht(yt,w,y),rt&&oe(y,null,w,"unmounted")},O)},dt=y=>{const{type:w,el:O,anchor:N,transition:F}=y;if(w===Pt){Dt(O,N);return}if(w===ei){S(y);return}const j=()=>{n(O),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(y.shapeFlag&1&&F&&!F.persisted){const{leave:K,delayLeave:z}=F,Y=()=>K(O,j);z?z(y.el,j,Y):Y()}else j()},Dt=(y,w)=>{let O;for(;y!==w;)O=u(y),n(y),y=O;n(w)},wt=(y,w,O)=>{const{bum:N,scope:F,update:j,subTree:K,um:z}=y;N&&Si(N),F.stop(),j&&(j.active=!1,ot(K,y,w,O)),z&&Lt(z,w),Lt(()=>{y.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},xt=(y,w,O,N=!1,F=!1,j=0)=>{for(let K=j;K<y.length;K++)ot(y[K],w,O,N,F)},Zt=y=>y.shapeFlag&6?Zt(y.component.subTree):y.shapeFlag&128?y.suspense.next():u(y.anchor||y.el),Rt=(y,w,O)=>{y==null?w._vnode&&ot(w._vnode,null,null,!0):b(w._vnode||null,y,w,null,null,null,O),ba(),rn(),w._vnode=y},se={p:b,um:ot,m:nt,r:dt,mt:k,mc:x,pc:Z,pbc:R,n:Zt,o:e};let Ni,di;return t&&([Ni,di]=t(se)),{render:Rt,hydrate:Ni,createApp:Lf(Rt,Ni)}}function je({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function $s(e,t,i=!1){const r=e.children,n=t.children;if(J(r)&&J(n))for(let s=0;s<r.length;s++){const a=r[s];let o=n[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[s]=Re(n[s]),o.el=a.el),i||$s(a,o)),o.type===ni&&(o.el=a.el)}}function Df(e){const t=e.slice(),i=[0];let r,n,s,a,o;const l=e.length;for(r=0;r<l;r++){const h=e[r];if(h!==0){if(n=i[i.length-1],e[n]<h){t[r]=n,i.push(r);continue}for(s=0,a=i.length-1;s<a;)o=s+a>>1,e[i[o]]<h?s=o+1:a=o;h<e[i[s]]&&(s>0&&(t[r]=i[s-1]),i[s]=r)}}for(s=i.length,a=i[s-1];s-- >0;)i[s]=a,a=t[a];return i}const Ff=e=>e.__isTeleport,er=e=>e&&(e.disabled||e.disabled===""),Ra=e=>typeof SVGElement<"u"&&e instanceof SVGElement,ss=(e,t)=>{const i=e&&e.to;return bt(i)?t?t(i):null:i},Nf={__isTeleport:!0,process(e,t,i,r,n,s,a,o,l,h){const{mc:c,pc:f,pbc:u,o:{insert:g,querySelector:d,createText:b,createComment:C}}=h,_=er(t.props);let{shapeFlag:p,children:v,dynamicChildren:S}=t;if(e==null){const P=t.el=b(""),T=t.anchor=b("");g(P,i,r),g(T,i,r);const A=t.target=ss(t.props,d),x=t.targetAnchor=b("");A&&(g(x,A),a=a||Ra(A));const L=(R,I)=>{p&16&&c(v,R,I,n,s,a,o,l)};_?L(i,T):A&&L(A,x)}else{t.el=e.el;const P=t.anchor=e.anchor,T=t.target=e.target,A=t.targetAnchor=e.targetAnchor,x=er(e.props),L=x?i:T,R=x?P:A;if(a=a||Ra(T),S?(u(e.dynamicChildren,S,L,n,s,a,o),$s(e,t,!0)):l||f(e,t,L,R,n,s,a,o,!1),_)x||Fr(t,i,P,h,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const I=t.target=ss(t.props,d);I&&Fr(t,I,null,h,0)}else x&&Fr(t,T,A,h,1)}_l(t)},remove(e,t,i,r,{um:n,o:{remove:s}},a){const{shapeFlag:o,children:l,anchor:h,targetAnchor:c,target:f,props:u}=e;if(f&&s(c),(a||!er(u))&&(s(h),o&16))for(let g=0;g<l.length;g++){const d=l[g];n(d,t,i,!0,!!d.dynamicChildren)}},move:Fr,hydrate:Gf};function Fr(e,t,i,{o:{insert:r},m:n},s=2){s===0&&r(e.targetAnchor,t,i);const{el:a,anchor:o,shapeFlag:l,children:h,props:c}=e,f=s===2;if(f&&r(a,t,i),(!f||er(c))&&l&16)for(let u=0;u<h.length;u++)n(h[u],t,i,2);f&&r(o,t,i)}function Gf(e,t,i,r,n,s,{o:{nextSibling:a,parentNode:o,querySelector:l}},h){const c=t.target=ss(t.props,l);if(c){const f=c._lpa||c.firstChild;if(t.shapeFlag&16)if(er(t.props))t.anchor=h(a(e),t,o(e),i,r,n,s),t.targetAnchor=f;else{t.anchor=a(e);let u=f;for(;u;)if(u=a(u),u&&u.nodeType===8&&u.data==="teleport anchor"){t.targetAnchor=u,c._lpa=t.targetAnchor&&a(t.targetAnchor);break}h(f,t,c,i,r,n,s)}_l(t)}return t.anchor&&a(t.anchor)}const Bf=Nf;function _l(e){const t=e.ctx;if(t&&t.ut){let i=e.children[0].el;for(;i!==e.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}const Pt=Symbol(void 0),ni=Symbol(void 0),Nt=Symbol(void 0),ei=Symbol(void 0),ir=[];let Ut=null;function Bt(e=!1){ir.push(Ut=e?null:[])}function yl(){ir.pop(),Ut=ir[ir.length-1]||null}let si=1;function as(e){si+=e}function bl(e){return e.dynamicChildren=si>0?Ut||bi:null,yl(),si>0&&Ut&&Ut.push(e),e}function ue(e,t,i,r,n,s){return bl(qs(e,t,i,r,n,s,!0))}function pr(e,t,i,r,n){return bl(ft(e,t,i,r,n,!0))}function Ne(e){return e?e.__v_isVNode===!0:!1}function ce(e,t){return e.type===t.type&&e.key===t.key}function Hf(e){}const Tn="__vInternal",Cl=({key:e})=>e!=null?e:null,Jr=({ref:e,ref_key:t,ref_for:i})=>e!=null?bt(e)||Ot(e)||it(e)?{i:It,r:e,k:t,f:!!i}:e:null;function qs(e,t=null,i=null,r=0,n=null,s=e===Pt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Cl(t),ref:t&&Jr(t),scopeId:bn,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:It};return o?(Qs(l,i),s&128&&e.normalize(l)):i&&(l.shapeFlag|=bt(i)?8:16),si>0&&!a&&Ut&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Ut.push(l),l}const ft=Uf;function Uf(e,t=null,i=null,r=0,n=null,s=!1){if((!e||e===al)&&(e=Nt),Ne(e)){const o=de(e,t,!0);return i&&Qs(o,i),si>0&&!s&&Ut&&(o.shapeFlag&6?Ut[Ut.indexOf(e)]=o:Ut.push(o)),o.patchFlag|=-2,o}if($f(e)&&(e=e.__vccOpts),t){t=Sl(t);let{class:o,style:l}=t;o&&!bt(o)&&(t.class=_r(o)),mt(l)&&(Rs(l)&&!J(l)&&(l=Et({},l)),t.style=mr(l))}const a=bt(e)?1:Xo(e)?128:Ff(e)?64:mt(e)?4:it(e)?2:0;return qs(e,t,i,r,n,a,s,!0)}function Sl(e){return e?Rs(e)||Tn in e?Et({},e):e:null}function de(e,t,i=!1){const{props:r,ref:n,patchFlag:s,children:a}=e,o=t?xl(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&Cl(o),ref:t&&t.ref?i&&n?J(n)?n.concat(Jr(t)):[n,Jr(t)]:Jr(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Pt?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&de(e.ssContent),ssFallback:e.ssFallback&&de(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx}}function Js(e=" ",t=0){return ft(ni,null,e,t)}function Wf(e,t){const i=ft(ei,null,e);return i.staticCount=t,i}function wl(e="",t=!1){return t?(Bt(),pr(Nt,null,e)):ft(Nt,null,e)}function Yt(e){return e==null||typeof e=="boolean"?ft(Nt):J(e)?ft(Pt,null,e.slice()):typeof e=="object"?Re(e):ft(ni,null,String(e))}function Re(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:de(e)}function Qs(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(J(t))i=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),Qs(e,n()),n._c&&(n._d=!0));return}else{i=32;const n=t._;!n&&!(Tn in t)?t._ctx=It:n===3&&It&&(It.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else it(t)?(t={default:t,_ctx:It},i=32):(t=String(t),r&64?(i=16,t=[Js(t)]):i=8);e.children=t,e.shapeFlag|=i}function xl(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=_r([t.class,r.class]));else if(n==="style")t.style=mr([t.style,r.style]);else if(yr(n)){const s=t[n],a=r[n];a&&s!==a&&!(J(s)&&s.includes(a))&&(t[n]=s?[].concat(s,a):a)}else n!==""&&(t[n]=r[n])}return t}function Ht(e,t,i,r=null){Kt(e,t,7,[i,r])}const zf=gl();let jf=0;function El(e,t,i){const r=e.type,n=(t?t.appContext:e.appContext)||zf,s={uid:jf++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ps(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cl(r,n),emitsOptions:Yo(r,n),emit:null,emitted:null,propsDefaults:vt,inheritAttrs:r.inheritAttrs,ctx:vt,data:vt,props:vt,attrs:vt,slots:vt,refs:vt,setupState:vt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Yc.bind(null,s),e.ce&&e.ce(s),s}let kt=null;const He=()=>kt||It,Ge=e=>{kt=e,e.scope.on()},Ie=()=>{kt&&kt.scope.off(),kt=null};function Tl(e){return e.vnode.shapeFlag&4}let Mi=!1;function Pl(e,t=!1){Mi=t;const{props:i,children:r}=e.vnode,n=Tl(e);Pf(e,i,n,t),Mf(e,r);const s=n?Yf(e,t):void 0;return Mi=!1,s}function Yf(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=Os(new Proxy(e.ctx,es));const{setup:r}=i;if(r){const n=e.setupContext=r.length>1?kl(e):null;Ge(e),Li();const s=ye(r,e,0,[e.props,n]);if(Ii(),Ie(),Es(s)){if(s.then(Ie,Ie),t)return s.then(a=>{os(e,a,t)}).catch(a=>{oi(a,e,0)});e.asyncDep=s}else os(e,s,t)}else Al(e,t)}function os(e,t,i){it(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:mt(t)&&(e.setupState=Ds(t)),Al(e,i)}let on,ls;function Xf(e){on=e,ls=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,Cf))}}const Kf=()=>!on;function Al(e,t,i){const r=e.type;if(!e.render){if(!t&&on&&!r.render){const n=r.template||Ks(e).template;if(n){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=r,h=Et(Et({isCustomElement:s,delimiters:o},a),l);r.render=on(n,h)}}e.render=r.render||ie,ls&&ls(e)}Ge(e),Li(),Sf(e),Ii(),Ie()}function Vf(e){return new Proxy(e.attrs,{get(t,i){return $t(e,"get","$attrs"),t[i]}})}function kl(e){const t=r=>{e.exposed=r||{}};let i;return{get attrs(){return i||(i=Vf(e))},slots:e.slots,emit:e.emit,expose:t}}function Pn(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ds(Os(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in tr)return tr[i](e)},has(t,i){return i in t||i in tr}}))}function hs(e,t=!0){return it(e)?e.displayName||e.name:e.name||t&&e.__name}function $f(e){return it(e)&&"__vccOpts"in e}const Zs=(e,t)=>Ke(e,t,Mi);function qf(){return null}function Jf(){return null}function Qf(e){}function Zf(e,t){return null}function tu(){return Ml().slots}function eu(){return Ml().attrs}function Ml(){const e=He();return e.setupContext||(e.setupContext=kl(e))}function iu(e,t){const i=J(e)?e.reduce((r,n)=>(r[n]={},r),{}):e;for(const r in t){const n=i[r];n?J(n)||it(n)?i[r]={type:n,default:t[r]}:n.default=t[r]:n===null&&(i[r]={default:t[r]})}return i}function ru(e,t){const i={};for(const r in e)t.includes(r)||Object.defineProperty(i,r,{enumerable:!0,get:()=>e[r]});return i}function nu(e){const t=He();let i=e();return Ie(),Es(i)&&(i=i.catch(r=>{throw Ge(t),r})),[i,()=>Ge(t)]}function Rl(e,t,i){const r=arguments.length;return r===2?mt(t)&&!J(t)?Ne(t)?ft(e,null,[t]):ft(e,t):ft(e,null,t):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&Ne(i)&&(i=[i]),ft(e,t,i))}const Ol=Symbol(""),Ll=()=>Ei(Ol);function su(){}function au(e,t,i,r){const n=i[r];if(n&&Il(n,e))return n;const s=t();return s.memo=e.slice(),i[r]=s}function Il(e,t){const i=e.memo;if(i.length!=t.length)return!1;for(let r=0;r<i.length;r++)if(Ai(i[r],t[r]))return!1;return si>0&&Ut&&Ut.push(e),!0}const Dl="3.2.45",ou={createComponentInstance:El,setupComponent:Pl,renderComponentRoot:qr,setCurrentRenderingInstance:ur,isVNode:Ne,normalizeVNode:Yt},lu=ou,hu=null,cu=null,fu="http://www.w3.org/2000/svg",qe=typeof document<"u"?document:null,Oa=qe&&qe.createElement("template"),uu={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const n=t?qe.createElementNS(fu,e):qe.createElement(e,i?{is:i}:void 0);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>qe.createTextNode(e),createComment:e=>qe.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>qe.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,r,n,s){const a=i?i.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),i),!(n===s||!(n=n.nextSibling)););else{Oa.innerHTML=r?`<svg>${e}</svg>`:e;const o=Oa.content;if(r){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,i)}return[a?a.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function du(e,t,i){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function gu(e,t,i){const r=e.style,n=bt(i);if(i&&!n){for(const s in i)cs(r,s,i[s]);if(t&&!bt(t))for(const s in t)i[s]==null&&cs(r,s,"")}else{const s=r.display;n?t!==i&&(r.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const La=/\s*!important$/;function cs(e,t,i){if(J(i))i.forEach(r=>cs(e,t,r));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const r=pu(e,t);La.test(i)?e.setProperty(Jt(r),i.replace(La,""),"important"):e[r]=i}}const Ia=["Webkit","Moz","ms"],Nn={};function pu(e,t){const i=Nn[t];if(i)return i;let r=Wt(t);if(r!=="filter"&&r in e)return Nn[t]=r;r=Cr(r);for(let n=0;n<Ia.length;n++){const s=Ia[n]+r;if(s in e)return Nn[t]=s}return t}const Da="http://www.w3.org/1999/xlink";function vu(e,t,i,r,n){if(r&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(Da,t.slice(6,t.length)):e.setAttributeNS(Da,t,i);else{const s=jh(t);i==null||s&&!yo(i)?e.removeAttribute(t):e.setAttribute(t,s?"":i)}}function mu(e,t,i,r,n,s,a){if(t==="innerHTML"||t==="textContent"){r&&a(r,n,s),e[t]=i==null?"":i;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=i;const l=i==null?"":i;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),i==null&&e.removeAttribute(t);return}let o=!1;if(i===""||i==null){const l=typeof e[t];l==="boolean"?i=yo(i):i==null&&l==="string"?(i="",o=!0):l==="number"&&(i=0,o=!0)}try{e[t]=i}catch{}o&&e.removeAttribute(t)}function _e(e,t,i,r){e.addEventListener(t,i,r)}function _u(e,t,i,r){e.removeEventListener(t,i,r)}function yu(e,t,i,r,n=null){const s=e._vei||(e._vei={}),a=s[t];if(r&&a)a.value=r;else{const[o,l]=bu(t);if(r){const h=s[t]=wu(r,n);_e(e,o,h,l)}else a&&(_u(e,o,a,l),s[t]=void 0)}}const Fa=/(?:Once|Passive|Capture)$/;function bu(e){let t;if(Fa.test(e)){t={};let r;for(;r=e.match(Fa);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Jt(e.slice(2)),t]}let Gn=0;const Cu=Promise.resolve(),Su=()=>Gn||(Cu.then(()=>Gn=0),Gn=Date.now());function wu(e,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;Kt(xu(r,i.value),t,5,[r])};return i.value=e,i.attached=Su(),i}function xu(e,t){if(J(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const Na=/^on[a-z]/,Eu=(e,t,i,r,n=!1,s,a,o,l)=>{t==="class"?du(e,r,n):t==="style"?gu(e,i,r):yr(t)?ws(t)||yu(e,t,i,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Tu(e,t,r,n))?mu(e,t,r,s,a,o,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),vu(e,t,r,n))};function Tu(e,t,i,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&Na.test(t)&&it(i)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Na.test(t)&&bt(i)?!1:t in e}function Fl(e,t){const i=js(e);class r extends An{constructor(s){super(i,s,t)}}return r.def=i,r}const Pu=e=>Fl(e,Jl),Au=typeof HTMLElement<"u"?HTMLElement:class{};class An extends Au{constructor(t,i={},r){super(),this._def=t,this._props=i,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,Ns(()=>{this._connected||(ds(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const n of r)this._setAttr(n.attributeName)}).observe(this,{attributes:!0});const t=(r,n=!1)=>{const{props:s,styles:a}=r;let o;if(s&&!J(s))for(const l in s){const h=s[l];(h===Number||h&&h.type===Number)&&(l in this._props&&(this._props[l]=be(this._props[l])),(o||(o=Object.create(null)))[Wt(l)]=!0)}this._numberProps=o,n&&this._resolveProps(r),this._applyStyles(a),this._update()},i=this._def.__asyncLoader;i?i().then(r=>t(r,!0)):t(this._def)}_resolveProps(t){const{props:i}=t,r=J(i)?i:Object.keys(i||{});for(const n of Object.keys(this))n[0]!=="_"&&r.includes(n)&&this._setProp(n,this[n],!0,!1);for(const n of r.map(Wt))Object.defineProperty(this,n,{get(){return this._getProp(n)},set(s){this._setProp(n,s)}})}_setAttr(t){let i=this.getAttribute(t);const r=Wt(t);this._numberProps&&this._numberProps[r]&&(i=be(i)),this._setProp(r,i,!1)}_getProp(t){return this._props[t]}_setProp(t,i,r=!0,n=!0){i!==this._props[t]&&(this._props[t]=i,n&&this._instance&&this._update(),r&&(i===!0?this.setAttribute(Jt(t),""):typeof i=="string"||typeof i=="number"?this.setAttribute(Jt(t),i+""):i||this.removeAttribute(Jt(t))))}_update(){ds(this._createVNode(),this.shadowRoot)}_createVNode(){const t=ft(this._def,Et({},this._props));return this._instance||(t.ce=i=>{this._instance=i,i.isCE=!0;const r=(s,a)=>{this.dispatchEvent(new CustomEvent(s,{detail:a}))};i.emit=(s,...a)=>{r(s,a),Jt(s)!==s&&r(Jt(s),a)};let n=this;for(;n=n&&(n.parentNode||n.host);)if(n instanceof An){i.parent=n._instance,i.provides=n._instance.provides;break}}),t}_applyStyles(t){t&&t.forEach(i=>{const r=document.createElement("style");r.textContent=i,this.shadowRoot.appendChild(r)})}}function ku(e="$style"){{const t=He();if(!t)return vt;const i=t.type.__cssModules;if(!i)return vt;const r=i[e];return r||vt}}function Mu(e){const t=He();if(!t)return;const i=t.ut=(n=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(s=>us(s,n))},r=()=>{const n=e(t.proxy);fs(t.subTree,n),i(n)};Vo(r),Er(()=>{const n=new MutationObserver(r);n.observe(t.subTree.el.parentNode,{childList:!0}),En(()=>n.disconnect())})}function fs(e,t){if(e.shapeFlag&128){const i=e.suspense;e=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{fs(i.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)us(e.el,t);else if(e.type===Pt)e.children.forEach(i=>fs(i,t));else if(e.type===ei){let{el:i,anchor:r}=e;for(;i&&(us(i,t),i!==r);)i=i.nextSibling}}function us(e,t){if(e.nodeType===1){const i=e.style;for(const r in t)i.setProperty(`--${r}`,t[r])}}const Ae="transition",Bi="animation",ta=(e,{slots:t})=>Rl(zs,Gl(e),t);ta.displayName="Transition";const Nl={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ru=ta.props=Et({},zs.props,Nl),Ye=(e,t=[])=>{J(e)?e.forEach(i=>i(...t)):e&&e(...t)},Ga=e=>e?J(e)?e.some(t=>t.length>1):e.length>1:!1;function Gl(e){const t={};for(const D in e)D in Nl||(t[D]=e[D]);if(e.css===!1)return t;const{name:i="v",type:r,duration:n,enterFromClass:s=`${i}-enter-from`,enterActiveClass:a=`${i}-enter-active`,enterToClass:o=`${i}-enter-to`,appearFromClass:l=s,appearActiveClass:h=a,appearToClass:c=o,leaveFromClass:f=`${i}-leave-from`,leaveActiveClass:u=`${i}-leave-active`,leaveToClass:g=`${i}-leave-to`}=e,d=Ou(n),b=d&&d[0],C=d&&d[1],{onBeforeEnter:_,onEnter:p,onEnterCancelled:v,onLeave:S,onLeaveCancelled:P,onBeforeAppear:T=_,onAppear:A=p,onAppearCancelled:x=v}=t,L=(D,M,k)=>{ke(D,M?c:o),ke(D,M?h:a),k&&k()},R=(D,M)=>{D._isLeaving=!1,ke(D,f),ke(D,g),ke(D,u),M&&M()},I=D=>(M,k)=>{const X=D?A:p,W=()=>L(M,D,k);Ye(X,[M,W]),Ba(()=>{ke(M,D?l:s),pe(M,D?c:o),Ga(X)||Ha(M,r,b,W)})};return Et(t,{onBeforeEnter(D){Ye(_,[D]),pe(D,s),pe(D,a)},onBeforeAppear(D){Ye(T,[D]),pe(D,l),pe(D,h)},onEnter:I(!1),onAppear:I(!0),onLeave(D,M){D._isLeaving=!0;const k=()=>R(D,M);pe(D,f),Hl(),pe(D,u),Ba(()=>{!D._isLeaving||(ke(D,f),pe(D,g),Ga(S)||Ha(D,r,C,k))}),Ye(S,[D,k])},onEnterCancelled(D){L(D,!1),Ye(v,[D])},onAppearCancelled(D){L(D,!0),Ye(x,[D])},onLeaveCancelled(D){R(D),Ye(P,[D])}})}function Ou(e){if(e==null)return null;if(mt(e))return[Bn(e.enter),Bn(e.leave)];{const t=Bn(e);return[t,t]}}function Bn(e){return be(e)}function pe(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e._vtc||(e._vtc=new Set)).add(t)}function ke(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const{_vtc:i}=e;i&&(i.delete(t),i.size||(e._vtc=void 0))}function Ba(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Lu=0;function Ha(e,t,i,r){const n=e._endId=++Lu,s=()=>{n===e._endId&&r()};if(i)return setTimeout(s,i);const{type:a,timeout:o,propCount:l}=Bl(e,t);if(!a)return r();const h=a+"end";let c=0;const f=()=>{e.removeEventListener(h,u),s()},u=g=>{g.target===e&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},o+1),e.addEventListener(h,u)}function Bl(e,t){const i=window.getComputedStyle(e),r=d=>(i[d]||"").split(", "),n=r(`${Ae}Delay`),s=r(`${Ae}Duration`),a=Ua(n,s),o=r(`${Bi}Delay`),l=r(`${Bi}Duration`),h=Ua(o,l);let c=null,f=0,u=0;t===Ae?a>0&&(c=Ae,f=a,u=s.length):t===Bi?h>0&&(c=Bi,f=h,u=l.length):(f=Math.max(a,h),c=f>0?a>h?Ae:Bi:null,u=c?c===Ae?s.length:l.length:0);const g=c===Ae&&/\b(transform|all)(,|$)/.test(r(`${Ae}Property`).toString());return{type:c,timeout:f,propCount:u,hasTransform:g}}function Ua(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,r)=>Wa(i)+Wa(e[r])))}function Wa(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Hl(){return document.body.offsetHeight}const Ul=new WeakMap,Wl=new WeakMap,Iu={name:"TransitionGroup",props:Et({},Ru,{tag:String,moveClass:String}),setup(e,{slots:t}){const i=He(),r=Ws();let n,s;return wn(()=>{if(!n.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!Bu(n[0].el,i.vnode.el,a))return;n.forEach(Fu),n.forEach(Nu);const o=n.filter(Gu);Hl(),o.forEach(l=>{const h=l.el,c=h.style;pe(h,a),c.transform=c.webkitTransform=c.transitionDuration="";const f=h._moveCb=u=>{u&&u.target!==h||(!u||/transform$/.test(u.propertyName))&&(h.removeEventListener("transitionend",f),h._moveCb=null,ke(h,a))};h.addEventListener("transitionend",f)})}),()=>{const a=ht(e),o=Gl(a);let l=a.tag||Pt;n=s,s=t.default?Cn(t.default()):[];for(let h=0;h<s.length;h++){const c=s[h];c.key!=null&&ri(c,ki(c,o,r,i))}if(n)for(let h=0;h<n.length;h++){const c=n[h];ri(c,ki(c,o,r,i)),Ul.set(c,c.el.getBoundingClientRect())}return ft(l,null,s)}}},Du=Iu;function Fu(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function Nu(e){Wl.set(e,e.el.getBoundingClientRect())}function Gu(e){const t=Ul.get(e),i=Wl.get(e),r=t.left-i.left,n=t.top-i.top;if(r||n){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${n}px)`,s.transitionDuration="0s",e}}function Bu(e,t,i){const r=e.cloneNode();e._vtc&&e._vtc.forEach(a=>{a.split(/\s+/).forEach(o=>o&&r.classList.remove(o))}),i.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const n=t.nodeType===1?t:t.parentNode;n.appendChild(r);const{hasTransform:s}=Bl(r);return n.removeChild(r),s}const Be=e=>{const t=e.props["onUpdate:modelValue"]||!1;return J(t)?i=>Si(t,i):t};function Hu(e){e.target.composing=!0}function za(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ln={created(e,{modifiers:{lazy:t,trim:i,number:r}},n){e._assign=Be(n);const s=r||n.props&&n.props.type==="number";_e(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;i&&(o=o.trim()),s&&(o=be(o)),e._assign(o)}),i&&_e(e,"change",()=>{e.value=e.value.trim()}),t||(_e(e,"compositionstart",Hu),_e(e,"compositionend",za),_e(e,"change",za))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:i,trim:r,number:n}},s){if(e._assign=Be(s),e.composing||document.activeElement===e&&e.type!=="range"&&(i||r&&e.value.trim()===t||(n||e.type==="number")&&be(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},ea={deep:!0,created(e,t,i){e._assign=Be(i),_e(e,"change",()=>{const r=e._modelValue,n=Ri(e),s=e.checked,a=e._assign;if(J(r)){const o=fn(r,n),l=o!==-1;if(s&&!l)a(r.concat(n));else if(!s&&l){const h=[...r];h.splice(o,1),a(h)}}else if(ai(r)){const o=new Set(r);s?o.add(n):o.delete(n),a(o)}else a(jl(e,s))})},mounted:ja,beforeUpdate(e,t,i){e._assign=Be(i),ja(e,t,i)}};function ja(e,{value:t,oldValue:i},r){e._modelValue=t,J(t)?e.checked=fn(t,r.props.value)>-1:ai(t)?e.checked=t.has(r.props.value):t!==i&&(e.checked=De(t,jl(e,!0)))}const ia={created(e,{value:t},i){e.checked=De(t,i.props.value),e._assign=Be(i),_e(e,"change",()=>{e._assign(Ri(e))})},beforeUpdate(e,{value:t,oldValue:i},r){e._assign=Be(r),t!==i&&(e.checked=De(t,r.props.value))}},zl={deep:!0,created(e,{value:t,modifiers:{number:i}},r){const n=ai(t);_e(e,"change",()=>{const s=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>i?be(Ri(a)):Ri(a));e._assign(e.multiple?n?new Set(s):s:s[0])}),e._assign=Be(r)},mounted(e,{value:t}){Ya(e,t)},beforeUpdate(e,t,i){e._assign=Be(i)},updated(e,{value:t}){Ya(e,t)}};function Ya(e,t){const i=e.multiple;if(!(i&&!J(t)&&!ai(t))){for(let r=0,n=e.options.length;r<n;r++){const s=e.options[r],a=Ri(s);if(i)J(t)?s.selected=fn(t,a)>-1:s.selected=t.has(a);else if(De(Ri(s),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ri(e){return"_value"in e?e._value:e.value}function jl(e,t){const i=t?"_trueValue":"_falseValue";return i in e?e[i]:t}const Yl={created(e,t,i){Nr(e,t,i,null,"created")},mounted(e,t,i){Nr(e,t,i,null,"mounted")},beforeUpdate(e,t,i,r){Nr(e,t,i,r,"beforeUpdate")},updated(e,t,i,r){Nr(e,t,i,r,"updated")}};function Xl(e,t){switch(e){case"SELECT":return zl;case"TEXTAREA":return ln;default:switch(t){case"checkbox":return ea;case"radio":return ia;default:return ln}}}function Nr(e,t,i,r,n){const a=Xl(e.tagName,i.props&&i.props.type)[n];a&&a(e,t,i,r)}function Uu(){ln.getSSRProps=({value:e})=>({value:e}),ia.getSSRProps=({value:e},t)=>{if(t.props&&De(t.props.value,e))return{checked:!0}},ea.getSSRProps=({value:e},t)=>{if(J(e)){if(t.props&&fn(e,t.props.value)>-1)return{checked:!0}}else if(ai(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},Yl.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const i=Xl(t.type.toUpperCase(),t.props&&t.props.type);if(i.getSSRProps)return i.getSSRProps(e,t)}}const Wu=["ctrl","shift","alt","meta"],zu={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Wu.some(i=>e[`${i}Key`]&&!t.includes(i))},ju=(e,t)=>(i,...r)=>{for(let n=0;n<t.length;n++){const s=zu[t[n]];if(s&&s(i,t))return}return e(i,...r)},Yu={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Xu=(e,t)=>i=>{if(!("key"in i))return;const r=Jt(i.key);if(t.some(n=>n===r||Yu[n]===r))return e(i)},Kl={beforeMount(e,{value:t},{transition:i}){e._vod=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):Hi(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:r}){!t!=!i&&(r?t?(r.beforeEnter(e),Hi(e,!0),r.enter(e)):r.leave(e,()=>{Hi(e,!1)}):Hi(e,t))},beforeUnmount(e,{value:t}){Hi(e,t)}};function Hi(e,t){e.style.display=t?e._vod:"none"}function Ku(){Kl.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const Vl=Et({patchProp:Eu},uu);let rr,Xa=!1;function $l(){return rr||(rr=pl(Vl))}function ql(){return rr=Xa?rr:vl(Vl),Xa=!0,rr}const ds=(...e)=>{$l().render(...e)},Jl=(...e)=>{ql().hydrate(...e)},Ql=(...e)=>{const t=$l().createApp(...e),{mount:i}=t;return t.mount=r=>{const n=Zl(r);if(!n)return;const s=t._component;!it(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const a=i(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},t},Vu=(...e)=>{const t=ql().createApp(...e),{mount:i}=t;return t.mount=r=>{const n=Zl(r);if(n)return i(n,!0,n instanceof SVGElement)},t};function Zl(e){return bt(e)?document.querySelector(e):e}let Ka=!1;const $u=()=>{Ka||(Ka=!0,Uu(),Ku())},qu=()=>{},Ju=Object.freeze(Object.defineProperty({__proto__:null,compile:qu,EffectScope:Ps,ReactiveEffect:Sr,customRef:Fc,effect:nc,effectScope:Zh,getCurrentScope:tc,isProxy:Rs,isReactive:Ze,isReadonly:ii,isRef:Ot,isShallow:lr,markRaw:Os,onScopeDispose:ec,proxyRefs:Ds,reactive:le,readonly:Ms,ref:fe,shallowReactive:No,shallowReadonly:Mc,shallowRef:Rc,stop:sc,toRaw:ht,toRef:Bo,toRefs:Nc,triggerRef:Lc,unref:Oe,camelize:Wt,capitalize:Cr,normalizeClass:_r,normalizeProps:Wh,normalizeStyle:mr,toDisplayString:bo,toHandlerKey:Qi,BaseTransition:zs,Comment:Nt,Fragment:Pt,KeepAlive:uf,Static:ei,Suspense:tf,Teleport:Bf,Text:ni,callWithAsyncErrorHandling:Kt,callWithErrorHandling:ye,cloneVNode:de,compatUtils:cu,computed:Zs,createBlock:pr,createCommentVNode:wl,createElementBlock:ue,createElementVNode:qs,createHydrationRenderer:vl,createPropsRestProxy:ru,createRenderer:pl,createSlots:_f,createStaticVNode:Wf,createTextVNode:Js,createVNode:ft,defineAsyncComponent:cf,defineComponent:js,defineEmits:Jf,defineExpose:Qf,defineProps:qf,get devtools(){return mi},getCurrentInstance:He,getTransitionRawChildren:Cn,guardReactiveProps:Sl,h:Rl,handleError:oi,initCustomFormatter:su,inject:Ei,isMemoSame:Il,isRuntimeOnly:Kf,isVNode:Ne,mergeDefaults:iu,mergeProps:xl,nextTick:Ns,onActivated:Jo,onBeforeMount:tl,onBeforeUnmount:xn,onBeforeUpdate:el,onDeactivated:Qo,onErrorCaptured:sl,onMounted:Er,onRenderTracked:nl,onRenderTriggered:rl,onServerPrefetch:il,onUnmounted:En,onUpdated:wn,openBlock:Bt,popScopeId:Kc,provide:Us,pushScopeId:Xc,queuePostFlushCb:Gs,registerRuntimeCompiler:Xf,renderList:nn,renderSlot:yf,resolveComponent:_i,resolveDirective:mf,resolveDynamicComponent:vf,resolveFilter:hu,resolveTransitionHooks:ki,setBlockTracking:as,setDevtoolsHook:jo,setTransitionHooks:ri,ssrContextKey:Ol,ssrUtils:lu,toHandlers:bf,transformVNodeArgs:Hf,useAttrs:eu,useSSRContext:Ll,useSlots:tu,useTransitionState:Ws,version:Dl,warn:Hc,watch:Zi,watchEffect:af,watchPostEffect:Vo,watchSyncEffect:of,withAsyncContext:nu,withCtx:dr,withDefaults:Zf,withDirectives:gf,withMemo:au,withScopeId:Vc,Transition:ta,TransitionGroup:Du,VueElement:An,createApp:Ql,createSSRApp:Vu,defineCustomElement:Fl,defineSSRCustomElement:Pu,hydrate:Jl,initDirectivesForSSR:$u,render:ds,useCssModule:ku,useCssVars:Mu,vModelCheckbox:ea,vModelDynamic:Yl,vModelRadio:ia,vModelSelect:zl,vModelText:ln,vShow:Kl,withKeys:Xu,withModifiers:ju},Symbol.toStringTag,{value:"Module"})),Va="#000",Qu="#faea00",Zu=()=>{const e={fill:"#fff",radius:10,draggable:!0},t=le({...e,x:50,y:50}),i=le({...e,x:150,y:50}),r=le({...e,x:50,y:150}),n=le({...e,x:150,y:150}),s=fe(null),a={stroke:Va,strokeWidth:5},o=le([t,i,n,r]),l=Ke(()=>[{id:"top",circles:[t,i]},{id:"bottom",circles:[r,n]},{id:"left",circles:[t,r]},{id:"right",circles:[i,n]}].map(P=>{const{id:T,circles:A}=P,[x,L]=A,R=T===s.value?Qu:Va;return{...a,stroke:R,id:T,points:[x.x,x.y,L.x,L.y]}})),h=Ke(()=>{const _=o.map(A=>A.x),p=_.map(A=>_.map(x=>Math.abs(A-x))).flat(),v=Math.max(...p),S=o.map(A=>A.y),P=S.map(A=>S.map(x=>Math.abs(A-x))).flat(),T=Math.max(...P);return{width:v,height:T}}),c=Ke(()=>{const _=o.map(P=>P.x),p=o.map(P=>P.y),v=Math.min(..._),S=Math.min(...p);return{x:v,y:S}}),f=Ke(()=>l.value.find(_=>_.id===s.value)),u=Ke(()=>f.value?b(f.value):0),g=Ke(()=>{const _=o.map(v=>v.x);return[...new Set(_)]}),d=(_,p)=>{if(!p)return;const{id:v}=_,{xDiff:S,yDiff:P}=C(_),T=b(_),A=p/T,x=S*A,L=P*A,R=S-x,I=P-L;v==="left"?(r.x+=R,r.y+=I):v==="right"?(n.x+=R,n.y+=I):v==="top"?(i.x+=R,i.y+=I):(n.x+=R,n.y+=I)},b=_=>{const{xDiff:p,yDiff:v}=C(_);return Math.sqrt(p**2+v**2)},C=_=>{const{points:p}=_,v=p.slice(0,2),S=p.slice(2),P=v[0]-S[0],T=v[1]-S[1];return{xDiff:P,yDiff:T}};return{lines:l,circles:o,fullSize:h,position:c,differentXCords:g,selectedLine:f,selectedLineId:s,selectedLineLength:u,updateLineSize:d,getLineLength:b}},td=["value"],ed={__name:"FloorPlanner",setup(e){const t=le({width:600,height:600}),i=fe(0),r=fe(0),n=fe([]),s=fe([]),{circles:a,lines:o,fullSize:l,position:h,selectedLine:c,selectedLineId:f,selectedLineLength:u,updateLineSize:g}=Zu(),d=Zs(()=>{const{width:S,height:P}=l.value,{x:T,y:A}=h.value;return{x:T-10,y:A-10,stroke:"black",strokeWidth:1,width:S+20,height:P+20,draggable:!0}}),b=(S,P)=>{const{target:T}=S,{x:A,y:x}=T.position();P.x=A,P.y=x},C=S=>{const{x:P,y:T}=S.target.position(),A=P-i.value,x=T-r.value;a.forEach((L,R)=>{const I=n.value[R],D=s.value[R];L.x=I+A,L.y=D+x})},_=S=>{const{x:P,y:T}=S.target.position();i.value=P,r.value=T,n.value=a.map(A=>A.x),s.value=a.map(A=>A.y)},p=S=>{f.value=S.id},v=S=>{g(c.value,S.target.valueAsNumber)};return(S,P)=>{const T=_i("v-rect"),A=_i("v-line"),x=_i("v-circle"),L=_i("v-layer"),R=_i("v-stage");return Bt(),ue(Pt,null,[Oe(f)?(Bt(),ue("input",{key:0,type:"number",value:Oe(u),onChange:v},null,40,td)):wl("",!0),ft(R,{ref:"stage",config:t},{default:dr(()=>[ft(L,null,{default:dr(()=>[ft(T,{config:Oe(d),onDragStart:_,onDragMove:C},null,8,["config"]),(Bt(!0),ue(Pt,null,nn(Oe(o),I=>(Bt(),pr(A,{config:I,onClick:D=>p(I)},null,8,["config","onClick"]))),256)),(Bt(!0),ue(Pt,null,nn(Oe(a),I=>(Bt(),pr(x,{config:I,onDragMove:D=>b(D,I)},null,8,["config","onDragMove"]))),256))]),_:1})]),_:1},8,["config"])],64)}}},Gr={RECT:"rect",T_FIGURE:"t_figure",L_FIGURE:"l_figure"};const th=(e,t)=>{const i=e.__vccOpts||e;for(const[r,n]of t)i[r]=n;return i},id={class:"figure-list"},rd=["onClick"],nd={__name:"FloorPlannerFigureList",setup(e){const t=Ei("selectFigure"),i={[Gr.RECT]:"[]",[Gr.L_FIGURE]:"\u0413",[Gr.T_FIGURE]:"\u0422"},r=Object.values(Gr).map(s=>({type:s,icon:i[s]})),n=s=>{t(s)};return(s,a)=>(Bt(),ue("div",id,[(Bt(!0),ue(Pt,null,nn(Oe(r),o=>(Bt(),ue("div",{key:o.type,class:"figure-item",onClick:l=>n(o.type)},bo(o.icon),9,rd))),128))]))}},sd=th(nd,[["__scopeId","data-v-78d75b57"]]),ad={class:"floor-planner-panel"},od={__name:"FloorPlannerPanel",setup(e){return(t,i)=>(Bt(),ue("div",ad,[ft(sd)]))}};const ld={class:"wrapper"},hd={__name:"App",setup(e){const t=fe(null);return Us("selectFigure",r=>{t.value.selectFigure(r)}),(r,n)=>(Bt(),ue("div",ld,[ft(od,{class:"panel"}),ft(ed,{ref_key:"planner",ref:t},null,512)]))}},cd=th(hd,[["__scopeId","data-v-05d3bc5e"]]);var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ud(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function eh(e){var t=e.default;if(typeof t=="function"){var i=function(){return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(i,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),i}var ih={exports:{}};const dd=eh(Ju);var gd=Math.PI/180;function pd(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Ti=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},V={_global:Ti,version:"8.3.14",isBrowser:pd(),isUnminified:/param/.test(function(e){}.toString()),dblClickWindow:400,getAngle(e){return V.angleDeg?e*gd:e},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return V.DD.isDragging},isDragReady(){return!!V.DD.node},releaseCanvasOnDestroy:!0,document:Ti.document,_injectGlobal(e){Ti.Konva=e}},St=e=>{V[e.prototype.getClassName()]=e};V._injectGlobal(V);class Xt{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Xt(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){var i=this.m;return{x:i[0]*t.x+i[2]*t.y+i[4],y:i[1]*t.x+i[3]*t.y+i[5]}}translate(t,i){return this.m[4]+=this.m[0]*t+this.m[2]*i,this.m[5]+=this.m[1]*t+this.m[3]*i,this}scale(t,i){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=i,this.m[3]*=i,this}rotate(t){var i=Math.cos(t),r=Math.sin(t),n=this.m[0]*i+this.m[2]*r,s=this.m[1]*i+this.m[3]*r,a=this.m[0]*-r+this.m[2]*i,o=this.m[1]*-r+this.m[3]*i;return this.m[0]=n,this.m[1]=s,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,i){var r=this.m[0]+this.m[2]*i,n=this.m[1]+this.m[3]*i,s=this.m[2]+this.m[0]*t,a=this.m[3]+this.m[1]*t;return this.m[0]=r,this.m[1]=n,this.m[2]=s,this.m[3]=a,this}multiply(t){var i=this.m[0]*t.m[0]+this.m[2]*t.m[1],r=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],s=this.m[1]*t.m[2]+this.m[3]*t.m[3],a=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=i,this.m[1]=r,this.m[2]=n,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}invert(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*t,r=-this.m[1]*t,n=-this.m[2]*t,s=this.m[0]*t,a=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=r,this.m[2]=n,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}decompose(){var t=this.m[0],i=this.m[1],r=this.m[2],n=this.m[3],s=this.m[4],a=this.m[5],o=t*n-i*r;let l={x:s,y:a,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||i!=0){var h=Math.sqrt(t*t+i*i);l.rotation=i>0?Math.acos(t/h):-Math.acos(t/h),l.scaleX=h,l.scaleY=o/h,l.skewX=(t*r+i*n)/o,l.skewY=0}else if(r!=0||n!=0){var c=Math.sqrt(r*r+n*n);l.rotation=Math.PI/2-(n>0?Math.acos(-r/c):-Math.acos(r/c)),l.scaleX=o/c,l.scaleY=c,l.skewX=0,l.skewY=(t*r+i*n)/o}return l.rotation=E._getRotation(l.rotation),l}}var vd="[object Array]",md="[object Number]",_d="[object String]",yd="[object Boolean]",bd=Math.PI/180,Cd=180/Math.PI,Hn="#",Sd="",wd="0",xd="Konva warning: ",$a="Konva error: ",Ed="rgb(",Un={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Td=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Br=[];const Pd=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(e){setTimeout(e,60)},E={_isElement(e){return!!(e&&e.nodeType==1)},_isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isPlainObject(e){return!!e&&e.constructor===Object},_isArray(e){return Object.prototype.toString.call(e)===vd},_isNumber(e){return Object.prototype.toString.call(e)===md&&!isNaN(e)&&isFinite(e)},_isString(e){return Object.prototype.toString.call(e)===_d},_isBoolean(e){return Object.prototype.toString.call(e)===yd},isObject(e){return e instanceof Object},isValidSelector(e){if(typeof e!="string")return!1;var t=e[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(e){return e===0||e>0?1:-1},requestAnimFrame(e){Br.push(e),Br.length===1&&Pd(function(){const t=Br;Br=[],t.forEach(function(i){i()})})},createCanvasElement(){var e=document.createElement("canvas");try{e.style=e.style||{}}catch{}return e},createImageElement(){return document.createElement("img")},_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){var i=E.createImageElement();i.onload=function(){t(i)},i.src=e},_rgbToHex(e,t,i){return((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)},_hexToRgb(e){e=e.replace(Hn,Sd);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){for(var e=(Math.random()*16777215<<0).toString(16);e.length<6;)e=wd+e;return Hn+e},getRGB(e){var t;return e in Un?(t=Un[e],{r:t[0],g:t[1],b:t[2]}):e[0]===Hn?this._hexToRgb(e.substring(1)):e.substr(0,4)===Ed?(t=Td.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(e){return e=e||"black",E._namedColorToRBA(e)||E._hex3ColorToRGBA(e)||E._hex6ColorToRGBA(e)||E._rgbColorToRGBA(e)||E._rgbaColorToRGBA(e)||E._hslColorToRGBA(e)},_namedColorToRBA(e){var t=Un[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(e.indexOf("rgb(")===0){e=e.match(/rgb\(([^)]+)\)/)[1];var t=e.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(e.indexOf("rgba(")===0){e=e.match(/rgba\(([^)]+)\)/)[1];var t=e.split(/ *, */).map((i,r)=>i.slice(-1)==="%"?r===3?parseInt(i)/100:parseInt(i)/100*255:Number(i));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex6ColorToRGBA(e){if(e[0]==="#"&&e.length===7)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex3ColorToRGBA(e){if(e[0]==="#"&&e.length===4)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),r=Number(i[0])/360,n=Number(i[1])/100,s=Number(i[2])/100;let a,o,l;if(n===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?a=s*(1+n):a=s+n-s*n;const h=2*s-a,c=[0,0,0];for(let f=0;f<3;f++)o=r+1/3*-(f-1),o<0&&o++,o>1&&o--,6*o<1?l=h+(a-h)*6*o:2*o<1?l=a:3*o<2?l=h+(a-h)*(2/3-o)*6:l=h,c[f]=l*255;return{r:Math.round(c[0]),g:Math.round(c[1]),b:Math.round(c[2]),a:1}}},haveIntersection(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},cloneObject(e){var t={};for(var i in e)this._isPlainObject(e[i])?t[i]=this.cloneObject(e[i]):this._isArray(e[i])?t[i]=this.cloneArray(e[i]):t[i]=e[i];return t},cloneArray(e){return e.slice(0)},degToRad(e){return e*bd},radToDeg(e){return e*Cd},_degToRad(e){return E.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),E.degToRad(e)},_radToDeg(e){return E.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),E.radToDeg(e)},_getRotation(e){return V.angleDeg?E.radToDeg(e):e},_capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},throw(e){throw new Error($a+e)},error(e){console.error($a+e)},warn(e){!V.showWarnings||console.warn(xd+e)},each(e,t){for(var i in e)t(i,e[i])},_inRange(e,t,i){return t<=e&&e<i},_getProjectionToSegment(e,t,i,r,n,s){var a,o,l,h=(e-i)*(e-i)+(t-r)*(t-r);if(h==0)a=e,o=t,l=(n-i)*(n-i)+(s-r)*(s-r);else{var c=((n-e)*(i-e)+(s-t)*(r-t))/h;c<0?(a=e,o=t,l=(e-n)*(e-n)+(t-s)*(t-s)):c>1?(a=i,o=r,l=(i-n)*(i-n)+(r-s)*(r-s)):(a=e+c*(i-e),o=t+c*(r-t),l=(a-n)*(a-n)+(o-s)*(o-s))}return[a,o,l]},_getProjectionToLine(e,t,i){var r=E.cloneObject(e),n=Number.MAX_VALUE;return t.forEach(function(s,a){if(!(!i&&a===t.length-1)){var o=t[(a+1)%t.length],l=E._getProjectionToSegment(s.x,s.y,o.x,o.y,e.x,e.y),h=l[0],c=l[1],f=l[2];f<n&&(r.x=h,r.y=c,n=f)}}),r},_prepareArrayForTween(e,t,i){var r,n=[],s=[];if(e.length>t.length){var a=t;t=e,e=a}for(r=0;r<e.length;r+=2)n.push({x:e[r],y:e[r+1]});for(r=0;r<t.length;r+=2)s.push({x:t[r],y:t[r+1]});var o=[];return s.forEach(function(l){var h=E._getProjectionToLine(l,n,i);o.push(h.x),o.push(h.y)}),o},_prepareToStringify(e){var t;e.visitedByCircularReferenceRemoval=!0;for(var i in e)if(!!(e.hasOwnProperty(i)&&e[i]&&typeof e[i]=="object")){if(t=Object.getOwnPropertyDescriptor(e,i),e[i].visitedByCircularReferenceRemoval||E._isElement(e[i]))if(t.configurable)delete e[i];else return null;else if(E._prepareToStringify(e[i])===null)if(t.configurable)delete e[i];else return null}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(var i in t)e[i]=t[i];return e},_getFirstPointerId(e){return e.touches?e.changedTouches[0].identifier:e.pointerId||999},releaseCanvas(...e){!V.releaseCanvasOnDestroy||e.forEach(t=>{t.width=0,t.height=0})}};function Ue(e){return E._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||E._isBoolean(e)?e:Object.prototype.toString.call(e)}function rh(e){return e>255?255:e<0?0:Math.round(e)}function H(){if(V.isUnminified)return function(e,t){return E._isNumber(e)||E.warn(Ue(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function nh(e){if(V.isUnminified)return function(t,i){let r=E._isNumber(t),n=E._isArray(t)&&t.length==e;return!r&&!n&&E.warn(Ue(t)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function ra(){if(V.isUnminified)return function(e,t){var i=E._isNumber(e),r=e==="auto";return i||r||E.warn(Ue(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function Di(){if(V.isUnminified)return function(e,t){return E._isString(e)||E.warn(Ue(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function sh(){if(V.isUnminified)return function(e,t){const i=E._isString(e),r=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return i||r||E.warn(Ue(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function Ad(){if(V.isUnminified)return function(e,t){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&e instanceof i||(E._isArray(e)?e.forEach(function(r){E._isNumber(r)||E.warn('"'+t+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):E.warn(Ue(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function re(){if(V.isUnminified)return function(e,t){var i=e===!0||e===!1;return i||E.warn(Ue(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function kd(e){if(V.isUnminified)return function(t,i){return t==null||E.isObject(t)||E.warn(Ue(t)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+e),t}}var Ui="get",Wi="set";const m={addGetterSetter(e,t,i,r,n){m.addGetter(e,t,i),m.addSetter(e,t,r,n),m.addOverloadedGetterSetter(e,t)},addGetter(e,t,i){var r=Ui+E._capitalize(t);e.prototype[r]=e.prototype[r]||function(){var n=this.attrs[t];return n===void 0?i:n}},addSetter(e,t,i,r){var n=Wi+E._capitalize(t);e.prototype[n]||m.overWriteSetter(e,t,i,r)},overWriteSetter(e,t,i,r){var n=Wi+E._capitalize(t);e.prototype[n]=function(s){return i&&s!==void 0&&s!==null&&(s=i.call(this,s,t)),this._setAttr(t,s),r&&r.call(this),this}},addComponentsGetterSetter(e,t,i,r,n){var s=i.length,a=E._capitalize,o=Ui+a(t),l=Wi+a(t),h,c;e.prototype[o]=function(){var u={};for(h=0;h<s;h++)c=i[h],u[c]=this.getAttr(t+a(c));return u};var f=kd(i);e.prototype[l]=function(u){var g=this.attrs[t],d;r&&(u=r.call(this,u)),f&&f.call(this,u,t);for(d in u)!u.hasOwnProperty(d)||this._setAttr(t+a(d),u[d]);return u||i.forEach(b=>{this._setAttr(t+a(b),void 0)}),this._fireChangeEvent(t,g,u),n&&n.call(this),this},m.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){var i=E._capitalize(t),r=Wi+i,n=Ui+i;e.prototype[t]=function(){return arguments.length?(this[r](arguments[0]),this):this[n]()}},addDeprecatedGetterSetter(e,t,i,r){E.error("Adding deprecated "+t);var n=Ui+E._capitalize(t),s=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[n]=function(){E.error(s);var a=this.attrs[t];return a===void 0?i:a},m.addSetter(e,t,r,function(){E.error(s)}),m.addOverloadedGetterSetter(e,t)},backCompat(e,t){E.each(t,function(i,r){var n=e.prototype[r],s=Ui+E._capitalize(i),a=Wi+E._capitalize(i);function o(){n.apply(this,arguments),E.error('"'+i+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}e.prototype[i]=o,e.prototype[s]=o,e.prototype[a]=o})},afterSetFilter(){this._filterUpToDate=!1}};function Md(e){var t=[],i=e.length,r=E,n,s;for(n=0;n<i;n++)s=e[n],r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),t.push(s);return t}var qa=",",Rd="(",Od=")",Ld="([",Id="])",Dd=";",Fd="()",Nd="=",Ja=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Gd=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const Bd=100;class kn{constructor(t){this.canvas=t,V.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,i){var r=this.traceArr,n=r.length,s="",a,o,l,h;for(a=0;a<n;a++)o=r[a],l=o.method,l?(h=o.args,s+=l,t?s+=Fd:E._isArray(h[0])?s+=Ld+h.join(qa)+Id:(i&&(h=h.map(c=>typeof c=="number"?Math.floor(c):c)),s+=Rd+h.join(qa)+Od)):(s+=o.property,t||(s+=Nd+o.val)),s+=Dd;return s}clearTrace(){this.traceArr=[]}_trace(t){var i=this.traceArr,r;i.push(t),r=i.length,r>=Bd&&i.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var i=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(t){var i=t.getLineCap();i&&this.setAttr("lineCap",i)}_applyOpacity(t){var i=t.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(t){var i=t.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}setAttr(t,i){this._context[t]=i}arc(t,i,r,n,s,a){this._context.arc(t,i,r,n,s,a)}arcTo(t,i,r,n,s){this._context.arcTo(t,i,r,n,s)}beginPath(){this._context.beginPath()}bezierCurveTo(t,i,r,n,s,a){this._context.bezierCurveTo(t,i,r,n,s,a)}clearRect(t,i,r,n){this._context.clearRect(t,i,r,n)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(t,i){var r=arguments;if(r.length===2)return this._context.createImageData(t,i);if(r.length===1)return this._context.createImageData(t)}createLinearGradient(t,i,r,n){return this._context.createLinearGradient(t,i,r,n)}createPattern(t,i){return this._context.createPattern(t,i)}createRadialGradient(t,i,r,n,s,a){return this._context.createRadialGradient(t,i,r,n,s,a)}drawImage(t,i,r,n,s,a,o,l,h){var c=arguments,f=this._context;c.length===3?f.drawImage(t,i,r):c.length===5?f.drawImage(t,i,r,n,s):c.length===9&&f.drawImage(t,i,r,n,s,a,o,l,h)}ellipse(t,i,r,n,s,a,o,l){this._context.ellipse(t,i,r,n,s,a,o,l)}isPointInPath(t,i){return this._context.isPointInPath(t,i)}fill(t){t?this._context.fill(t):this._context.fill()}fillRect(t,i,r,n){this._context.fillRect(t,i,r,n)}strokeRect(t,i,r,n){this._context.strokeRect(t,i,r,n)}fillText(t,i,r,n){n?this._context.fillText(t,i,r,n):this._context.fillText(t,i,r)}measureText(t){return this._context.measureText(t)}getImageData(t,i,r,n){return this._context.getImageData(t,i,r,n)}lineTo(t,i){this._context.lineTo(t,i)}moveTo(t,i){this._context.moveTo(t,i)}rect(t,i,r,n){this._context.rect(t,i,r,n)}putImageData(t,i,r){this._context.putImageData(t,i,r)}quadraticCurveTo(t,i,r,n){this._context.quadraticCurveTo(t,i,r,n)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,i){this._context.scale(t,i)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,i,r,n,s,a){this._context.setTransform(t,i,r,n,s,a)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,i,r,n){this._context.strokeText(t,i,r,n)}transform(t,i,r,n,s,a){this._context.transform(t,i,r,n,s,a)}translate(t,i){this._context.translate(t,i)}_enableTrace(){var t=this,i=Ja.length,r=this.setAttr,n,s,a=function(o){var l=t[o],h;t[o]=function(){return s=Md(Array.prototype.slice.call(arguments,0)),h=l.apply(t,arguments),t._trace({method:o,args:s}),h}};for(n=0;n<i;n++)a(Ja[n]);t.setAttr=function(){r.apply(t,arguments);var o=arguments[0],l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:o,val:l})}}_applyGlobalCompositeOperation(t){const i=t.attrs.globalCompositeOperation;var r=!i||i==="source-over";r||this.setAttr("globalCompositeOperation",i)}}Gd.forEach(function(e){Object.defineProperty(kn.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class Hd extends kn{constructor(t){super(t),this._context=t._canvas.getContext("2d")}_fillColor(t){var i=t.fill();this.setAttr("fillStyle",i),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var i=t._getLinearGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fillRadialGradient(t){var i=t._getRadialGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fill(t){var i=t.fill(),r=t.getFillPriority();if(i&&r==="color"){this._fillColor(t);return}var n=t.getFillPatternImage();if(n&&r==="pattern"){this._fillPattern(t);return}var s=t.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(t);return}var a=t.getFillRadialGradientColorStops();if(a&&r==="radial-gradient"){this._fillRadialGradient(t);return}i?this._fillColor(t):n?this._fillPattern(t):s?this._fillLinearGradient(t):a&&this._fillRadialGradient(t)}_strokeLinearGradient(t){var i=t.getStrokeLinearGradientStartPoint(),r=t.getStrokeLinearGradientEndPoint(),n=t.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(i.x,i.y,r.x,r.y);if(n){for(var a=0;a<n.length;a+=2)s.addColorStop(n[a],n[a+1]);this.setAttr("strokeStyle",s)}}_stroke(t){var i=t.dash(),r=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!r){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t),i&&t.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=t.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),r||this.restore()}}_applyShadow(t){var i,r,n,s=(i=t.getShadowRGBA())!==null&&i!==void 0?i:"black",a=(r=t.getShadowBlur())!==null&&r!==void 0?r:5,o=(n=t.getShadowOffset())!==null&&n!==void 0?n:{x:0,y:0},l=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=l.x*h,f=l.y*h;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",a*Math.min(Math.abs(c),Math.abs(f))),this.setAttr("shadowOffsetX",o.x*c),this.setAttr("shadowOffsetY",o.y*f)}}class Ud extends kn{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){var i=t.getStrokeScaleEnabled();if(!i){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t);var n=t.hitStrokeWidth(),s=n==="auto"?t.strokeWidth():n;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),i||this.restore()}}}var Hr;function Wd(){if(Hr)return Hr;var e=E.createCanvasElement(),t=e.getContext("2d");return Hr=function(){var i=V._global.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/r}(),E.releaseCanvas(e),Hr}class Mn{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var i=t||{},r=i.pixelRatio||V.pixelRatio||Wd();this.pixelRatio=r,this._canvas=E.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var i=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var i=this.pixelRatio,r=this.getContext()._context;r.scale(i,i)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var i=this.pixelRatio,r=this.getContext()._context;r.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,i){this.setWidth(t||0),this.setHeight(i||0)}toDataURL(t,i){try{return this._canvas.toDataURL(t,i)}catch{try{return this._canvas.toDataURL()}catch(n){return E.error("Unable to get data URL. "+n.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}m.addGetterSetter(Mn,"pixelRatio",void 0,H());class Pi extends Mn{constructor(t={width:0,height:0}){super(t),this.context=new Hd(this),this.setSize(t.width,t.height)}}class na extends Mn{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new Ud(this),this.setSize(t.width,t.height)}}const ct={get isDragging(){var e=!1;return ct._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(e=!0)}),e},justDragged:!1,get node(){var e;return ct._dragElements.forEach(t=>{e=t.node}),e},_dragElements:new Map,_drag(e){const t=[];ct._dragElements.forEach((i,r)=>{const{node:n}=i,s=n.getStage();s.setPointersPositions(e),i.pointerId===void 0&&(i.pointerId=E._getFirstPointerId(e));const a=s._changedPointerPositions.find(h=>h.id===i.pointerId);if(!!a){if(i.dragStatus!=="dragging"){var o=n.dragDistance(),l=Math.max(Math.abs(a.x-i.startPointerPos.x),Math.abs(a.y-i.startPointerPos.y));if(l<o||(n.startDrag({evt:e}),!n.isDragging()))return}n._setDragPosition(e,i),t.push(n)}}),t.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:e},!0)})},_endDragBefore(e){const t=[];ct._dragElements.forEach(i=>{const{node:r}=i,n=r.getStage();if(e&&n.setPointersPositions(e),!n._changedPointerPositions.find(o=>o.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(ct.justDragged=!0,V._mouseListenClick=!1,V._touchListenClick=!1,V._pointerListenClick=!1,i.dragStatus="stopped");const a=i.node.getLayer()||i.node instanceof V.Stage&&i.node;a&&t.indexOf(a)===-1&&t.push(a)}),t.forEach(i=>{i.draw()})},_endDragAfter(e){ct._dragElements.forEach((t,i)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),t.dragStatus!=="dragging"&&ct._dragElements.delete(i)})}};V.isBrowser&&(window.addEventListener("mouseup",ct._endDragBefore,!0),window.addEventListener("touchend",ct._endDragBefore,!0),window.addEventListener("mousemove",ct._drag),window.addEventListener("touchmove",ct._drag),window.addEventListener("mouseup",ct._endDragAfter,!1),window.addEventListener("touchend",ct._endDragAfter,!1));var Qr="absoluteOpacity",Ur="allEventListeners",ve="absoluteTransform",Qa="absoluteScale",Xe="canvas",zd="Change",jd="children",Yd="konva",gs="listening",Za="mouseenter",to="mouseleave",eo="set",io="Shape",Zr=" ",ro="stage",Me="transform",Xd="Stage",ps="visible",Kd=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Zr);let Vd=1;class U{constructor(t){this._id=Vd++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Me||t===ve)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,i){var r=this._cache.get(t),n=t===Me||t===ve,s=r===void 0||n&&r.dirty===!0;return s&&(r=i.call(this),this._cache.set(t,r)),r}_calculate(t,i,r){if(!this._attachedDepsListeners.get(t)){const n=i.map(s=>s+"Change.konva").join(Zr);this.on(n,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,r)}_getCanvasCache(){return this._cache.get(Xe)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===ve&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Xe)){const{scene:t,filter:i,hit:r}=this._cache.get(Xe);E.releaseCanvas(t,i,r),this._cache.delete(Xe)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var i=t||{},r={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var n=Math.ceil(i.width||r.width),s=Math.ceil(i.height||r.height),a=i.pixelRatio,o=i.x===void 0?Math.floor(r.x):i.x,l=i.y===void 0?Math.floor(r.y):i.y,h=i.offset||0,c=i.drawBorder||!1,f=i.hitCanvasPixelRatio||1;if(!n||!s){E.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}n+=h*2+1,s+=h*2+1,o-=h,l-=h;var u=new Pi({pixelRatio:a,width:n,height:s}),g=new Pi({pixelRatio:a,width:0,height:0}),d=new na({pixelRatio:f,width:n,height:s}),b=u.getContext(),C=d.getContext();return d.isCache=!0,u.isCache=!0,this._cache.delete(Xe),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(u.getContext()._context.imageSmoothingEnabled=!1,g.getContext()._context.imageSmoothingEnabled=!1),b.save(),C.save(),b.translate(-o,-l),C.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Qr),this._clearSelfAndDescendantCache(Qa),this.drawScene(u,this),this.drawHit(d,this),this._isUnderCache=!1,b.restore(),C.restore(),c&&(b.save(),b.beginPath(),b.rect(0,0,n,s),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(Xe,{scene:u,filter:g,hit:d,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Xe)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,i){var r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],n,s,a,o,l=this.getAbsoluteTransform(i);return r.forEach(function(h){var c=l.point(h);n===void 0&&(n=a=c.x,s=o=c.y),n=Math.min(n,c.x),s=Math.min(s,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y)}),{x:n,y:s,width:a-n,height:o-s}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();t.translate(i.x,i.y);var r=this._getCachedSceneCanvas(),n=r.pixelRatio;t.drawImage(r._canvas,0,0,r.width/n,r.height/n),t.restore()}_drawCachedHitCanvas(t){var i=this._getCanvasCache(),r=i.hit;t.save(),t.translate(i.x,i.y),t.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t=this.filters(),i=this._getCanvasCache(),r=i.scene,n=i.filter,s=n.getContext(),a,o,l,h;if(t){if(!this._filterUpToDate){var c=r.pixelRatio;n.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(a=t.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/c,r.getHeight()/c),o=s.getImageData(0,0,n.getWidth(),n.getHeight()),l=0;l<a;l++){if(h=t[l],typeof h!="function"){E.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,o),s.putImageData(o,0,0)}}catch(f){E.error("Unable to apply filter. "+f.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return n}return r}on(t,i){if(this._cache&&this._cache.delete(Ur),arguments.length===3)return this._delegate.apply(this,arguments);var r=t.split(Zr),n=r.length,s,a,o,l,h;for(s=0;s<n;s++)a=r[s],o=a.split("."),l=o[0],h=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:i});return this}off(t,i){var r=(t||"").split(Zr),n=r.length,s,a,o,l,h,c;if(this._cache&&this._cache.delete(Ur),!t)for(a in this.eventListeners)this._off(a);for(s=0;s<n;s++)if(o=r[s],l=o.split("."),h=l[0],c=l[1],h)this.eventListeners[h]&&this._off(h,c,i);else for(a in this.eventListeners)this._off(a,c,i);return this}dispatchEvent(t){var i={target:this,type:t.type,evt:t};return this.fire(t.type,i),this}addEventListener(t,i){return this.on(t,function(r){i.call(this,r.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,i,r){var n=this;this.on(t,function(s){for(var a=s.target.findAncestors(i,!0,n),o=0;o<a.length;o++)s=E.cloneObject(s),s.currentTarget=a[o],r.call(a[o],s)})}remove(){return this.isDragging()&&this.stopDrag(),ct._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ve),this._clearSelfAndDescendantCache(Qr),this._clearSelfAndDescendantCache(Qa),this._clearSelfAndDescendantCache(ro),this._clearSelfAndDescendantCache(ps),this._clearSelfAndDescendantCache(gs)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){var i="get"+E._capitalize(t);return E._isFunction(this[i])?this[i]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),i=[];t;)i.push(t),t=t.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{var i,r;if(!t)return this;for(i in t)i!==jd&&(r=eo+E._capitalize(i),E._isFunction(this[r])?this[r](t[i]):this._setAttr(i,t[i]))}),this}isListening(){return this._getCache(gs,this._isListening)}_isListening(t){if(!this.listening())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isListening(t):!0}isVisible(){return this._getCache(ps,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isVisible(t):!0}shouldDrawHit(t,i=!1){if(t)return this._isVisible(t)&&this._isListening(t);var r=this.getLayer(),n=!1;ct._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===r)&&(n=!0)});var s=!i&&!V.hitOnDragEnabled&&n;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t=this.getDepth(),i=this,r=0,n,s,a,o;function l(h){for(n=[],s=h.length,a=0;a<s;a++)o=h[a],r++,o.nodeType!==io&&(n=n.concat(o.getChildren().slice())),o._id===i._id&&(a=s);n.length>0&&n[0].getDepth()<=t&&l(n)}return i.nodeType!==Xd&&l(i.getStage().getChildren()),r}getDepth(){for(var t=0,i=this.parent;i;)t++,i=i.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Me),this._clearSelfAndDescendantCache(ve)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var i=this.getAbsoluteTransform().copy();return i.invert(),i.point(t)}getAbsolutePosition(t){let i=!1,r=this.parent;for(;r;){if(r.isCached()){i=!0;break}r=r.parent}i&&!t&&(t=!0);var n=this.getAbsoluteTransform(t).getMatrix(),s=new Xt,a=this.offset();return s.m=n.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(t){var i=this._clearTransform();this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,this._clearCache(Me);var r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(t.x,t.y),t={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(i),this.setPosition({x:t.x,y:t.y}),this._clearCache(Me),this._clearSelfAndDescendantCache(ve),this}_setTransform(t){var i;for(i in t)this.attrs[i]=t[i]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var i=t.x,r=t.y,n=this.x(),s=this.y();return i!==void 0&&(n+=i),r!==void 0&&(s+=r),this.setPosition({x:n,y:s}),this}_eachAncestorReverse(t,i){var r=[],n=this.getParent(),s,a;if(!(i&&i._id===this._id)){for(r.unshift(this);n&&(!i||n._id!==i._id);)r.unshift(n),n=n.parent;for(s=r.length,a=0;a<s;a++)t(r[a])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return E.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return E.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return E.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return E.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return E.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&E.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Qr,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),i=this.getParent();return i&&!i._isUnderCache&&(t*=i.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t={},i=this.getAttrs(),r,n,s,a,o;t.attrs={};for(r in i)n=i[r],o=E.isObject(n)&&!E._isPlainObject(n)&&!E._isArray(n),!o&&(s=typeof this[r]=="function"&&this[r],delete i[r],a=s?s.call(this):null,i[r]=n,a!==n&&(t.attrs[r]=n));return t.className=this.getClassName(),E._prepareToStringify(t)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,i,r){var n=[];i&&this._isMatch(t)&&n.push(this);for(var s=this.parent;s;){if(s===r)return n;s._isMatch(t)&&n.push(s),s=s.parent}return n}isAncestorOf(t){return!1}findAncestor(t,i,r){return this.findAncestors(t,i,r)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);var i=t.replace(/ /g,"").split(","),r=i.length,n,s;for(n=0;n<r;n++)if(s=i[n],E.isValidSelector(s)||(E.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),E.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),E.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(ro,this._getStage)}_getStage(){var t=this.getParent();if(t)return t.getStage()}fire(t,i={},r){return i.target=i.target||this,r?this._fireAndBubble(t,i):this._fire(t,i),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(ve,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var i;if(t)return i=new Xt,this._eachAncestorReverse(function(n){var s=n.transformsEnabled();s==="all"?i.multiply(n.getTransform()):s==="position"&&i.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},t),i;i=this._cache.get(ve)||new Xt,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();var r=this.transformsEnabled();if(r==="all")i.multiply(this.getTransform());else if(r==="position"){const n=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;i.translate(n-a,s-o)}return i.dirty=!1,i}getAbsoluteScale(t){for(var i=this;i;)i._isUnderCache&&(t=i),i=i.getParent();const n=this.getAbsoluteTransform(t).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Me,this._getTransform)}_getTransform(){var t,i,r=this._cache.get(Me)||new Xt;r.reset();var n=this.x(),s=this.y(),a=V.getAngle(this.rotation()),o=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,h=this.attrs.skewX||0,c=this.attrs.skewY||0,f=this.attrs.offsetX||0,u=this.attrs.offsetY||0;return(n!==0||s!==0)&&r.translate(n,s),a!==0&&r.rotate(a),(h!==0||c!==0)&&r.skew(h,c),(o!==1||l!==1)&&r.scale(o,l),(f!==0||u!==0)&&r.translate(-1*f,-1*u),r.dirty=!1,r}clone(t){var i=E.cloneObject(this.attrs),r,n,s,a,o;for(r in t)i[r]=t[r];var l=new this.constructor(i);for(r in this.eventListeners)for(n=this.eventListeners[r],s=n.length,a=0;a<s;a++)o=n[a],o.name.indexOf(Yd)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(o));return l}_toKonvaCanvas(t){t=t||{};var i=this.getClientRect(),r=this.getStage(),n=t.x!==void 0?t.x:Math.floor(i.x),s=t.y!==void 0?t.y:Math.floor(i.y),a=t.pixelRatio||1,o=new Pi({width:t.width||Math.ceil(i.width)||(r?r.width():0),height:t.height||Math.ceil(i.height)||(r?r.height():0),pixelRatio:a}),l=o.getContext();return t.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(n||s)&&l.translate(-1*n,-1*s),this.drawScene(o),l.restore(),o}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};var i=t.mimeType||null,r=t.quality||null,n=this._toKonvaCanvas(t).toDataURL(i,r);return t.callback&&t.callback(n),n}toImage(t){return new Promise((i,r)=>{try{const n=t==null?void 0:t.callback;n&&delete t.callback,E._urlToImage(this.toDataURL(t),function(s){i(s),n==null||n(s)})}catch(n){r(n)}})}toBlob(t){return new Promise((i,r)=>{try{const n=t==null?void 0:t.callback;n&&delete t.callback,this.toCanvas(t).toBlob(s=>{i(s),n==null||n(s)})}catch(n){r(n)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():V.dragDistance}_off(t,i,r){var n=this.eventListeners[t],s,a,o;for(s=0;s<n.length;s++)if(a=n[s].name,o=n[s].handler,(a!=="konva"||i==="konva")&&(!i||a===i)&&(!r||r===o)){if(n.splice(s,1),n.length===0){delete this.eventListeners[t];break}s--}}_fireChangeEvent(t,i,r){this._fire(t+zd,{oldVal:i,newVal:r})}addName(t){if(!this.hasName(t)){var i=this.name(),r=i?i+" "+t:t;this.name(r)}return this}hasName(t){if(!t)return!1;const i=this.name();if(!i)return!1;var r=(i||"").split(/\s/g);return r.indexOf(t)!==-1}removeName(t){var i=(this.name()||"").split(/\s/g),r=i.indexOf(t);return r!==-1&&(i.splice(r,1),this.name(i.join(" "))),this}setAttr(t,i){var r=this[eo+E._capitalize(t)];return E._isFunction(r)?r.call(this,i):this._setAttr(t,i),this}_requestDraw(){if(V.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,i){var r=this.attrs[t];r===i&&!E.isObject(i)||(i==null?delete this.attrs[t]:this.attrs[t]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(t,r,i),this._requestDraw())}_setComponentAttr(t,i,r){var n;r!==void 0&&(n=this.attrs[t],n||(this.attrs[t]=this.getAttr(t)),this.attrs[t][i]=r,this._fireChangeEvent(t,n,r))}_fireAndBubble(t,i,r){i&&this.nodeType===io&&(i.target=this);var n=(t===Za||t===to)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!n){this._fire(t,i);var s=(t===Za||t===to)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!s&&(r&&r.parent?this._fireAndBubble.call(this.parent,t,i,r):this._fireAndBubble.call(this.parent,t,i))}}_getProtoListeners(t){let i=this._cache.get(Ur);if(!i){i={};let n=Object.getPrototypeOf(this);for(;n;){if(!n.eventListeners){n=Object.getPrototypeOf(n);continue}for(var r in n.eventListeners){const s=n.eventListeners[r],a=i[r]||[];i[r]=s.concat(a)}n=Object.getPrototypeOf(n)}this._cache.set(Ur,i)}return i[t]}_fire(t,i){i=i||{},i.currentTarget=this,i.type=t;const r=this._getProtoListeners(t);if(r)for(var n=0;n<r.length;n++)r[n].handler.call(this,i);const s=this.eventListeners[t];if(s)for(var n=0;n<s.length;n++)s[n].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var i=t?t.pointerId:void 0,r=this.getStage(),n=this.getAbsolutePosition(),s=r._getPointerById(i)||r._changedPointerPositions[0]||n;ct._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-n.x,y:s.y-n.y},dragStatus:"ready",pointerId:i})}startDrag(t,i=!0){ct._dragElements.has(this._id)||this._createDragElement(t);const r=ct._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},i)}_setDragPosition(t,i){const r=this.getStage()._getPointerById(i.pointerId);if(!!r){var n={x:r.x-i.offset.x,y:r.y-i.offset.y},s=this.dragBoundFunc();if(s!==void 0){const a=s.call(this,n,t);a?n=a:E.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==n.x||this._lastPos.y!==n.y)&&(this.setAbsolutePosition(n),this._requestDraw()),this._lastPos=n}}stopDrag(t){const i=ct._dragElements.get(this._id);i&&(i.dragStatus="stopped"),ct._endDragBefore(t),ct._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=ct._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){var i=t.evt.button!==void 0,r=!i||V.dragButtons.indexOf(t.evt.button)>=0;if(!!r&&!this.isDragging()){var n=!1;ct._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(n=!0)}),n||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage();if(!t)return;const i=ct._dragElements.get(this._id),r=i&&i.dragStatus==="dragging",n=i&&i.dragStatus==="ready";r?this.stopDrag():n&&ct._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const i=this.getStage();if(!i)return!1;const r={x:-t.x,y:-t.y,width:i.width()+2*t.x,height:i.height()+2*t.y};return E.haveIntersection(r,this.getClientRect())}static create(t,i){return E._isString(t)&&(t=JSON.parse(t)),this._createNode(t,i)}static _createNode(t,i){var r=U.prototype.getClassName.call(t),n=t.children,s,a,o;i&&(t.attrs.container=i),V[r]||(E.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=V[r];if(s=new l(t.attrs),n)for(a=n.length,o=0;o<a;o++)s.add(U._createNode(n[o]));return s}}U.prototype.nodeType="Node";U.prototype._attrsAffectingSize=[];U.prototype.eventListeners={};U.prototype.on.call(U.prototype,Kd,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Me),this._clearSelfAndDescendantCache(ve)});U.prototype.on.call(U.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(ps)});U.prototype.on.call(U.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(gs)});U.prototype.on.call(U.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Qr)});const _t=m.addGetterSetter;_t(U,"zIndex");_t(U,"absolutePosition");_t(U,"position");_t(U,"x",0,H());_t(U,"y",0,H());_t(U,"globalCompositeOperation","source-over",Di());_t(U,"opacity",1,H());_t(U,"name","",Di());_t(U,"id","",Di());_t(U,"rotation",0,H());m.addComponentsGetterSetter(U,"scale",["x","y"]);_t(U,"scaleX",1,H());_t(U,"scaleY",1,H());m.addComponentsGetterSetter(U,"skew",["x","y"]);_t(U,"skewX",0,H());_t(U,"skewY",0,H());m.addComponentsGetterSetter(U,"offset",["x","y"]);_t(U,"offsetX",0,H());_t(U,"offsetY",0,H());_t(U,"dragDistance",null,H());_t(U,"width",0,H());_t(U,"height",0,H());_t(U,"listening",!0,re());_t(U,"preventDefault",!0,re());_t(U,"filters",null,function(e){return this._filterUpToDate=!1,e});_t(U,"visible",!0,re());_t(U,"transformsEnabled","all",Di());_t(U,"size");_t(U,"dragBoundFunc");_t(U,"draggable",!1,re());m.backCompat(U,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Vt extends U{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const i=this.children||[];var r=[];return i.forEach(function(n){t(n)&&r.push(n)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}var r=t[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var i=this._generalFind(t,!0);return i.length>0?i[0]:void 0}_generalFind(t,i){var r=[];return this._descendants(n=>{const s=n._isMatch(t);return s&&r.push(n),!!(s&&i)}),r}_descendants(t){let i=!1;const r=this.getChildren();for(const n of r){if(i=t(n),i)return!0;if(!!n.hasChildren()&&(i=n._descendants(t),i))return!0}return!1}toObject(){var t=U.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(i=>{t.children.push(i.toObject())}),t}isAncestorOf(t){for(var i=t.getParent();i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(t){var i=U.prototype.clone.call(this,t);return this.getChildren().forEach(function(r){i.add(r.clone())}),i}getAllIntersections(t){var i=[];return this.find("Shape").forEach(function(r){r.isVisible()&&r.intersects(t)&&i.push(r)}),i}_clearSelfAndDescendantCache(t){var i;super._clearSelfAndDescendantCache(t),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(r){r._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(i,r){i.index=r}),this._requestDraw()}drawScene(t,i){var r=this.getLayer(),n=t||r&&r.getCanvas(),s=n&&n.getContext(),a=this._getCanvasCache(),o=a&&a.scene,l=n&&n.isCache;if(!this.isVisible()&&!l)return this;if(o){s.save();var h=this.getAbsoluteTransform(i).getMatrix();s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",n,i);return this}drawHit(t,i){if(!this.shouldDrawHit(i))return this;var r=this.getLayer(),n=t||r&&r.hitCanvas,s=n&&n.getContext(),a=this._getCanvasCache(),o=a&&a.hit;if(o){s.save();var l=this.getAbsoluteTransform(i).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",n,i);return this}_drawChildren(t,i,r){var n,s=i&&i.getContext(),a=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),h=a&&o||l;const c=r===this;if(h){s.save();var f=this.getAbsoluteTransform(r),u=f.getMatrix();if(s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),s.beginPath(),l)l.call(this,s,this);else{var g=this.clipX(),d=this.clipY();s.rect(g,d,a,o)}s.clip(),u=f.copy().invert().getMatrix(),s.transform(u[0],u[1],u[2],u[3],u[4],u[5])}var b=!c&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";b&&(s.save(),s._applyGlobalCompositeOperation(this)),(n=this.children)===null||n===void 0||n.forEach(function(C){C[t](i,r)}),b&&s.restore(),h&&s.restore()}getClientRect(t){var i;t=t||{};var r=t.skipTransform,n=t.relativeTo,s,a,o,l,h={x:1/0,y:1/0,width:0,height:0},c=this;(i=this.children)===null||i===void 0||i.forEach(function(b){if(!!b.visible()){var C=b.getClientRect({relativeTo:c,skipShadow:t.skipShadow,skipStroke:t.skipStroke});C.width===0&&C.height===0||(s===void 0?(s=C.x,a=C.y,o=C.x+C.width,l=C.y+C.height):(s=Math.min(s,C.x),a=Math.min(a,C.y),o=Math.max(o,C.x+C.width),l=Math.max(l,C.y+C.height)))}});for(var f=this.find("Shape"),u=!1,g=0;g<f.length;g++){var d=f[g];if(d._isVisible(this)){u=!0;break}}return u&&s!==void 0?h={x:s,y:a,width:o-s,height:l-a}:h={x:0,y:0,width:0,height:0},r?h:this._transformedRect(h,n)}}m.addComponentsGetterSetter(Vt,"clip",["x","y","width","height"]);m.addGetterSetter(Vt,"clipX",void 0,H());m.addGetterSetter(Vt,"clipY",void 0,H());m.addGetterSetter(Vt,"clipWidth",void 0,H());m.addGetterSetter(Vt,"clipHeight",void 0,H());m.addGetterSetter(Vt,"clipFunc");const vr=new Map,ah=V._global.PointerEvent!==void 0;function Wn(e){return vr.get(e)}function sa(e){return{evt:e,pointerId:e.pointerId}}function oh(e,t){return vr.get(e)===t}function lh(e,t){nr(e),t.getStage()&&(vr.set(e,t),ah&&t._fire("gotpointercapture",sa(new PointerEvent("gotpointercapture"))))}function nr(e,t){const i=vr.get(e);if(!i)return;const r=i.getStage();r&&r.content,vr.delete(e),ah&&i._fire("lostpointercapture",sa(new PointerEvent("lostpointercapture")))}var $d="Stage",qd="string",no="px",Jd="mouseout",hh="mouseleave",ch="mouseover",fh="mouseenter",uh="mousemove",dh="mousedown",gh="mouseup",Ki="pointermove",Vi="pointerdown",yi="pointerup",$i="pointercancel",Qd="lostpointercapture",Wr="pointerout",zr="pointerleave",jr="pointerover",Yr="pointerenter",vs="contextmenu",ph="touchstart",vh="touchend",mh="touchmove",_h="touchcancel",ms="wheel",Zd=5,tg=[[fh,"_pointerenter"],[dh,"_pointerdown"],[uh,"_pointermove"],[gh,"_pointerup"],[hh,"_pointerleave"],[ph,"_pointerdown"],[mh,"_pointermove"],[vh,"_pointerup"],[_h,"_pointercancel"],[ch,"_pointerover"],[ms,"_wheel"],[vs,"_contextmenu"],[Vi,"_pointerdown"],[Ki,"_pointermove"],[yi,"_pointerup"],[$i,"_pointercancel"],[Qd,"_lostpointercapture"]];const zn={mouse:{[Wr]:Jd,[zr]:hh,[jr]:ch,[Yr]:fh,[Ki]:uh,[Vi]:dh,[yi]:gh,[$i]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Wr]:"touchout",[zr]:"touchleave",[jr]:"touchover",[Yr]:"touchenter",[Ki]:mh,[Vi]:ph,[yi]:vh,[$i]:_h,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Wr]:Wr,[zr]:zr,[jr]:jr,[Yr]:Yr,[Ki]:Ki,[Vi]:Vi,[yi]:yi,[$i]:$i,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},qi=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",pi=e=>{const t=qi(e);if(t==="pointer")return V.pointerEventsEnabled&&zn.pointer;if(t==="touch")return zn.touch;if(t==="mouse")return zn.mouse};function so(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&E.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const eg="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",tn=[];class Rn extends Vt{constructor(t){super(so(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),tn.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{so(this.attrs)}),this._checkVisibility()}_validateAdd(t){const i=t.getType()==="Layer",r=t.getType()==="FastLayer";i||r||E.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===qd){if(t.charAt(0)==="."){var i=t.slice(1);t=document.getElementsByClassName(i)[0]}else{var r;t.charAt(0)!=="#"?r=t:r=t.slice(1),t=document.getElementById(r)}if(!t)throw"Can not find container in document with id "+r}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var t=this.children,i=t.length,r;for(r=0;r<i;r++)t[r].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),Vt.prototype.clone.call(this,t)}destroy(){super.destroy();var t=this.content;t&&E._isInDocument(t)&&this.container().removeChild(t);var i=tn.indexOf(this);return i>-1&&tn.splice(i,1),E.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(E.warn(eg),null)}_getPointerById(t){return this._pointerPositions.find(i=>i.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t=t||{},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var i=new Pi({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),r=i.getContext()._context,n=this.children;return(t.x||t.y)&&r.translate(-1*t.x,-1*t.y),n.forEach(function(s){if(!!s.isVisible()){var a=s._toKonvaCanvas(t);r.drawImage(a._canvas,t.x,t.y,a.getWidth()/a.getPixelRatio(),a.getHeight()/a.getPixelRatio())}}),i}getIntersection(t){if(!t)return null;var i=this.children,r=i.length,n=r-1,s;for(s=n;s>=0;s--){const a=i[s].getIntersection(t);if(a)return a}return null}_resizeDOM(){var t=this.width(),i=this.height();this.content&&(this.content.style.width=t+no,this.content.style.height=i+no),this.bufferCanvas.setSize(t,i),this.bufferHitCanvas.setSize(t,i),this.children.forEach(r=>{r.setSize({width:t,height:i}),r.draw()})}add(t,...i){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(t);var n=this.children.length;return n>Zd&&E.warn("The stage has "+n+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),V.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return oh(t,this)}setPointerCapture(t){lh(t,this)}releaseCapture(t){nr(t)}getLayers(){return this.children}_bindContentEvents(){!V.isBrowser||tg.forEach(([t,i])=>{this.content.addEventListener(t,r=>{this[i](r)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const i=pi(t.type);this._fire(i.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const i=pi(t.type);this._fire(i.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let i=this[t+"targetShape"];return i&&!i.getStage()&&(i=null),i}_pointerleave(t){const i=pi(t.type),r=qi(t.type);if(!!i){this.setPointersPositions(t);var n=this._getTargetShape(r),s=!ct.isDragging||V.hitOnDragEnabled;n&&s?(n._fireAndBubble(i.pointerout,{evt:t}),n._fireAndBubble(i.pointerleave,{evt:t}),this._fire(i.pointerleave,{evt:t,target:this,currentTarget:this}),this[r+"targetShape"]=null):s&&(this._fire(i.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(i.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(t){const i=pi(t.type),r=qi(t.type);if(!!i){this.setPointersPositions(t);var n=!1;this._changedPointerPositions.forEach(s=>{var a=this.getIntersection(s);if(ct.justDragged=!1,V["_"+r+"ListenClick"]=!0,!(a&&a.isListening()))return;V.capturePointerEventsEnabled&&a.setPointerCapture(s.id),this[r+"ClickStartShape"]=a,a._fireAndBubble(i.pointerdown,{evt:t,pointerId:s.id}),n=!0;const l=t.type.indexOf("touch")>=0;a.preventDefault()&&t.cancelable&&l&&t.preventDefault()}),n||this._fire(i.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(t){const i=pi(t.type),r=qi(t.type);if(!i)return;ct.isDragging&&ct.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t);var n=!ct.isDragging||V.hitOnDragEnabled;if(!n)return;var s={};let a=!1;var o=this._getTargetShape(r);this._changedPointerPositions.forEach(l=>{const h=Wn(l.id)||this.getIntersection(l),c=l.id,f={evt:t,pointerId:c};var u=o!==h;if(u&&o&&(o._fireAndBubble(i.pointerout,Object.assign({},f),h),o._fireAndBubble(i.pointerleave,Object.assign({},f),h)),h){if(s[h._id])return;s[h._id]=!0}h&&h.isListening()?(a=!0,u&&(h._fireAndBubble(i.pointerover,Object.assign({},f),o),h._fireAndBubble(i.pointerenter,Object.assign({},f),o),this[r+"targetShape"]=h),h._fireAndBubble(i.pointermove,Object.assign({},f))):o&&(this._fire(i.pointerover,{evt:t,target:this,currentTarget:this,pointerId:c}),this[r+"targetShape"]=null)}),a||this._fire(i.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const i=pi(t.type),r=qi(t.type);if(!i)return;this.setPointersPositions(t);const n=this[r+"ClickStartShape"],s=this[r+"ClickEndShape"];var a={};let o=!1;this._changedPointerPositions.forEach(l=>{const h=Wn(l.id)||this.getIntersection(l);if(h){if(h.releaseCapture(l.id),a[h._id])return;a[h._id]=!0}const c=l.id,f={evt:t,pointerId:c};let u=!1;V["_"+r+"InDblClickWindow"]?(u=!0,clearTimeout(this[r+"DblTimeout"])):ct.justDragged||(V["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){V["_"+r+"InDblClickWindow"]=!1},V.dblClickWindow),h&&h.isListening()?(o=!0,this[r+"ClickEndShape"]=h,h._fireAndBubble(i.pointerup,Object.assign({},f)),V["_"+r+"ListenClick"]&&n&&n===h&&(h._fireAndBubble(i.pointerclick,Object.assign({},f)),u&&s&&s===h&&h._fireAndBubble(i.pointerdblclick,Object.assign({},f)))):(this[r+"ClickEndShape"]=null,V["_"+r+"ListenClick"]&&this._fire(i.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:c}),u&&this._fire(i.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:c}))}),o||this._fire(i.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),V["_"+r+"ListenClick"]=!1,t.cancelable&&r!=="touch"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(vs,{evt:t}):this._fire(vs,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);var i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(ms,{evt:t}):this._fire(ms,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const i=Wn(t.pointerId)||this.getIntersection(this.getPointerPosition());i&&i._fireAndBubble(yi,sa(t)),nr(t.pointerId)}_lostpointercapture(t){nr(t.pointerId)}setPointersPositions(t){var i=this._getContentPosition(),r=null,n=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-i.left)/i.scaleX,y:(s.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-i.left)/i.scaleX,y:(s.clientY-i.top)/i.scaleY})})):(r=(t.clientX-i.left)/i.scaleX,n=(t.clientY-i.top)/i.scaleY,this.pointerPos={x:r,y:n},this._pointerPositions=[{x:r,y:n,id:E._getFirstPointerId(t)}],this._changedPointerPositions=[{x:r,y:n,id:E._getFirstPointerId(t)}])}_setPointerPosition(t){E.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Pi({width:this.width(),height:this.height()}),this.bufferHitCanvas=new na({pixelRatio:1,width:this.width(),height:this.height()}),!!V.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}}cache(){return E.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}}Rn.prototype.nodeType=$d;St(Rn);m.addGetterSetter(Rn,"container");var yh="hasShadow",bh="shadowRGBA",Ch="patternImage",Sh="linearGradient",wh="radialGradient";let Xr;function jn(){return Xr||(Xr=E.createCanvasElement().getContext("2d"),Xr)}const sr={};function ig(e){e.fill()}function rg(e){e.stroke()}function ng(e){e.fill()}function sg(e){e.stroke()}function ag(){this._clearCache(yh)}function og(){this._clearCache(bh)}function lg(){this._clearCache(Ch)}function hg(){this._clearCache(Sh)}function cg(){this._clearCache(wh)}class G extends U{constructor(t){super(t);let i;for(;i=E.getRandomColor(),!(i&&!(i in sr)););this.colorKey=i,sr[i]=this}getContext(){return E.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return E.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(yh,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Ch,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var t=jn();const i=t.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(i&&i.setTransform){const r=new Xt;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(V.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const n=r.getMatrix(),s=typeof DOMMatrix>"u"?{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}:new DOMMatrix(n);i.setTransform(s)}return i}}_getLinearGradient(){return this._getCache(Sh,this.__getLinearGradient)}__getLinearGradient(){var t=this.fillLinearGradientColorStops();if(t){for(var i=jn(),r=this.fillLinearGradientStartPoint(),n=this.fillLinearGradientEndPoint(),s=i.createLinearGradient(r.x,r.y,n.x,n.y),a=0;a<t.length;a+=2)s.addColorStop(t[a],t[a+1]);return s}}_getRadialGradient(){return this._getCache(wh,this.__getRadialGradient)}__getRadialGradient(){var t=this.fillRadialGradientColorStops();if(t){for(var i=jn(),r=this.fillRadialGradientStartPoint(),n=this.fillRadialGradientEndPoint(),s=i.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),n.x,n.y,this.fillRadialGradientEndRadius()),a=0;a<t.length;a+=2)s.addColorStop(t[a],t[a+1]);return s}}getShadowRGBA(){return this._getCache(bh,this._getShadowRGBA)}_getShadowRGBA(){if(!!this.hasShadow()){var t=E.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){var i=this.getStage(),r=i.bufferHitCanvas,n;return r.getContext().clear(),this.drawHit(r,null,!0),n=r.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data,n[3]>0}destroy(){return U.prototype.destroy.call(this),delete sr[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var i;if(!this.getStage()||!((i=this.attrs.perfectDrawEnabled)!==null&&i!==void 0?i:!0))return!1;const n=t||this.hasFill(),s=this.hasStroke(),a=this.getAbsoluteOpacity()!==1;if(n&&s&&a)return!0;const o=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(n&&s&&o&&l)}setStrokeHitEnabled(t){E.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){const i=t.skipTransform,r=t.relativeTo,n=this.getSelfRect(),a=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=n.width+a,l=n.height+a,h=!t.skipShadow&&this.hasShadow(),c=h?this.shadowOffsetX():0,f=h?this.shadowOffsetY():0,u=o+Math.abs(c),g=l+Math.abs(f),d=h&&this.shadowBlur()||0,b=u+d*2,C=g+d*2,_={width:b,height:C,x:-(a/2+d)+Math.min(c,0)+n.x,y:-(a/2+d)+Math.min(f,0)+n.y};return i?_:this._transformedRect(_,r)}drawScene(t,i){var r=this.getLayer(),n=t||r.getCanvas(),s=n.getContext(),a=this._getCanvasCache(),o=this.getSceneFunc(),l=this.hasShadow(),h,c,f,u=n.isCache,g=i===this;if(!this.isVisible()&&!g)return this;if(a){s.save();var d=this.getAbsoluteTransform(i).getMatrix();return s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!o)return this;if(s.save(),this._useBufferCanvas()&&!u){h=this.getStage(),c=h.bufferCanvas,f=c.getContext(),f.clear(),f.save(),f._applyLineJoin(this);var b=this.getAbsoluteTransform(i).getMatrix();f.transform(b[0],b[1],b[2],b[3],b[4],b[5]),o.call(this,f,this),f.restore();var C=c.pixelRatio;l&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(c._canvas,0,0,c.width/C,c.height/C)}else{if(s._applyLineJoin(this),!g){var b=this.getAbsoluteTransform(i).getMatrix();s.transform(b[0],b[1],b[2],b[3],b[4],b[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}l&&s._applyShadow(this),o.call(this,s,this)}return s.restore(),this}drawHit(t,i,r=!1){if(!this.shouldDrawHit(i,r))return this;var n=this.getLayer(),s=t||n.hitCanvas,a=s&&s.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),h=l&&l.hit;if(this.colorKey||E.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){a.save();var c=this.getAbsoluteTransform(i).getMatrix();return a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;if(a.save(),a._applyLineJoin(this),!(this===i)){var u=this.getAbsoluteTransform(i).getMatrix();a.transform(u[0],u[1],u[2],u[3],u[4],u[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(t=0){var i=this._getCanvasCache(),r=this._getCachedSceneCanvas(),n=i.hit,s=n.getContext(),a=n.getWidth(),o=n.getHeight(),l,h,c,f,u,g;s.clear(),s.drawImage(r._canvas,0,0,a,o);try{for(l=s.getImageData(0,0,a,o),h=l.data,c=h.length,f=E._hexToRgb(this.colorKey),u=0;u<c;u+=4)g=h[u+3],g>t?(h[u]=f.r,h[u+1]=f.g,h[u+2]=f.b,h[u+3]=255):h[u+3]=0;s.putImageData(l,0,0)}catch(d){E.error("Unable to draw hit graph from cached scene canvas. "+d.message)}return this}hasPointerCapture(t){return oh(t,this)}setPointerCapture(t){lh(t,this)}releaseCapture(t){nr(t)}}G.prototype._fillFunc=ig;G.prototype._strokeFunc=rg;G.prototype._fillFuncHit=ng;G.prototype._strokeFuncHit=sg;G.prototype._centroid=!1;G.prototype.nodeType="Shape";St(G);G.prototype.eventListeners={};G.prototype.on.call(G.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",ag);G.prototype.on.call(G.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",og);G.prototype.on.call(G.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",lg);G.prototype.on.call(G.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",hg);G.prototype.on.call(G.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",cg);m.addGetterSetter(G,"stroke",void 0,sh());m.addGetterSetter(G,"strokeWidth",2,H());m.addGetterSetter(G,"fillAfterStrokeEnabled",!1);m.addGetterSetter(G,"hitStrokeWidth","auto",ra());m.addGetterSetter(G,"strokeHitEnabled",!0,re());m.addGetterSetter(G,"perfectDrawEnabled",!0,re());m.addGetterSetter(G,"shadowForStrokeEnabled",!0,re());m.addGetterSetter(G,"lineJoin");m.addGetterSetter(G,"lineCap");m.addGetterSetter(G,"sceneFunc");m.addGetterSetter(G,"hitFunc");m.addGetterSetter(G,"dash");m.addGetterSetter(G,"dashOffset",0,H());m.addGetterSetter(G,"shadowColor",void 0,Di());m.addGetterSetter(G,"shadowBlur",0,H());m.addGetterSetter(G,"shadowOpacity",1,H());m.addComponentsGetterSetter(G,"shadowOffset",["x","y"]);m.addGetterSetter(G,"shadowOffsetX",0,H());m.addGetterSetter(G,"shadowOffsetY",0,H());m.addGetterSetter(G,"fillPatternImage");m.addGetterSetter(G,"fill",void 0,sh());m.addGetterSetter(G,"fillPatternX",0,H());m.addGetterSetter(G,"fillPatternY",0,H());m.addGetterSetter(G,"fillLinearGradientColorStops");m.addGetterSetter(G,"strokeLinearGradientColorStops");m.addGetterSetter(G,"fillRadialGradientStartRadius",0);m.addGetterSetter(G,"fillRadialGradientEndRadius",0);m.addGetterSetter(G,"fillRadialGradientColorStops");m.addGetterSetter(G,"fillPatternRepeat","repeat");m.addGetterSetter(G,"fillEnabled",!0);m.addGetterSetter(G,"strokeEnabled",!0);m.addGetterSetter(G,"shadowEnabled",!0);m.addGetterSetter(G,"dashEnabled",!0);m.addGetterSetter(G,"strokeScaleEnabled",!0);m.addGetterSetter(G,"fillPriority","color");m.addComponentsGetterSetter(G,"fillPatternOffset",["x","y"]);m.addGetterSetter(G,"fillPatternOffsetX",0,H());m.addGetterSetter(G,"fillPatternOffsetY",0,H());m.addComponentsGetterSetter(G,"fillPatternScale",["x","y"]);m.addGetterSetter(G,"fillPatternScaleX",1,H());m.addGetterSetter(G,"fillPatternScaleY",1,H());m.addComponentsGetterSetter(G,"fillLinearGradientStartPoint",["x","y"]);m.addComponentsGetterSetter(G,"strokeLinearGradientStartPoint",["x","y"]);m.addGetterSetter(G,"fillLinearGradientStartPointX",0);m.addGetterSetter(G,"strokeLinearGradientStartPointX",0);m.addGetterSetter(G,"fillLinearGradientStartPointY",0);m.addGetterSetter(G,"strokeLinearGradientStartPointY",0);m.addComponentsGetterSetter(G,"fillLinearGradientEndPoint",["x","y"]);m.addComponentsGetterSetter(G,"strokeLinearGradientEndPoint",["x","y"]);m.addGetterSetter(G,"fillLinearGradientEndPointX",0);m.addGetterSetter(G,"strokeLinearGradientEndPointX",0);m.addGetterSetter(G,"fillLinearGradientEndPointY",0);m.addGetterSetter(G,"strokeLinearGradientEndPointY",0);m.addComponentsGetterSetter(G,"fillRadialGradientStartPoint",["x","y"]);m.addGetterSetter(G,"fillRadialGradientStartPointX",0);m.addGetterSetter(G,"fillRadialGradientStartPointY",0);m.addComponentsGetterSetter(G,"fillRadialGradientEndPoint",["x","y"]);m.addGetterSetter(G,"fillRadialGradientEndPointX",0);m.addGetterSetter(G,"fillRadialGradientEndPointY",0);m.addGetterSetter(G,"fillPatternRotation",0);m.backCompat(G,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var fg="#",ug="beforeDraw",dg="draw",xh=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],gg=xh.length;class li extends Vt{constructor(t){super(t),this.canvas=new Pi,this.hitCanvas=new na({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),t<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[t+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){U.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=U.prototype.moveUp.call(this);if(!t)return!1;var i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(U.prototype.moveDown.call(this)){var t=this.getStage();if(t){var i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(U.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return U.prototype.remove.call(this),t&&t.parentNode&&E._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:i}){return this.canvas.setSize(t,i),this.hitCanvas.setSize(t,i),this._setSmoothEnabled(),this}_validateAdd(t){var i=t.getType();i!=="Group"&&i!=="Shape"&&E.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),U.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){E.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){E.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,E.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var i=1,r=!1;;){for(let n=0;n<gg;n++){const s=xh[n],a=this._getIntersection({x:t.x+s.x*i,y:t.y+s.y*i}),o=a.shape;if(o)return o;if(r=!!a.antialiased,!a.antialiased)break}if(r)i+=1;else return null}}_getIntersection(t){const i=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,n=r[3];if(n===255){const s=E._rgbToHex(r[0],r[1],r[2]),a=sr[fg+s];return a?{shape:a}:{antialiased:!0}}else if(n>0)return{antialiased:!0};return{}}drawScene(t,i){var r=this.getLayer(),n=t||r&&r.getCanvas();return this._fire(ug,{node:this}),this.clearBeforeDraw()&&n.getContext().clear(),Vt.prototype.drawScene.call(this,n,i),this._fire(dg,{node:this}),this}drawHit(t,i){var r=this.getLayer(),n=t||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),Vt.prototype.drawHit.call(this,n,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){E.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return E.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,i=!!this.hitCanvas._canvas.parentNode;i?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return E.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}li.prototype.nodeType="Layer";St(li);m.addGetterSetter(li,"imageSmoothingEnabled",!0);m.addGetterSetter(li,"clearBeforeDraw",!0);m.addGetterSetter(li,"hitGraphEnabled",!0,re());class aa extends li{constructor(t){super(t),this.listening(!1),E.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}aa.prototype.nodeType="FastLayer";St(aa);class Oi extends Vt{_validateAdd(t){var i=t.getType();i!=="Group"&&i!=="Shape"&&E.throw("You may only add groups and shapes to groups.")}}Oi.prototype.nodeType="Group";St(Oi);var Yn=function(){return Ti.performance&&Ti.performance.now?function(){return Ti.performance.now()}:function(){return new Date().getTime()}}();class Qt{constructor(t,i){this.id=Qt.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Yn(),frameRate:0},this.func=t,this.setLayers(i)}setLayers(t){var i=[];return t?t.length>0?i=t:i=[t]:i=[],this.layers=i,this}getLayers(){return this.layers}addLayer(t){var i=this.layers,r=i.length,n;for(n=0;n<r;n++)if(i[n]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){var t=Qt,i=t.animations,r=i.length,n;for(n=0;n<r;n++)if(i[n].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Yn(),Qt._addAnimation(this),this}stop(){return Qt._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){var i=t.id,r=this.animations,n=r.length,s;for(s=0;s<n;s++)if(r[s].id===i){this.animations.splice(s,1);break}}static _runFrames(){var t={},i=this.animations,r,n,s,a,o,l,h,c,f;for(a=0;a<i.length;a++)if(r=i[a],n=r.layers,s=r.func,r._updateFrameObject(Yn()),l=n.length,s?f=s.call(r,r.frame)!==!1:f=!0,!!f)for(o=0;o<l;o++)h=n[o],h._id!==void 0&&(t[h._id]=h);for(c in t)!t.hasOwnProperty(c)||t[c].batchDraw()}static _animationLoop(){var t=Qt;t.animations.length?(t._runFrames(),E.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,E.requestAnimFrame(this._animationLoop))}}Qt.animations=[];Qt.animIdCounter=0;Qt.animRunning=!1;var pg={node:1,duration:1,easing:1,onFinish:1,yoyo:1},vg=1,ao=2,oo=3,mg=0,lo=["fill","stroke","shadowColor"];class _g{constructor(t,i,r,n,s,a,o){this.prop=t,this.propFunc=i,this.begin=n,this._pos=n,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=s-this.begin,this.pause()}fire(t){var i=this[t];i&&i()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=ao,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=oo,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var t=this.getTimer()-this._startTime;this.state===ao?this.setTime(t):this.state===oo&&this.setTime(this.duration-t)}pause(){this.state=vg,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Tt{constructor(t){var i=this,r=t.node,n=r._id,s,a=t.easing||ar.Linear,o=!!t.yoyo,l;typeof t.duration>"u"?s=.3:t.duration===0?s=.001:s=t.duration,this.node=r,this._id=mg++;var h=r.getLayer()||(r instanceof V.Stage?r.getLayers():null);h||E.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Qt(function(){i.tween.onEnterFrame()},h),this.tween=new _g(l,function(c){i._tweenFunc(c)},a,0,1,s*1e3,o),this._addListeners(),Tt.attrs[n]||(Tt.attrs[n]={}),Tt.attrs[n][this._id]||(Tt.attrs[n][this._id]={}),Tt.tweens[n]||(Tt.tweens[n]={});for(l in t)pg[l]===void 0&&this._addAttr(l,t[l]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,i){var r=this.node,n=r._id,s,a,o,l,h,c,f,u;if(o=Tt.tweens[n][t],o&&delete Tt.attrs[n][o][t],s=r.getAttr(t),E._isArray(i))if(a=[],h=Math.max(i.length,s.length),t==="points"&&i.length!==s.length&&(i.length>s.length?(f=s,s=E._prepareArrayForTween(s,i,r.closed())):(c=i,i=E._prepareArrayForTween(i,s,r.closed()))),t.indexOf("fill")===0)for(l=0;l<h;l++)if(l%2===0)a.push(i[l]-s[l]);else{var g=E.colorToRGBA(s[l]);u=E.colorToRGBA(i[l]),s[l]=g,a.push({r:u.r-g.r,g:u.g-g.g,b:u.b-g.b,a:u.a-g.a})}else for(l=0;l<h;l++)a.push(i[l]-s[l]);else lo.indexOf(t)!==-1?(s=E.colorToRGBA(s),u=E.colorToRGBA(i),a={r:u.r-s.r,g:u.g-s.g,b:u.b-s.b,a:u.a-s.a}):a=i-s;Tt.attrs[n][this._id][t]={start:s,diff:a,end:i,trueEnd:c,trueStart:f},Tt.tweens[n][t]=this._id}_tweenFunc(t){var i=this.node,r=Tt.attrs[i._id][this._id],n,s,a,o,l,h,c,f;for(n in r){if(s=r[n],a=s.start,o=s.diff,f=s.end,E._isArray(a))if(l=[],c=Math.max(a.length,f.length),n.indexOf("fill")===0)for(h=0;h<c;h++)h%2===0?l.push((a[h]||0)+o[h]*t):l.push("rgba("+Math.round(a[h].r+o[h].r*t)+","+Math.round(a[h].g+o[h].g*t)+","+Math.round(a[h].b+o[h].b*t)+","+(a[h].a+o[h].a*t)+")");else for(h=0;h<c;h++)l.push((a[h]||0)+o[h]*t);else lo.indexOf(n)!==-1?l="rgba("+Math.round(a.r+o.r*t)+","+Math.round(a.g+o.g*t)+","+Math.round(a.b+o.b*t)+","+(a.a+o.a*t)+")":l=a+o*t;i.setAttr(n,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var t=this.node,i=Tt.attrs[t._id][this._id];i.points&&i.points.trueEnd&&t.setAttr("points",i.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var t=this.node,i=Tt.attrs[t._id][this._id];i.points&&i.points.trueStart&&t.points(i.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var t=this.node._id,i=this._id,r=Tt.tweens[t],n;this.pause();for(n in r)delete Tt.tweens[t][n];delete Tt.attrs[t][i]}}Tt.attrs={};Tt.tweens={};U.prototype.to=function(e){var t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()};var i=new Tt(e);i.play()};const ar={BackEaseIn(e,t,i,r){var n=1.70158;return i*(e/=r)*e*((n+1)*e-n)+t},BackEaseOut(e,t,i,r){var n=1.70158;return i*((e=e/r-1)*e*((n+1)*e+n)+1)+t},BackEaseInOut(e,t,i,r){var n=1.70158;return(e/=r/2)<1?i/2*(e*e*(((n*=1.525)+1)*e-n))+t:i/2*((e-=2)*e*(((n*=1.525)+1)*e+n)+2)+t},ElasticEaseIn(e,t,i,r,n,s){var a=0;return e===0?t:(e/=r)===1?t+i:(s||(s=r*.3),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),-(n*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/s))+t)},ElasticEaseOut(e,t,i,r,n,s){var a=0;return e===0?t:(e/=r)===1?t+i:(s||(s=r*.3),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*e)*Math.sin((e*r-a)*(2*Math.PI)/s)+i+t)},ElasticEaseInOut(e,t,i,r,n,s){var a=0;return e===0?t:(e/=r/2)===2?t+i:(s||(s=r*(.3*1.5)),!n||n<Math.abs(i)?(n=i,a=s/4):a=s/(2*Math.PI)*Math.asin(i/n),e<1?-.5*(n*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/s))+t:n*Math.pow(2,-10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/s)*.5+i+t)},BounceEaseOut(e,t,i,r){return(e/=r)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn(e,t,i,r){return i-ar.BounceEaseOut(r-e,0,i,r)+t},BounceEaseInOut(e,t,i,r){return e<r/2?ar.BounceEaseIn(e*2,0,i,r)*.5+t:ar.BounceEaseOut(e*2-r,0,i,r)*.5+i*.5+t},EaseIn(e,t,i,r){return i*(e/=r)*e+t},EaseOut(e,t,i,r){return-i*(e/=r)*(e-2)+t},EaseInOut(e,t,i,r){return(e/=r/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},StrongEaseIn(e,t,i,r){return i*(e/=r)*e*e*e*e+t},StrongEaseOut(e,t,i,r){return i*((e=e/r-1)*e*e*e*e+1)+t},StrongEaseInOut(e,t,i,r){return(e/=r/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},Linear(e,t,i,r){return i*e/r+t}},ho=E._assign(V,{Util:E,Transform:Xt,Node:U,Container:Vt,Stage:Rn,stages:tn,Layer:li,FastLayer:aa,Group:Oi,DD:ct,Shape:G,shapes:sr,Animation:Qt,Tween:Tt,Easings:ar,Context:kn,Canvas:Mn});class we extends G{_sceneFunc(t){var i=V.getAngle(this.angle()),r=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,i,r),t.arc(0,0,this.innerRadius(),i,0,!r),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),i=this.outerRadius(),r=this.clockwise(),n=V.getAngle(r?360-this.angle():this.angle()),s=Math.cos(Math.min(n,Math.PI)),a=1,o=Math.sin(Math.min(Math.max(Math.PI,n),3*Math.PI/2)),l=Math.sin(Math.min(n,Math.PI/2)),h=s*(s>0?t:i),c=a*i,f=o*(o>0?t:i),u=l*(l>0?i:t);return{x:h,y:r?-1*u:f,width:c-h,height:u-f}}}we.prototype._centroid=!0;we.prototype.className="Arc";we.prototype._attrsAffectingSize=["innerRadius","outerRadius"];St(we);m.addGetterSetter(we,"innerRadius",0,H());m.addGetterSetter(we,"outerRadius",0,H());m.addGetterSetter(we,"angle",0,H());m.addGetterSetter(we,"clockwise",!1,re());function _s(e,t,i,r,n,s,a){var o=Math.sqrt(Math.pow(i-e,2)+Math.pow(r-t,2)),l=Math.sqrt(Math.pow(n-i,2)+Math.pow(s-r,2)),h=a*o/(o+l),c=a*l/(o+l),f=i-h*(n-e),u=r-h*(s-t),g=i+c*(n-e),d=r+c*(s-t);return[f,u,g,d]}function co(e,t){var i=e.length,r=[],n,s;for(n=2;n<i-2;n+=2)s=_s(e[n-2],e[n-1],e[n],e[n+1],e[n+2],e[n+3],t),!isNaN(s[0])&&(r.push(s[0]),r.push(s[1]),r.push(e[n]),r.push(e[n+1]),r.push(s[2]),r.push(s[3]));return r}class xe extends G{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){var i=this.points(),r=i.length,n=this.tension(),s=this.closed(),a=this.bezier(),o,l,h;if(!!r){if(t.beginPath(),t.moveTo(i[0],i[1]),n!==0&&r>4){for(o=this.getTensionPoints(),l=o.length,h=s?0:4,s||t.quadraticCurveTo(o[0],o[1],o[2],o[3]);h<l-2;)t.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);s||t.quadraticCurveTo(o[l-2],o[l-1],i[r-2],i[r-1])}else if(a)for(h=2;h<r;)t.bezierCurveTo(i[h++],i[h++],i[h++],i[h++],i[h++],i[h++]);else for(h=2;h<r;h+=2)t.lineTo(i[h],i[h+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():co(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),i=t.length,r=this.tension(),n=_s(t[i-2],t[i-1],t[0],t[1],t[2],t[3],r),s=_s(t[i-4],t[i-3],t[i-2],t[i-1],t[0],t[1],r),a=co(t,r),o=[n[2],n[3]].concat(a).concat([s[0],s[1],t[i-2],t[i-1],s[2],s[3],n[0],n[1],t[0],t[1]]);return o}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();for(var i=t[0],r=t[0],n=t[1],s=t[1],a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],i=Math.min(i,a),r=Math.max(r,a),n=Math.min(n,o),s=Math.max(s,o);return{x:i,y:n,width:r-i,height:s-n}}}xe.prototype.className="Line";xe.prototype._attrsAffectingSize=["points","bezier","tension"];St(xe);m.addGetterSetter(xe,"closed",!1);m.addGetterSetter(xe,"bezier",!1);m.addGetterSetter(xe,"tension",0,H());m.addGetterSetter(xe,"points",[],Ad());class pt extends G{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this.dataArray=pt.parsePathData(this.data()),this.pathLength=0;for(var i=0;i<this.dataArray.length;++i)this.pathLength+=this.dataArray[i].pathLength;this.on("dataChange.konva",function(){this.dataArray=pt.parsePathData(this.data()),this.pathLength=0;for(var r=0;r<this.dataArray.length;++r)this.pathLength+=this.dataArray[r].pathLength})}_sceneFunc(t){var i=this.dataArray;t.beginPath();for(var r=!1,n=0;n<i.length;n++){var s=i[n].command,a=i[n].points;switch(s){case"L":t.lineTo(a[0],a[1]);break;case"M":t.moveTo(a[0],a[1]);break;case"C":t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"Q":t.quadraticCurveTo(a[0],a[1],a[2],a[3]);break;case"A":var o=a[0],l=a[1],h=a[2],c=a[3],f=a[4],u=a[5],g=a[6],d=a[7],b=h>c?h:c,C=h>c?1:h/c,_=h>c?c/h:1;t.translate(o,l),t.rotate(g),t.scale(C,_),t.arc(0,0,b,f,f+u,1-d),t.scale(1/C,1/_),t.rotate(-g),t.translate(-o,-l);break;case"z":r=!0,t.closePath();break}}!r&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){var t=[];this.dataArray.forEach(function(h){if(h.command==="A"){var c=h.points[4],f=h.points[5],u=h.points[4]+f,g=Math.PI/180;if(Math.abs(c-u)<g&&(g=Math.abs(c-u)),f<0)for(let d=c-g;d>u;d-=g){const b=pt.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],d,0);t.push(b.x,b.y)}else for(let d=c+g;d<u;d+=g){const b=pt.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],d,0);t.push(b.x,b.y)}}else if(h.command==="C")for(let d=0;d<=1;d+=.01){const b=pt.getPointOnCubicBezier(d,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);t.push(b.x,b.y)}else t=t.concat(h.points)});for(var i=t[0],r=t[0],n=t[1],s=t[1],a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],isNaN(a)||(i=Math.min(i,a),r=Math.max(r,a)),isNaN(o)||(n=Math.min(n,o),s=Math.max(s,o));return{x:i,y:n,width:r-i,height:s-n}}getLength(){return this.pathLength}getPointAtLength(t){var i,r=0,n=this.dataArray.length;if(!n)return null;for(;r<n&&t>this.dataArray[r].pathLength;)t-=this.dataArray[r].pathLength,++r;if(r===n)return i=this.dataArray[r-1].points.slice(-2),{x:i[0],y:i[1]};if(t<.01)return i=this.dataArray[r].points.slice(0,2),{x:i[0],y:i[1]};var s=this.dataArray[r],a=s.points;switch(s.command){case"L":return pt.getPointOnLine(t,s.start.x,s.start.y,a[0],a[1]);case"C":return pt.getPointOnCubicBezier(t/s.pathLength,s.start.x,s.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return pt.getPointOnQuadraticBezier(t/s.pathLength,s.start.x,s.start.y,a[0],a[1],a[2],a[3]);case"A":var o=a[0],l=a[1],h=a[2],c=a[3],f=a[4],u=a[5],g=a[6];return f+=u*t/s.pathLength,pt.getPointOnEllipticalArc(o,l,h,c,f,g)}return null}static getLineLength(t,i,r,n){return Math.sqrt((r-t)*(r-t)+(n-i)*(n-i))}static getPointOnLine(t,i,r,n,s,a,o){a===void 0&&(a=i),o===void 0&&(o=r);var l=(s-r)/(n-i+1e-8),h=Math.sqrt(t*t/(1+l*l));n<i&&(h*=-1);var c=l*h,f;if(n===i)f={x:a,y:o+c};else if((o-r)/(a-i+1e-8)===l)f={x:a+h,y:o+c};else{var u,g,d=this.getLineLength(i,r,n,s),b=(a-i)*(n-i)+(o-r)*(s-r);b=b/(d*d),u=i+b*(n-i),g=r+b*(s-r);var C=this.getLineLength(a,o,u,g),_=Math.sqrt(t*t-C*C);h=Math.sqrt(_*_/(1+l*l)),n<i&&(h*=-1),c=l*h,f={x:u+h,y:g+c}}return f}static getPointOnCubicBezier(t,i,r,n,s,a,o,l,h){function c(C){return C*C*C}function f(C){return 3*C*C*(1-C)}function u(C){return 3*C*(1-C)*(1-C)}function g(C){return(1-C)*(1-C)*(1-C)}var d=l*c(t)+a*f(t)+n*u(t)+i*g(t),b=h*c(t)+o*f(t)+s*u(t)+r*g(t);return{x:d,y:b}}static getPointOnQuadraticBezier(t,i,r,n,s,a,o){function l(g){return g*g}function h(g){return 2*g*(1-g)}function c(g){return(1-g)*(1-g)}var f=a*l(t)+n*h(t)+i*c(t),u=o*l(t)+s*h(t)+r*c(t);return{x:f,y:u}}static getPointOnEllipticalArc(t,i,r,n,s,a){var o=Math.cos(a),l=Math.sin(a),h={x:r*Math.cos(s),y:n*Math.sin(s)};return{x:t+(h.x*o-h.y*l),y:i+(h.x*l+h.y*o)}}static parsePathData(t){if(!t)return[];var i=t,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(new RegExp(" ","g"),",");for(var n=0;n<r.length;n++)i=i.replace(new RegExp(r[n],"g"),"|"+r[n]);var s=i.split("|"),a=[],o=[],l=0,h=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,f;for(n=1;n<s.length;n++){var u=s[n],g=u.charAt(0);for(u=u.slice(1),o.length=0;f=c.exec(u);)o.push(f[0]);for(var d=[],b=0,C=o.length;b<C;b++){if(o[b]==="00"){d.push(0,0);continue}var _=parseFloat(o[b]);isNaN(_)?d.push(0):d.push(_)}for(;d.length>0&&!isNaN(d[0]);){var p=null,v=[],S=l,P=h,T,A,x,L,R,I,D,M,k,X;switch(g){case"l":l+=d.shift(),h+=d.shift(),p="L",v.push(l,h);break;case"L":l=d.shift(),h=d.shift(),v.push(l,h);break;case"m":var W=d.shift(),$=d.shift();if(l+=W,h+=$,p="M",a.length>2&&a[a.length-1].command==="z"){for(var Z=a.length-2;Z>=0;Z--)if(a[Z].command==="M"){l=a[Z].points[0]+W,h=a[Z].points[1]+$;break}}v.push(l,h),g="l";break;case"M":l=d.shift(),h=d.shift(),p="M",v.push(l,h),g="L";break;case"h":l+=d.shift(),p="L",v.push(l,h);break;case"H":l=d.shift(),p="L",v.push(l,h);break;case"v":h+=d.shift(),p="L",v.push(l,h);break;case"V":h=d.shift(),p="L",v.push(l,h);break;case"C":v.push(d.shift(),d.shift(),d.shift(),d.shift()),l=d.shift(),h=d.shift(),v.push(l,h);break;case"c":v.push(l+d.shift(),h+d.shift(),l+d.shift(),h+d.shift()),l+=d.shift(),h+=d.shift(),p="C",v.push(l,h);break;case"S":A=l,x=h,T=a[a.length-1],T.command==="C"&&(A=l+(l-T.points[2]),x=h+(h-T.points[3])),v.push(A,x,d.shift(),d.shift()),l=d.shift(),h=d.shift(),p="C",v.push(l,h);break;case"s":A=l,x=h,T=a[a.length-1],T.command==="C"&&(A=l+(l-T.points[2]),x=h+(h-T.points[3])),v.push(A,x,l+d.shift(),h+d.shift()),l+=d.shift(),h+=d.shift(),p="C",v.push(l,h);break;case"Q":v.push(d.shift(),d.shift()),l=d.shift(),h=d.shift(),v.push(l,h);break;case"q":v.push(l+d.shift(),h+d.shift()),l+=d.shift(),h+=d.shift(),p="Q",v.push(l,h);break;case"T":A=l,x=h,T=a[a.length-1],T.command==="Q"&&(A=l+(l-T.points[0]),x=h+(h-T.points[1])),l=d.shift(),h=d.shift(),p="Q",v.push(A,x,l,h);break;case"t":A=l,x=h,T=a[a.length-1],T.command==="Q"&&(A=l+(l-T.points[0]),x=h+(h-T.points[1])),l+=d.shift(),h+=d.shift(),p="Q",v.push(A,x,l,h);break;case"A":L=d.shift(),R=d.shift(),I=d.shift(),D=d.shift(),M=d.shift(),k=l,X=h,l=d.shift(),h=d.shift(),p="A",v=this.convertEndpointToCenterParameterization(k,X,l,h,D,M,L,R,I);break;case"a":L=d.shift(),R=d.shift(),I=d.shift(),D=d.shift(),M=d.shift(),k=l,X=h,l+=d.shift(),h+=d.shift(),p="A",v=this.convertEndpointToCenterParameterization(k,X,l,h,D,M,L,R,I);break}a.push({command:p||g,points:v,start:{x:S,y:P},pathLength:this.calcLength(S,P,p||g,v)})}(g==="z"||g==="Z")&&a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}static calcLength(t,i,r,n){var s,a,o,l,h=pt;switch(r){case"L":return h.getLineLength(t,i,n[0],n[1]);case"C":for(s=0,a=h.getPointOnCubicBezier(0,t,i,n[0],n[1],n[2],n[3],n[4],n[5]),l=.01;l<=1;l+=.01)o=h.getPointOnCubicBezier(l,t,i,n[0],n[1],n[2],n[3],n[4],n[5]),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case"Q":for(s=0,a=h.getPointOnQuadraticBezier(0,t,i,n[0],n[1],n[2],n[3]),l=.01;l<=1;l+=.01)o=h.getPointOnQuadraticBezier(l,t,i,n[0],n[1],n[2],n[3]),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case"A":s=0;var c=n[4],f=n[5],u=n[4]+f,g=Math.PI/180;if(Math.abs(c-u)<g&&(g=Math.abs(c-u)),a=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),f<0)for(l=c-g;l>u;l-=g)o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(l=c+g;l<u;l+=g)o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),s}return 0}static convertEndpointToCenterParameterization(t,i,r,n,s,a,o,l,h){var c=h*(Math.PI/180),f=Math.cos(c)*(t-r)/2+Math.sin(c)*(i-n)/2,u=-1*Math.sin(c)*(t-r)/2+Math.cos(c)*(i-n)/2,g=f*f/(o*o)+u*u/(l*l);g>1&&(o*=Math.sqrt(g),l*=Math.sqrt(g));var d=Math.sqrt((o*o*(l*l)-o*o*(u*u)-l*l*(f*f))/(o*o*(u*u)+l*l*(f*f)));s===a&&(d*=-1),isNaN(d)&&(d=0);var b=d*o*u/l,C=d*-l*f/o,_=(t+r)/2+Math.cos(c)*b-Math.sin(c)*C,p=(i+n)/2+Math.sin(c)*b+Math.cos(c)*C,v=function(R){return Math.sqrt(R[0]*R[0]+R[1]*R[1])},S=function(R,I){return(R[0]*I[0]+R[1]*I[1])/(v(R)*v(I))},P=function(R,I){return(R[0]*I[1]<R[1]*I[0]?-1:1)*Math.acos(S(R,I))},T=P([1,0],[(f-b)/o,(u-C)/l]),A=[(f-b)/o,(u-C)/l],x=[(-1*f-b)/o,(-1*u-C)/l],L=P(A,x);return S(A,x)<=-1&&(L=Math.PI),S(A,x)>=1&&(L=0),a===0&&L>0&&(L=L-2*Math.PI),a===1&&L<0&&(L=L+2*Math.PI),[_,p,o,l,T,L,c,a]}}pt.prototype.className="Path";pt.prototype._attrsAffectingSize=["data"];St(pt);m.addGetterSetter(pt,"data");class hi extends xe{_sceneFunc(t){super._sceneFunc(t);var i=Math.PI*2,r=this.points(),n=r,s=this.tension()!==0&&r.length>4;s&&(n=this.getTensionPoints());var a=this.pointerLength(),o=r.length,l,h;if(s){const u=[n[n.length-4],n[n.length-3],n[n.length-2],n[n.length-1],r[o-2],r[o-1]],g=pt.calcLength(n[n.length-4],n[n.length-3],"C",u),d=pt.getPointOnQuadraticBezier(Math.min(1,1-a/g),u[0],u[1],u[2],u[3],u[4],u[5]);l=r[o-2]-d.x,h=r[o-1]-d.y}else l=r[o-2]-r[o-4],h=r[o-1]-r[o-3];var c=(Math.atan2(h,l)+i)%i,f=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(r[o-2],r[o-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-a,f/2),t.lineTo(-a,-f/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(r[0],r[1]),s?(l=(n[0]+n[2])/2-r[0],h=(n[1]+n[3])/2-r[1]):(l=r[2]-r[0],h=r[3]-r[1]),t.rotate((Math.atan2(-h,-l)+i)%i),t.moveTo(0,0),t.lineTo(-a,f/2),t.lineTo(-a,-f/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){var i=this.dashEnabled();i&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),i&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),i=this.pointerWidth()/2;return{x:t.x-i,y:t.y-i,width:t.width+i*2,height:t.height+i*2}}}hi.prototype.className="Arrow";St(hi);m.addGetterSetter(hi,"pointerLength",10,H());m.addGetterSetter(hi,"pointerWidth",10,H());m.addGetterSetter(hi,"pointerAtBeginning",!1);m.addGetterSetter(hi,"pointerAtEnding",!0);class Fi extends G{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Fi.prototype._centroid=!0;Fi.prototype.className="Circle";Fi.prototype._attrsAffectingSize=["radius"];St(Fi);m.addGetterSetter(Fi,"radius",0,H());class We extends G{_sceneFunc(t){var i=this.radiusX(),r=this.radiusY();t.beginPath(),t.save(),i!==r&&t.scale(1,r/i),t.arc(0,0,i,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}We.prototype.className="Ellipse";We.prototype._centroid=!0;We.prototype._attrsAffectingSize=["radiusX","radiusY"];St(We);m.addComponentsGetterSetter(We,"radius",["x","y"]);m.addGetterSetter(We,"radiusX",0,H());m.addGetterSetter(We,"radiusY",0,H());class ne extends G{constructor(t){super(t),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(t){const i=this.getWidth(),r=this.getHeight(),n=this.attrs.image;let s;if(n){const a=this.attrs.cropWidth,o=this.attrs.cropHeight;a&&o?s=[n,this.cropX(),this.cropY(),a,o,0,0,i,r]:s=[n,0,0,i,r]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)),n&&t.drawImage.apply(t,s)}_hitFunc(t){var i=this.width(),r=this.height();t.beginPath(),t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,i;return(t=this.attrs.width)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.width}getHeight(){var t,i;return(t=this.attrs.height)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.height}static fromURL(t,i,r=null){var n=E.createImageElement();n.onload=function(){var s=new ne({image:n});i(s)},n.onerror=r,n.crossOrigin="Anonymous",n.src=t}}ne.prototype.className="Image";St(ne);m.addGetterSetter(ne,"image");m.addComponentsGetterSetter(ne,"crop",["x","y","width","height"]);m.addGetterSetter(ne,"cropX",0,H());m.addGetterSetter(ne,"cropY",0,H());m.addGetterSetter(ne,"cropWidth",0,H());m.addGetterSetter(ne,"cropHeight",0,H());var Eh=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],yg="Change.konva",bg="none",ys="up",bs="right",Cs="down",Ss="left",Cg=Eh.length;class oa extends Oi{constructor(t){super(t),this.on("add.konva",function(i){this._addListeners(i.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var i=this,r,n=function(){i._sync()};for(r=0;r<Cg;r++)t.on(Eh[r]+yg,n)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var t=this.getText(),i=this.getTag(),r,n,s,a,o,l,h;if(t&&i){switch(r=t.width(),n=t.height(),s=i.pointerDirection(),a=i.pointerWidth(),h=i.pointerHeight(),o=0,l=0,s){case ys:o=r/2,l=-1*h;break;case bs:o=r+a,l=n/2;break;case Cs:o=r/2,l=n+h;break;case Ss:o=-1*a,l=n/2;break}i.setAttrs({x:-1*o,y:-1*l,width:r,height:n}),t.setAttrs({x:-1*o,y:-1*l})}}}oa.prototype.className="Label";St(oa);class ci extends G{_sceneFunc(t){var i=this.width(),r=this.height(),n=this.pointerDirection(),s=this.pointerWidth(),a=this.pointerHeight(),o=this.cornerRadius();let l=0,h=0,c=0,f=0;typeof o=="number"?l=h=c=f=Math.min(o,i/2,r/2):(l=Math.min(o[0]||0,i/2,r/2),h=Math.min(o[1]||0,i/2,r/2),f=Math.min(o[2]||0,i/2,r/2),c=Math.min(o[3]||0,i/2,r/2)),t.beginPath(),t.moveTo(l,0),n===ys&&(t.lineTo((i-s)/2,0),t.lineTo(i/2,-1*a),t.lineTo((i+s)/2,0)),t.lineTo(i-h,0),t.arc(i-h,h,h,Math.PI*3/2,0,!1),n===bs&&(t.lineTo(i,(r-a)/2),t.lineTo(i+s,r/2),t.lineTo(i,(r+a)/2)),t.lineTo(i,r-f),t.arc(i-f,r-f,f,0,Math.PI/2,!1),n===Cs&&(t.lineTo((i+s)/2,r),t.lineTo(i/2,r+a),t.lineTo((i-s)/2,r)),t.lineTo(c,r),t.arc(c,r-c,c,Math.PI/2,Math.PI,!1),n===Ss&&(t.lineTo(0,(r+a)/2),t.lineTo(-1*s,r/2),t.lineTo(0,(r-a)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,i=0,r=this.pointerWidth(),n=this.pointerHeight(),s=this.pointerDirection(),a=this.width(),o=this.height();return s===ys?(i-=n,o+=n):s===Cs?o+=n:s===Ss?(t-=r*1.5,a+=r):s===bs&&(a+=r*1.5),{x:t,y:i,width:a,height:o}}}ci.prototype.className="Tag";St(ci);m.addGetterSetter(ci,"pointerDirection",bg);m.addGetterSetter(ci,"pointerWidth",0,H());m.addGetterSetter(ci,"pointerHeight",0,H());m.addGetterSetter(ci,"cornerRadius",0,nh(4));class Tr extends G{_sceneFunc(t){var i=this.cornerRadius(),r=this.width(),n=this.height();if(t.beginPath(),!i)t.rect(0,0,r,n);else{let s=0,a=0,o=0,l=0;typeof i=="number"?s=a=o=l=Math.min(i,r/2,n/2):(s=Math.min(i[0]||0,r/2,n/2),a=Math.min(i[1]||0,r/2,n/2),l=Math.min(i[2]||0,r/2,n/2),o=Math.min(i[3]||0,r/2,n/2)),t.moveTo(s,0),t.lineTo(r-a,0),t.arc(r-a,a,a,Math.PI*3/2,0,!1),t.lineTo(r,n-l),t.arc(r-l,n-l,l,0,Math.PI/2,!1),t.lineTo(o,n),t.arc(o,n-o,o,Math.PI/2,Math.PI,!1),t.lineTo(0,s),t.arc(s,s,s,Math.PI,Math.PI*3/2,!1)}t.closePath(),t.fillStrokeShape(this)}}Tr.prototype.className="Rect";St(Tr);m.addGetterSetter(Tr,"cornerRadius",0,nh(4));class fi extends G{_sceneFunc(t){const i=this._getPoints();t.beginPath(),t.moveTo(i[0].x,i[0].y);for(var r=1;r<i.length;r++)t.lineTo(i[r].x,i[r].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,i=this.attrs.radius||0,r=[];for(var n=0;n<t;n++)r.push({x:i*Math.sin(n*2*Math.PI/t),y:-1*i*Math.cos(n*2*Math.PI/t)});return r}getSelfRect(){const t=this._getPoints();var i=t[0].x,r=t[0].y,n=t[0].x,s=t[0].y;return t.forEach(a=>{i=Math.min(i,a.x),r=Math.max(r,a.x),n=Math.min(n,a.y),s=Math.max(s,a.y)}),{x:i,y:n,width:r-i,height:s-n}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}fi.prototype.className="RegularPolygon";fi.prototype._centroid=!0;fi.prototype._attrsAffectingSize=["radius"];St(fi);m.addGetterSetter(fi,"radius",0,H());m.addGetterSetter(fi,"sides",0,H());var fo=Math.PI*2;class ui extends G{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,fo,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),fo,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}ui.prototype.className="Ring";ui.prototype._centroid=!0;ui.prototype._attrsAffectingSize=["innerRadius","outerRadius"];St(ui);m.addGetterSetter(ui,"innerRadius",0,H());m.addGetterSetter(ui,"outerRadius",0,H());class ge extends G{constructor(t){super(t),this._updated=!0,this.anim=new Qt(()=>{var i=this._updated;return this._updated=!1,i}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){!this.anim.isRunning()||(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){var i=this.animation(),r=this.frameIndex(),n=r*4,s=this.animations()[i],a=this.frameOffsets(),o=s[n+0],l=s[n+1],h=s[n+2],c=s[n+3],f=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,c),t.closePath(),t.fillStrokeShape(this)),f)if(a){var u=a[i],g=r*2;t.drawImage(f,o,l,h,c,u[g+0],u[g+1],h,c)}else t.drawImage(f,o,l,h,c,0,0,h,c)}_hitFunc(t){var i=this.animation(),r=this.frameIndex(),n=r*4,s=this.animations()[i],a=this.frameOffsets(),o=s[n+2],l=s[n+3];if(t.beginPath(),a){var h=a[i],c=r*2;t.rect(h[c+0],h[c+1],o,l)}else t.rect(0,0,o,l);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var t=this.frameIndex(),i=this.animation(),r=this.animations(),n=r[i],s=n.length/4;t<s-1?this.frameIndex(t+1):this.frameIndex(0)}}ge.prototype.className="Sprite";St(ge);m.addGetterSetter(ge,"animation");m.addGetterSetter(ge,"animations");m.addGetterSetter(ge,"frameOffsets");m.addGetterSetter(ge,"image");m.addGetterSetter(ge,"frameIndex",0,H());m.addGetterSetter(ge,"frameRate",17,H());m.backCompat(ge,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class ze extends G{_sceneFunc(t){var i=this.innerRadius(),r=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-r);for(var s=1;s<n*2;s++){var a=s%2===0?r:i,o=a*Math.sin(s*Math.PI/n),l=-1*a*Math.cos(s*Math.PI/n);t.lineTo(o,l)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}ze.prototype.className="Star";ze.prototype._centroid=!0;ze.prototype._attrsAffectingSize=["innerRadius","outerRadius"];St(ze);m.addGetterSetter(ze,"numPoints",5,H());m.addGetterSetter(ze,"innerRadius",0,H());m.addGetterSetter(ze,"outerRadius",0,H());function Th(e){return Array.from(e)}var vi="auto",Sg="center",zi="justify",wg="Change.konva",xg="2d",uo="-",Ph="left",Eg="text",Tg="Text",Pg="top",Ag="bottom",go="middle",Ah="normal",kg="px ",Kr=" ",Mg="right",Rg="word",Og="char",po="none",Xn="\u2026",kh=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Lg=kh.length;function Ig(e){return e.split(",").map(t=>{t=t.trim();const i=t.indexOf(" ")>=0,r=t.indexOf('"')>=0||t.indexOf("'")>=0;return i&&!r&&(t=`"${t}"`),t}).join(", ")}var Vr;function Kn(){return Vr||(Vr=E.createCanvasElement().getContext(xg),Vr)}function Dg(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Fg(e){e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Ng(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class Ct extends G{constructor(t){super(Ng(t)),this._partialTextX=0,this._partialTextY=0;for(var i=0;i<Lg;i++)this.on(kh[i]+wg,this._setTextData);this._setTextData()}_sceneFunc(t){var i=this.textArr,r=i.length;if(!!this.text()){var n=this.padding(),s=this.fontSize(),a=this.lineHeight()*s,o=this.verticalAlign(),l=0,h=this.align(),c=this.getWidth(),f=this.letterSpacing(),u=this.fill(),g=this.textDecoration(),d=g.indexOf("underline")!==-1,b=g.indexOf("line-through")!==-1,C,_=0,_=a/2,p=0,v=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",go),t.setAttr("textAlign",Ph),o===go?l=(this.getHeight()-r*a-n*2)/2:o===Ag&&(l=this.getHeight()-r*a-n*2),t.translate(n,l+n),C=0;C<r;C++){var p=0,v=0,S=i[C],P=S.text,T=S.width,A=S.lastInParagraph,x,L,R;if(t.save(),h===Mg?p+=c-T-n*2:h===Sg&&(p+=(c-T-n*2)/2),d&&(t.save(),t.beginPath(),t.moveTo(p,_+v+Math.round(s/2)),x=P.split(" ").length-1,L=x===0,R=h===zi&&A&&!L?c-n*2:T,t.lineTo(p+Math.round(R),_+v+Math.round(s/2)),t.lineWidth=s/15,t.strokeStyle=u,t.stroke(),t.restore()),b&&(t.save(),t.beginPath(),t.moveTo(p,_+v),x=P.split(" ").length-1,L=x===0,R=h===zi&&A&&!L?c-n*2:T,t.lineTo(p+Math.round(R),_+v),t.lineWidth=s/15,t.strokeStyle=u,t.stroke(),t.restore()),f!==0||h===zi){x=P.split(" ").length-1;for(var I=Th(P),D=0;D<I.length;D++){var M=I[D];M===" "&&!A&&h===zi&&(p+=(c-n*2-T)/x),this._partialTextX=p,this._partialTextY=_+v,this._partialText=M,t.fillStrokeShape(this),p+=this.measureSize(M).width+f}}else this._partialTextX=p,this._partialTextY=_+v,this._partialText=P,t.fillStrokeShape(this);t.restore(),r>1&&(_+=a)}}}_hitFunc(t){var i=this.getWidth(),r=this.getHeight();t.beginPath(),t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)}setText(t){var i=E._isString(t)?t:t==null?"":t+"";return this._setAttr(Eg,i),this}getWidth(){var t=this.attrs.width===vi||this.attrs.width===void 0;return t?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var t=this.attrs.height===vi||this.attrs.height===void 0;return t?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return E.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var i=Kn(),r=this.fontSize(),n;return i.save(),i.font=this._getContextFont(),n=i.measureText(t),i.restore(),{width:n.width,height:r}}_getContextFont(){return this.fontStyle()+Kr+this.fontVariant()+Kr+(this.fontSize()+kg)+Ig(this.fontFamily())}_addTextLine(t){this.align()===zi&&(t=t.trim());var i=this._getTextWidth(t);return this.textArr.push({text:t,width:i,lastInParagraph:!1})}_getTextWidth(t){var i=this.letterSpacing(),r=t.length;return Kn().measureText(t).width+(r?i*(r-1):0)}_setTextData(){var t=this.text().split(`
`),i=+this.fontSize(),r=0,n=this.lineHeight()*i,s=this.attrs.width,a=this.attrs.height,o=s!==vi&&s!==void 0,l=a!==vi&&a!==void 0,h=this.padding(),c=s-h*2,f=a-h*2,u=0,g=this.wrap(),d=g!==po,b=g!==Og&&d,C=this.ellipsis();this.textArr=[],Kn().font=this._getContextFont();for(var _=C?this._getTextWidth(Xn):0,p=0,v=t.length;p<v;++p){var S=t[p],P=this._getTextWidth(S);if(o&&P>c)for(;S.length>0;){for(var T=0,A=S.length,x="",L=0;T<A;){var R=T+A>>>1,I=S.slice(0,R+1),D=this._getTextWidth(I)+_;D<=c?(T=R+1,x=I,L=D):A=R}if(x){if(b){var M,k=S[x.length],X=k===Kr||k===uo;X&&L<=c?M=x.length:M=Math.max(x.lastIndexOf(Kr),x.lastIndexOf(uo))+1,M>0&&(T=M,x=x.slice(0,T),L=this._getTextWidth(x))}x=x.trimRight(),this._addTextLine(x),r=Math.max(r,L),u+=n;var W=this._shouldHandleEllipsis(u);if(W){this._tryToAddEllipsisToLastLine();break}if(S=S.slice(T),S=S.trimLeft(),S.length>0&&(P=this._getTextWidth(S),P<=c)){this._addTextLine(S),u+=n,r=Math.max(r,P);break}}else break}else this._addTextLine(S),u+=n,r=Math.max(r,P),this._shouldHandleEllipsis(u)&&p<v-1&&this._tryToAddEllipsisToLastLine();if(l&&u+n>f)break;this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0)}this.textHeight=i,this.textWidth=r}_shouldHandleEllipsis(t){var i=+this.fontSize(),r=this.lineHeight()*i,n=this.attrs.height,s=n!==vi&&n!==void 0,a=this.padding(),o=n-a*2,l=this.wrap(),h=l!==po;return!h||s&&t+r>o}_tryToAddEllipsisToLastLine(){var t=this.attrs.width,i=t!==vi&&t!==void 0,r=this.padding(),n=t-r*2,s=this.ellipsis(),a=this.textArr[this.textArr.length-1];if(!(!a||!s)){if(i){var o=this._getTextWidth(a.text+Xn)<n;o||(a.text=a.text.slice(0,a.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+Xn)}}getStrokeScaleEnabled(){return!0}}Ct.prototype._fillFunc=Dg;Ct.prototype._strokeFunc=Fg;Ct.prototype.className=Tg;Ct.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];St(Ct);m.overWriteSetter(Ct,"width",ra());m.overWriteSetter(Ct,"height",ra());m.addGetterSetter(Ct,"fontFamily","Arial");m.addGetterSetter(Ct,"fontSize",12,H());m.addGetterSetter(Ct,"fontStyle",Ah);m.addGetterSetter(Ct,"fontVariant",Ah);m.addGetterSetter(Ct,"padding",0,H());m.addGetterSetter(Ct,"align",Ph);m.addGetterSetter(Ct,"verticalAlign",Pg);m.addGetterSetter(Ct,"lineHeight",1,H());m.addGetterSetter(Ct,"wrap",Rg);m.addGetterSetter(Ct,"ellipsis",!1,re());m.addGetterSetter(Ct,"letterSpacing",0,H());m.addGetterSetter(Ct,"text","",Di());m.addGetterSetter(Ct,"textDecoration","");var Gg="",Mh="normal";function Rh(e){e.fillText(this.partialText,0,0)}function Oh(e){e.strokeText(this.partialText,0,0)}class Mt extends G{constructor(t){super(t),this.dummyCanvas=E.createCanvasElement(),this.dataArray=[],this.dataArray=pt.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=pt.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var i=this.textDecoration(),r=this.fill(),n=this.fontSize(),s=this.glyphInfo;i==="underline"&&t.beginPath();for(var a=0;a<s.length;a++){t.save();var o=s[a].p0;t.translate(o.x,o.y),t.rotate(s[a].rotation),this.partialText=s[a].text,t.fillStrokeShape(this),i==="underline"&&(a===0&&t.moveTo(0,n/2+1),t.lineTo(n,n/2+1)),t.restore()}i==="underline"&&(t.strokeStyle=r,t.lineWidth=n/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var i=this.glyphInfo;if(i.length>=1){var r=i[0].p0;t.moveTo(r.x,r.y)}for(var n=0;n<i.length;n++){var s=i[n].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return E.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Ct.prototype.setText.call(this,t)}_getContextFont(){return Ct.prototype._getContextFont.call(this)}_getTextSize(t){var i=this.dummyCanvas,r=i.getContext("2d");r.save(),r.font=this._getContextFont();var n=r.measureText(t);return r.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var t=this,i=this._getTextSize(this.attrs.text),r=this.letterSpacing(),n=this.align(),s=this.kerningFunc();this.textWidth=i.width,this.textHeight=i.height;var a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);this.glyphInfo=[];for(var o=0,l=0;l<t.dataArray.length;l++)t.dataArray[l].pathLength>0&&(o+=t.dataArray[l].pathLength);var h=0;n==="center"&&(h=Math.max(0,o/2-a/2)),n==="right"&&(h=Math.max(0,o-a));for(var c=Th(this.text()),f=this.text().split(" ").length-1,u,g,d,b=-1,C=0,_=function(){C=0;for(var D=t.dataArray,M=b+1;M<D.length;M++){if(D[M].pathLength>0)return b=M,D[M];D[M].command==="M"&&(u={x:D[M].points[0],y:D[M].points[1]})}return{}},p=function(D){var M=t._getTextSize(D).width+r;D===" "&&n==="justify"&&(M+=(o-a)/f);var k=0,X=0;for(g=void 0;Math.abs(M-k)/M>.01&&X<20;){X++;for(var W=k;d===void 0;)d=_(),d&&W+d.pathLength<M&&(W+=d.pathLength,d=void 0);if(Object.keys(d).length===0||u===void 0)return;var $=!1;switch(d.command){case"L":pt.getLineLength(u.x,u.y,d.points[0],d.points[1])>M?g=pt.getPointOnLine(M,u.x,u.y,d.points[0],d.points[1],u.x,u.y):d=void 0;break;case"A":var Z=d.points[4],st=d.points[5],q=d.points[4]+st;C===0?C=Z+1e-8:M>k?C+=Math.PI/180*st/Math.abs(st):C-=Math.PI/360*st/Math.abs(st),(st<0&&C<q||st>=0&&C>q)&&(C=q,$=!0),g=pt.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],C,d.points[6]);break;case"C":C===0?M>d.pathLength?C=1e-8:C=M/d.pathLength:M>k?C+=(M-k)/d.pathLength/2:C=Math.max(C-(k-M)/d.pathLength/2,0),C>1&&(C=1,$=!0),g=pt.getPointOnCubicBezier(C,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);break;case"Q":C===0?C=M/d.pathLength:M>k?C+=(M-k)/d.pathLength:C-=(k-M)/d.pathLength,C>1&&(C=1,$=!0),g=pt.getPointOnQuadraticBezier(C,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3]);break}g!==void 0&&(k=pt.getLineLength(u.x,u.y,g.x,g.y)),$&&($=!1,d=void 0)}},v="C",S=t._getTextSize(v).width+r,P=h/S-1,T=0;T<P&&(p(v),!(u===void 0||g===void 0));T++)u=g;for(var A=0;A<c.length&&(p(c[A]),!(u===void 0||g===void 0));A++){var x=pt.getLineLength(u.x,u.y,g.x,g.y),L=0;if(s)try{L=s(c[A-1],c[A])*this.fontSize()}catch{L=0}u.x+=L,g.x+=L,this.textWidth+=L;var R=pt.getPointOnLine(L+x/2,u.x,u.y,g.x,g.y),I=Math.atan2(g.y-u.y,g.x-u.x);this.glyphInfo.push({transposeX:R.x,transposeY:R.y,text:c[A],rotation:I,p0:u,p1:g}),u=g}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(c){t.push(c.p0.x),t.push(c.p0.y),t.push(c.p1.x),t.push(c.p1.y)});for(var i=t[0]||0,r=t[0]||0,n=t[1]||0,s=t[1]||0,a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],i=Math.min(i,a),r=Math.max(r,a),n=Math.min(n,o),s=Math.max(s,o);var h=this.fontSize();return{x:i-h/2,y:n-h/2,width:r-i+h,height:s-n+h}}destroy(){return E.releaseCanvas(this.dummyCanvas),super.destroy()}}Mt.prototype._fillFunc=Rh;Mt.prototype._strokeFunc=Oh;Mt.prototype._fillFuncHit=Rh;Mt.prototype._strokeFuncHit=Oh;Mt.prototype.className="TextPath";Mt.prototype._attrsAffectingSize=["text","fontSize","data"];St(Mt);m.addGetterSetter(Mt,"data");m.addGetterSetter(Mt,"fontFamily","Arial");m.addGetterSetter(Mt,"fontSize",12,H());m.addGetterSetter(Mt,"fontStyle",Mh);m.addGetterSetter(Mt,"align","left");m.addGetterSetter(Mt,"letterSpacing",0,H());m.addGetterSetter(Mt,"textBaseline","middle");m.addGetterSetter(Mt,"fontVariant",Mh);m.addGetterSetter(Mt,"text",Gg);m.addGetterSetter(Mt,"textDecoration",null);m.addGetterSetter(Mt,"kerningFunc",null);var Lh="tr-konva",Bg=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(e=>e+`.${Lh}`).join(" "),vo="nodesRect",Hg=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Ug={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Wg="ontouchstart"in V._global;function zg(e,t){if(e==="rotater")return"crosshair";t+=E.degToRad(Ug[e]||0);var i=(E.radToDeg(t)%360+360)%360;return E._inRange(i,315+22.5,360)||E._inRange(i,0,22.5)?"ns-resize":E._inRange(i,45-22.5,45+22.5)?"nesw-resize":E._inRange(i,90-22.5,90+22.5)?"ew-resize":E._inRange(i,135-22.5,135+22.5)?"nwse-resize":E._inRange(i,180-22.5,180+22.5)?"ns-resize":E._inRange(i,225-22.5,225+22.5)?"nesw-resize":E._inRange(i,270-22.5,270+22.5)?"ew-resize":E._inRange(i,315-22.5,315+22.5)?"nwse-resize":(E.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}var hn=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],mo=1e8;function jg(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function Ih(e,t,i){const r=i.x+(e.x-i.x)*Math.cos(t)-(e.y-i.y)*Math.sin(t),n=i.y+(e.x-i.x)*Math.sin(t)+(e.y-i.y)*Math.cos(t);return Object.assign(Object.assign({},e),{rotation:e.rotation+t,x:r,y:n})}function Yg(e,t){const i=jg(e);return Ih(e,t,i)}function Xg(e,t,i){let r=t;for(let n=0;n<e.length;n++){const s=V.getAngle(e[n]),a=Math.abs(s-t)%(Math.PI*2);Math.min(a,Math.PI*2-a)<i&&(r=s)}return r}class ut extends Oi{constructor(t){super(t),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Bg,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return E.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Lh+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const n=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},s=r._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");r.on(s,n),r.on(Hg.map(a=>a+`.${this._getEventNamespace()}`).join(" "),n),r.on(`absoluteTransformChange.${this._getEventNamespace()}`,n),this._proxyDrag(r)}),this._resetTransformCache();var i=!!this.findOne(".top-left");return i&&this.update(),this}_proxyDrag(t){let i;t.on(`dragstart.${this._getEventNamespace()}`,r=>{i=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(r,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!i)return;const n=t.getAbsolutePosition(),s=n.x-i.x,a=n.y-i.y;this.nodes().forEach(o=>{if(o===t||o.isDragging())return;const l=o.getAbsolutePosition();o.setAbsolutePosition({x:l.x+s,y:l.y+a}),o.startDrag(r)}),i=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(vo),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(vo,this.__getNodeRect)}__getNodeShape(t,i=this.rotation(),r){var n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=t.getAbsoluteScale(r),a=t.getAbsolutePosition(r),o=n.x*s.x-t.offsetX()*s.x,l=n.y*s.y-t.offsetY()*s.y;const h=(V.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),c={x:a.x+o*Math.cos(h)+l*Math.sin(-h),y:a.y+l*Math.cos(h)+o*Math.sin(h),width:n.width*s.x,height:n.height*s.y,rotation:h};return Ih(c,-V.getAngle(i),{x:0,y:0})}__getNodeRect(){var t=this.getNode();if(!t)return{x:-mo,y:-mo,width:0,height:0,rotation:0};const i=[];this.nodes().map(h=>{const c=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var f=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],u=h.getAbsoluteTransform();f.forEach(function(g){var d=u.point(g);i.push(d)})});const r=new Xt;r.rotate(-V.getAngle(this.rotation()));var n,s,a,o;i.forEach(function(h){var c=r.point(h);n===void 0&&(n=a=c.x,s=o=c.y),n=Math.min(n,c.x),s=Math.min(s,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y)}),r.invert();const l=r.point({x:n,y:s});return{x:l.x,y:l.y,width:a-n,height:o-s,rotation:V.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),hn.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")}_createAnchor(t){var i=new Tr({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Wg?10:"auto"}),r=this;i.on("mousedown touchstart",function(n){r._handleMouseDown(n)}),i.on("dragstart",n=>{i.stopDrag(),n.cancelBubble=!0}),i.on("dragend",n=>{n.cancelBubble=!0}),i.on("mouseenter",()=>{var n=V.getAngle(this.rotation()),s=zg(t,n);i.getStage().content&&(i.getStage().content.style.cursor=s),this._cursorChange=!0}),i.on("mouseout",()=>{i.getStage().content&&(i.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(i)}_createBack(){var t=new G({name:"back",width:0,height:0,draggable:!0,sceneFunc(i){var r=this.getParent(),n=r.padding();i.beginPath(),i.rect(-n,-n,this.width()+n*2,this.height()+n*2),i.moveTo(this.width()/2,-n),r.rotateEnabled()&&i.lineTo(this.width()/2,-r.rotateAnchorOffset()*E._sign(this.height())-n),i.fillStrokeShape(this)},hitFunc:(i,r)=>{if(!!this.shouldOverdrawWholeArea()){var n=this.padding();i.beginPath(),i.rect(-n,-n,r.width()+n*2,r.height()+n*2),i.fillStrokeShape(r)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",i=>{i.cancelBubble=!0}),t.on("dragmove",i=>{i.cancelBubble=!0}),t.on("dragend",i=>{i.cancelBubble=!0}),this.on("dragmove",i=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var i=this._getNodeRect(),r=i.width,n=i.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(n,2));this.sin=Math.abs(n/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var a=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-a.x,y:o.y-a.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:t.evt,target:l})})}_handleMouseMove(t){var i,r,n,s=this.findOne("."+this._movingAnchorName),a=s.getStage();a.setPointersPositions(t);const o=a.getPointerPosition();let l={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const h=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(h,l,t)),s.setAbsolutePosition(l);const c=s.getAbsolutePosition();if(!(h.x===c.x&&h.y===c.y)){if(this._movingAnchorName==="rotater"){var f=this._getNodeRect();i=s.x()-f.width/2,r=-s.y()+f.height/2;let D=Math.atan2(-r,i)+Math.PI/2;f.height<0&&(D-=Math.PI);var u=V.getAngle(this.rotation());const M=u+D,k=V.getAngle(this.rotationSnapTolerance()),W=Xg(this.rotationSnaps(),M,k)-f.rotation,$=Yg(f,W);this._fitNodesInto($,t);return}var g=this.keepRatio()||t.shiftKey,p=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(g){var d=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};n=Math.sqrt(Math.pow(d.x-s.x(),2)+Math.pow(d.y-s.y(),2));var b=this.findOne(".top-left").x()>d.x?-1:1,C=this.findOne(".top-left").y()>d.y?-1:1;i=n*this.cos*b,r=n*this.sin*C,this.findOne(".top-left").x(d.x-i),this.findOne(".top-left").y(d.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(g){var d=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};n=Math.sqrt(Math.pow(s.x()-d.x,2)+Math.pow(d.y-s.y(),2));var b=this.findOne(".top-right").x()<d.x?-1:1,C=this.findOne(".top-right").y()>d.y?-1:1;i=n*this.cos*b,r=n*this.sin*C,this.findOne(".top-right").x(d.x+i),this.findOne(".top-right").y(d.y-r)}var _=s.position();this.findOne(".top-left").y(_.y),this.findOne(".bottom-right").x(_.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(g){var d=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};n=Math.sqrt(Math.pow(d.x-s.x(),2)+Math.pow(s.y()-d.y,2));var b=d.x<s.x()?-1:1,C=s.y()<d.y?-1:1;i=n*this.cos*b,r=n*this.sin*C,s.x(d.x-i),s.y(d.y+r)}_=s.position(),this.findOne(".top-left").x(_.x),this.findOne(".bottom-right").y(_.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(g){var d=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};n=Math.sqrt(Math.pow(s.x()-d.x,2)+Math.pow(s.y()-d.y,2));var b=this.findOne(".bottom-right").x()<d.x?-1:1,C=this.findOne(".bottom-right").y()<d.y?-1:1;i=n*this.cos*b,r=n*this.sin*C,this.findOne(".bottom-right").x(d.x+i),this.findOne(".bottom-right").y(d.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var p=this.centeredScaling()||t.altKey;if(p){var v=this.findOne(".top-left"),S=this.findOne(".bottom-right"),P=v.x(),T=v.y(),A=this.getWidth()-S.x(),x=this.getHeight()-S.y();S.move({x:-P,y:-T}),v.move({x:A,y:x})}var L=this.findOne(".top-left").getAbsolutePosition();i=L.x,r=L.y;var R=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),I=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:i,y:r,width:R,height:I,rotation:V.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var i=this.getNode();this._fire("transformend",{evt:t,target:i}),i&&this._nodes.forEach(r=>{r._fire("transformend",{evt:t,target:r})}),this._movingAnchorName=null}}_fitNodesInto(t,i){var r=this._getNodeRect();const n=1;if(E._inRange(t.width,-this.padding()*2-n,n)){this.update();return}if(E._inRange(t.height,-this.padding()*2-n,n)){this.update();return}const s=this.flipEnabled();var a=new Xt;if(a.rotate(V.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const f=a.point({x:-this.padding()*2,y:0});if(t.x+=f.x,t.y+=f.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,!s){this.update();return}}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const f=a.point({x:this.padding()*2,y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.width+=this.padding()*2,!s){this.update();return}}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const f=a.point({x:0,y:-this.padding()*2});if(t.x+=f.x,t.y+=f.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.height+=this.padding()*2,!s){this.update();return}}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const f=a.point({x:0,y:this.padding()*2});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.height+=this.padding()*2,!s){this.update();return}}if(this.boundBoxFunc()){const f=this.boundBoxFunc()(r,t);f?t=f:E.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,l=new Xt;l.translate(r.x,r.y),l.rotate(r.rotation),l.scale(r.width/o,r.height/o);const h=new Xt;h.translate(t.x,t.y),h.rotate(t.rotation),h.scale(t.width/o,t.height/o);const c=h.multiply(l.invert());this._nodes.forEach(f=>{var u;const g=f.getParent().getAbsoluteTransform(),d=f.getTransform().copy();d.translate(f.offsetX(),f.offsetY());const b=new Xt;b.multiply(g.copy().invert()).multiply(c).multiply(g).multiply(d);const C=b.decompose();f.setAttrs(C),this._fire("transform",{evt:i,target:f}),f._fire("transform",{evt:i,target:f}),(u=f.getLayer())===null||u===void 0||u.batchDraw()}),this.rotation(E._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,i){this.findOne(t).setAttrs(i)}update(){var t,i=this._getNodeRect();this.rotation(E._getRotation(i.rotation));var r=i.width,n=i.height,s=this.enabledAnchors(),a=this.resizeEnabled(),o=this.padding(),l=this.anchorSize();this.find("._anchor").forEach(h=>{h.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:a&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+o,visible:a&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:a&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:n/2,offsetX:l/2+o,visible:a&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:n/2,offsetX:l/2-o,visible:a&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:n,offsetX:l/2+o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:n,offsetY:l/2-o,visible:a&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:n,offsetX:l/2-o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*E._sign(n)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:n,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Oi.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return U.prototype.toObject.call(this)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}function Kg(e){return e instanceof Array||E.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){hn.indexOf(t)===-1&&E.warn("Unknown anchor name: "+t+". Available names are: "+hn.join(", "))}),e||[]}ut.prototype.className="Transformer";St(ut);m.addGetterSetter(ut,"enabledAnchors",hn,Kg);m.addGetterSetter(ut,"flipEnabled",!0,re());m.addGetterSetter(ut,"resizeEnabled",!0);m.addGetterSetter(ut,"anchorSize",10,H());m.addGetterSetter(ut,"rotateEnabled",!0);m.addGetterSetter(ut,"rotationSnaps",[]);m.addGetterSetter(ut,"rotateAnchorOffset",50,H());m.addGetterSetter(ut,"rotationSnapTolerance",5,H());m.addGetterSetter(ut,"borderEnabled",!0);m.addGetterSetter(ut,"anchorStroke","rgb(0, 161, 255)");m.addGetterSetter(ut,"anchorStrokeWidth",1,H());m.addGetterSetter(ut,"anchorFill","white");m.addGetterSetter(ut,"anchorCornerRadius",0,H());m.addGetterSetter(ut,"borderStroke","rgb(0, 161, 255)");m.addGetterSetter(ut,"borderStrokeWidth",1,H());m.addGetterSetter(ut,"borderDash");m.addGetterSetter(ut,"keepRatio",!0);m.addGetterSetter(ut,"centeredScaling",!1);m.addGetterSetter(ut,"ignoreStroke",!1);m.addGetterSetter(ut,"padding",0,H());m.addGetterSetter(ut,"node");m.addGetterSetter(ut,"nodes");m.addGetterSetter(ut,"boundBoxFunc");m.addGetterSetter(ut,"anchorDragBoundFunc");m.addGetterSetter(ut,"shouldOverdrawWholeArea",!1);m.addGetterSetter(ut,"useSingleNodeRotation",!0);m.backCompat(ut,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Ee extends G{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,V.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Ee.prototype.className="Wedge";Ee.prototype._centroid=!0;Ee.prototype._attrsAffectingSize=["radius"];St(Ee);m.addGetterSetter(Ee,"radius",0,H());m.addGetterSetter(Ee,"angle",0,H());m.addGetterSetter(Ee,"clockwise",!1);m.backCompat(Ee,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function _o(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var Vg=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],$g=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function qg(e,t){var i=e.data,r=e.width,n=e.height,s,a,o,l,h,c,f,u,g,d,b,C,_,p,v,S,P,T,A,x,L,R,I,D,M=t+t+1,k=r-1,X=n-1,W=t+1,$=W*(W+1)/2,Z=new _o,st=null,q=Z,nt=null,ot=null,dt=Vg[t],Dt=$g[t];for(o=1;o<M;o++)q=q.next=new _o,o===W&&(st=q);for(q.next=Z,f=c=0,a=0;a<n;a++){for(S=P=T=A=u=g=d=b=0,C=W*(x=i[c]),_=W*(L=i[c+1]),p=W*(R=i[c+2]),v=W*(I=i[c+3]),u+=$*x,g+=$*L,d+=$*R,b+=$*I,q=Z,o=0;o<W;o++)q.r=x,q.g=L,q.b=R,q.a=I,q=q.next;for(o=1;o<W;o++)l=c+((k<o?k:o)<<2),u+=(q.r=x=i[l])*(D=W-o),g+=(q.g=L=i[l+1])*D,d+=(q.b=R=i[l+2])*D,b+=(q.a=I=i[l+3])*D,S+=x,P+=L,T+=R,A+=I,q=q.next;for(nt=Z,ot=st,s=0;s<r;s++)i[c+3]=I=b*dt>>Dt,I!==0?(I=255/I,i[c]=(u*dt>>Dt)*I,i[c+1]=(g*dt>>Dt)*I,i[c+2]=(d*dt>>Dt)*I):i[c]=i[c+1]=i[c+2]=0,u-=C,g-=_,d-=p,b-=v,C-=nt.r,_-=nt.g,p-=nt.b,v-=nt.a,l=f+((l=s+t+1)<k?l:k)<<2,S+=nt.r=i[l],P+=nt.g=i[l+1],T+=nt.b=i[l+2],A+=nt.a=i[l+3],u+=S,g+=P,d+=T,b+=A,nt=nt.next,C+=x=ot.r,_+=L=ot.g,p+=R=ot.b,v+=I=ot.a,S-=x,P-=L,T-=R,A-=I,ot=ot.next,c+=4;f+=r}for(s=0;s<r;s++){for(P=T=A=S=g=d=b=u=0,c=s<<2,C=W*(x=i[c]),_=W*(L=i[c+1]),p=W*(R=i[c+2]),v=W*(I=i[c+3]),u+=$*x,g+=$*L,d+=$*R,b+=$*I,q=Z,o=0;o<W;o++)q.r=x,q.g=L,q.b=R,q.a=I,q=q.next;for(h=r,o=1;o<=t;o++)c=h+s<<2,u+=(q.r=x=i[c])*(D=W-o),g+=(q.g=L=i[c+1])*D,d+=(q.b=R=i[c+2])*D,b+=(q.a=I=i[c+3])*D,S+=x,P+=L,T+=R,A+=I,q=q.next,o<X&&(h+=r);for(c=s,nt=Z,ot=st,a=0;a<n;a++)l=c<<2,i[l+3]=I=b*dt>>Dt,I>0?(I=255/I,i[l]=(u*dt>>Dt)*I,i[l+1]=(g*dt>>Dt)*I,i[l+2]=(d*dt>>Dt)*I):i[l]=i[l+1]=i[l+2]=0,u-=C,g-=_,d-=p,b-=v,C-=nt.r,_-=nt.g,p-=nt.b,v-=nt.a,l=s+((l=a+W)<X?l:X)*r<<2,u+=S+=nt.r=i[l],g+=P+=nt.g=i[l+1],d+=T+=nt.b=i[l+2],b+=A+=nt.a=i[l+3],nt=nt.next,C+=x=ot.r,_+=L=ot.g,p+=R=ot.b,v+=I=ot.a,S-=x,P-=L,T-=R,A-=I,ot=ot.next,c+=r}}const Jg=function(t){var i=Math.round(this.blurRadius());i>0&&qg(t,i)};m.addGetterSetter(U,"blurRadius",0,H(),m.afterSetFilter);const Qg=function(e){var t=this.brightness()*255,i=e.data,r=i.length,n;for(n=0;n<r;n+=4)i[n]+=t,i[n+1]+=t,i[n+2]+=t};m.addGetterSetter(U,"brightness",0,H(),m.afterSetFilter);const Zg=function(e){var t=Math.pow((this.contrast()+100)/100,2),i=e.data,r=i.length,n=150,s=150,a=150,o;for(o=0;o<r;o+=4)n=i[o],s=i[o+1],a=i[o+2],n/=255,n-=.5,n*=t,n+=.5,n*=255,s/=255,s-=.5,s*=t,s+=.5,s*=255,a/=255,a-=.5,a*=t,a+=.5,a*=255,n=n<0?0:n>255?255:n,s=s<0?0:s>255?255:s,a=a<0?0:a>255?255:a,i[o]=n,i[o+1]=s,i[o+2]=a};m.addGetterSetter(U,"contrast",0,H(),m.afterSetFilter);const tp=function(e){var t=this.embossStrength()*10,i=this.embossWhiteLevel()*255,r=this.embossDirection(),n=this.embossBlend(),s=0,a=0,o=e.data,l=e.width,h=e.height,c=l*4,f=h;switch(r){case"top-left":s=-1,a=-1;break;case"top":s=-1,a=0;break;case"top-right":s=-1,a=1;break;case"right":s=0,a=1;break;case"bottom-right":s=1,a=1;break;case"bottom":s=1,a=0;break;case"bottom-left":s=1,a=-1;break;case"left":s=0,a=-1;break;default:E.error("Unknown emboss direction: "+r)}do{var u=(f-1)*c,g=s;f+g<1&&(g=0),f+g>h&&(g=0);var d=(f-1+g)*l*4,b=l;do{var C=u+(b-1)*4,_=a;b+_<1&&(_=0),b+_>l&&(_=0);var p=d+(b-1+_)*4,v=o[C]-o[p],S=o[C+1]-o[p+1],P=o[C+2]-o[p+2],T=v,A=T>0?T:-T,x=S>0?S:-S,L=P>0?P:-P;if(x>A&&(T=S),L>A&&(T=P),T*=t,n){var R=o[C]+T,I=o[C+1]+T,D=o[C+2]+T;o[C]=R>255?255:R<0?0:R,o[C+1]=I>255?255:I<0?0:I,o[C+2]=D>255?255:D<0?0:D}else{var M=i-T;M<0?M=0:M>255&&(M=255),o[C]=o[C+1]=o[C+2]=M}}while(--b)}while(--f)};m.addGetterSetter(U,"embossStrength",.5,H(),m.afterSetFilter);m.addGetterSetter(U,"embossWhiteLevel",.5,H(),m.afterSetFilter);m.addGetterSetter(U,"embossDirection","top-left",null,m.afterSetFilter);m.addGetterSetter(U,"embossBlend",!1,null,m.afterSetFilter);function Vn(e,t,i,r,n){var s=i-t,a=n-r,o;return s===0?r+a/2:a===0?r:(o=(e-t)/s,o=a*o+r,o)}const ep=function(e){var t=e.data,i=t.length,r=t[0],n=r,s,a=t[1],o=a,l,h=t[2],c=h,f,u,g=this.enhance();if(g!==0){for(u=0;u<i;u+=4)s=t[u+0],s<r?r=s:s>n&&(n=s),l=t[u+1],l<a?a=l:l>o&&(o=l),f=t[u+2],f<h?h=f:f>c&&(c=f);n===r&&(n=255,r=0),o===a&&(o=255,a=0),c===h&&(c=255,h=0);var d,b,C,_,p,v,S,P,T;for(g>0?(b=n+g*(255-n),C=r-g*(r-0),p=o+g*(255-o),v=a-g*(a-0),P=c+g*(255-c),T=h-g*(h-0)):(d=(n+r)*.5,b=n+g*(n-d),C=r+g*(r-d),_=(o+a)*.5,p=o+g*(o-_),v=a+g*(a-_),S=(c+h)*.5,P=c+g*(c-S),T=h+g*(h-S)),u=0;u<i;u+=4)t[u+0]=Vn(t[u+0],r,n,C,b),t[u+1]=Vn(t[u+1],a,o,v,p),t[u+2]=Vn(t[u+2],h,c,T,P)}};m.addGetterSetter(U,"enhance",0,H(),m.afterSetFilter);const ip=function(e){var t=e.data,i=t.length,r,n;for(r=0;r<i;r+=4)n=.34*t[r]+.5*t[r+1]+.16*t[r+2],t[r]=n,t[r+1]=n,t[r+2]=n};m.addGetterSetter(U,"hue",0,H(),m.afterSetFilter);m.addGetterSetter(U,"saturation",0,H(),m.afterSetFilter);m.addGetterSetter(U,"luminance",0,H(),m.afterSetFilter);const rp=function(e){var t=e.data,i=t.length,r=1,n=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=this.luminance()*127,o,l=r*n*Math.cos(s*Math.PI/180),h=r*n*Math.sin(s*Math.PI/180),c=.299*r+.701*l+.167*h,f=.587*r-.587*l+.33*h,u=.114*r-.114*l-.497*h,g=.299*r-.299*l-.328*h,d=.587*r+.413*l+.035*h,b=.114*r-.114*l+.293*h,C=.299*r-.3*l+1.25*h,_=.587*r-.586*l-1.05*h,p=.114*r+.886*l-.2*h,v,S,P,T;for(o=0;o<i;o+=4)v=t[o+0],S=t[o+1],P=t[o+2],T=t[o+3],t[o+0]=c*v+f*S+u*P+a,t[o+1]=g*v+d*S+b*P+a,t[o+2]=C*v+_*S+p*P+a,t[o+3]=T},np=function(e){var t=e.data,i=t.length,r=Math.pow(2,this.value()),n=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a,o=r*n*Math.cos(s*Math.PI/180),l=r*n*Math.sin(s*Math.PI/180),h=.299*r+.701*o+.167*l,c=.587*r-.587*o+.33*l,f=.114*r-.114*o-.497*l,u=.299*r-.299*o-.328*l,g=.587*r+.413*o+.035*l,d=.114*r-.114*o+.293*l,b=.299*r-.3*o+1.25*l,C=.587*r-.586*o-1.05*l,_=.114*r+.886*o-.2*l,p,v,S,P;for(a=0;a<i;a+=4)p=t[a+0],v=t[a+1],S=t[a+2],P=t[a+3],t[a+0]=h*p+c*v+f*S,t[a+1]=u*p+g*v+d*S,t[a+2]=b*p+C*v+_*S,t[a+3]=P};m.addGetterSetter(U,"hue",0,H(),m.afterSetFilter);m.addGetterSetter(U,"saturation",0,H(),m.afterSetFilter);m.addGetterSetter(U,"value",0,H(),m.afterSetFilter);const sp=function(e){var t=e.data,i=t.length,r;for(r=0;r<i;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2]};var ap=function(e,t,i){var r=e.data,n=t.data,s=e.width,a=e.height,o=i.polarCenterX||s/2,l=i.polarCenterY||a/2,h,c,f,u=0,g=0,d=0,b=0,C,_=Math.sqrt(o*o+l*l);c=s-o,f=a-l,C=Math.sqrt(c*c+f*f),_=C>_?C:_;var p=a,v=s,S,P,T=360/v*Math.PI/180,A,x;for(P=0;P<v;P+=1)for(A=Math.sin(P*T),x=Math.cos(P*T),S=0;S<p;S+=1)c=Math.floor(o+_*S/p*x),f=Math.floor(l+_*S/p*A),h=(f*s+c)*4,u=r[h+0],g=r[h+1],d=r[h+2],b=r[h+3],h=(P+S*s)*4,n[h+0]=u,n[h+1]=g,n[h+2]=d,n[h+3]=b},op=function(e,t,i){var r=e.data,n=t.data,s=e.width,a=e.height,o=i.polarCenterX||s/2,l=i.polarCenterY||a/2,h,c,f,u,g,d=0,b=0,C=0,_=0,p,v=Math.sqrt(o*o+l*l);c=s-o,f=a-l,p=Math.sqrt(c*c+f*f),v=p>v?p:v;var S=a,P=s,T,A,x=i.polarRotation||0,L,R;for(c=0;c<s;c+=1)for(f=0;f<a;f+=1)u=c-o,g=f-l,T=Math.sqrt(u*u+g*g)*S/v,A=(Math.atan2(g,u)*180/Math.PI+360+x)%360,A=A*P/360,L=Math.floor(A),R=Math.floor(T),h=(R*s+L)*4,d=r[h+0],b=r[h+1],C=r[h+2],_=r[h+3],h=(f*s+c)*4,n[h+0]=d,n[h+1]=b,n[h+2]=C,n[h+3]=_};const lp=function(e){var t=e.width,i=e.height,r,n,s,a,o,l,h,c,f,u,g=Math.round(this.kaleidoscopePower()),d=Math.round(this.kaleidoscopeAngle()),b=Math.floor(t*(d%360)/360);if(!(g<1)){var C=E.createCanvasElement();C.width=t,C.height=i;var _=C.getContext("2d").getImageData(0,0,t,i);E.releaseCanvas(C),ap(e,_,{polarCenterX:t/2,polarCenterY:i/2});for(var p=t/Math.pow(2,g);p<=8;)p=p*2,g-=1;p=Math.ceil(p);var v=p,S=0,P=v,T=1;for(b+p>t&&(S=v,P=0,T=-1),n=0;n<i;n+=1)for(r=S;r!==P;r+=T)s=Math.round(r+b)%t,f=(t*n+s)*4,o=_.data[f+0],l=_.data[f+1],h=_.data[f+2],c=_.data[f+3],u=(t*n+r)*4,_.data[u+0]=o,_.data[u+1]=l,_.data[u+2]=h,_.data[u+3]=c;for(n=0;n<i;n+=1)for(v=Math.floor(p),a=0;a<g;a+=1){for(r=0;r<v+1;r+=1)f=(t*n+r)*4,o=_.data[f+0],l=_.data[f+1],h=_.data[f+2],c=_.data[f+3],u=(t*n+v*2-r-1)*4,_.data[u+0]=o,_.data[u+1]=l,_.data[u+2]=h,_.data[u+3]=c;v*=2}op(_,e,{polarRotation:0})}};m.addGetterSetter(U,"kaleidoscopePower",2,H(),m.afterSetFilter);m.addGetterSetter(U,"kaleidoscopeAngle",0,H(),m.afterSetFilter);function $r(e,t,i){var r=(i*e.width+t)*4,n=[];return n.push(e.data[r++],e.data[r++],e.data[r++],e.data[r++]),n}function ji(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function hp(e){for(var t=[0,0,0],i=0;i<e.length;i++)t[0]+=e[i][0],t[1]+=e[i][1],t[2]+=e[i][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function cp(e,t){var i=$r(e,0,0),r=$r(e,e.width-1,0),n=$r(e,0,e.height-1),s=$r(e,e.width-1,e.height-1),a=t||10;if(ji(i,r)<a&&ji(r,s)<a&&ji(s,n)<a&&ji(n,i)<a){for(var o=hp([r,i,s,n]),l=[],h=0;h<e.width*e.height;h++){var c=ji(o,[e.data[h*4],e.data[h*4+1],e.data[h*4+2]]);l[h]=c<a?0:255}return l}}function fp(e,t){for(var i=0;i<e.width*e.height;i++)e.data[4*i+3]=t[i]}function up(e,t,i){for(var r=[1,1,1,1,0,1,1,1,1],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,f=0;f<n;f++)for(var u=0;u<n;u++){var g=o+f-s,d=l+u-s;if(g>=0&&g<i&&d>=0&&d<t){var b=g*t+d,C=r[f*n+u];c+=e[b]*C}}a[h]=c===255*8?255:0}return a}function dp(e,t,i){for(var r=[1,1,1,1,1,1,1,1,1],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,f=0;f<n;f++)for(var u=0;u<n;u++){var g=o+f-s,d=l+u-s;if(g>=0&&g<i&&d>=0&&d<t){var b=g*t+d,C=r[f*n+u];c+=e[b]*C}}a[h]=c>=255*4?255:0}return a}function gp(e,t,i){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,f=0;f<n;f++)for(var u=0;u<n;u++){var g=o+f-s,d=l+u-s;if(g>=0&&g<i&&d>=0&&d<t){var b=g*t+d,C=r[f*n+u];c+=e[b]*C}}a[h]=c}return a}const pp=function(e){var t=this.threshold(),i=cp(e,t);return i&&(i=up(i,e.width,e.height),i=dp(i,e.width,e.height),i=gp(i,e.width,e.height),fp(e,i)),e};m.addGetterSetter(U,"threshold",0,H(),m.afterSetFilter);const vp=function(e){var t=this.noise()*255,i=e.data,r=i.length,n=t/2,s;for(s=0;s<r;s+=4)i[s+0]+=n-2*n*Math.random(),i[s+1]+=n-2*n*Math.random(),i[s+2]+=n-2*n*Math.random()};m.addGetterSetter(U,"noise",.2,H(),m.afterSetFilter);const mp=function(e){var t=Math.ceil(this.pixelSize()),i=e.width,r=e.height,n,s,a,o,l,h,c,f=Math.ceil(i/t),u=Math.ceil(r/t),g,d,b,C,_,p,v,S=e.data;if(t<=0){E.error("pixelSize value can not be <= 0");return}for(_=0;_<f;_+=1)for(p=0;p<u;p+=1){for(o=0,l=0,h=0,c=0,g=_*t,d=g+t,b=p*t,C=b+t,v=0,n=g;n<d;n+=1)if(!(n>=i))for(s=b;s<C;s+=1)s>=r||(a=(i*s+n)*4,o+=S[a+0],l+=S[a+1],h+=S[a+2],c+=S[a+3],v+=1);for(o=o/v,l=l/v,h=h/v,c=c/v,n=g;n<d;n+=1)if(!(n>=i))for(s=b;s<C;s+=1)s>=r||(a=(i*s+n)*4,S[a+0]=o,S[a+1]=l,S[a+2]=h,S[a+3]=c)}};m.addGetterSetter(U,"pixelSize",8,H(),m.afterSetFilter);const _p=function(e){var t=Math.round(this.levels()*254)+1,i=e.data,r=i.length,n=255/t,s;for(s=0;s<r;s+=1)i[s]=Math.floor(i[s]/n)*n};m.addGetterSetter(U,"levels",.5,H(),m.afterSetFilter);const yp=function(e){var t=e.data,i=t.length,r=this.red(),n=this.green(),s=this.blue(),a,o;for(a=0;a<i;a+=4)o=(.34*t[a]+.5*t[a+1]+.16*t[a+2])/255,t[a]=o*r,t[a+1]=o*n,t[a+2]=o*s,t[a+3]=t[a+3]};m.addGetterSetter(U,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});m.addGetterSetter(U,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});m.addGetterSetter(U,"blue",0,rh,m.afterSetFilter);const bp=function(e){var t=e.data,i=t.length,r=this.red(),n=this.green(),s=this.blue(),a=this.alpha(),o,l;for(o=0;o<i;o+=4)l=1-a,t[o]=r*a+t[o]*l,t[o+1]=n*a+t[o+1]*l,t[o+2]=s*a+t[o+2]*l};m.addGetterSetter(U,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});m.addGetterSetter(U,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});m.addGetterSetter(U,"blue",0,rh,m.afterSetFilter);m.addGetterSetter(U,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});const Cp=function(e){var t=e.data,i=t.length,r,n,s,a;for(r=0;r<i;r+=4)n=t[r+0],s=t[r+1],a=t[r+2],t[r+0]=Math.min(255,n*.393+s*.769+a*.189),t[r+1]=Math.min(255,n*.349+s*.686+a*.168),t[r+2]=Math.min(255,n*.272+s*.534+a*.131)},Sp=function(e){var t=e.data,i=e.width,r=e.height,n=i*4,s=r;do{var a=(s-1)*n,o=i;do{var l=a+(o-1)*4,h=t[l],c=t[l+1],f=t[l+2];h>127&&(h=255-h),c>127&&(c=255-c),f>127&&(f=255-f),t[l]=h,t[l+1]=c,t[l+2]=f}while(--o)}while(--s)},wp=function(e){var t=this.threshold()*255,i=e.data,r=i.length,n;for(n=0;n<r;n+=1)i[n]=i[n]<t?0:255};m.addGetterSetter(U,"threshold",.5,H(),m.afterSetFilter);const xp=ho.Util._assign(ho,{Arc:we,Arrow:hi,Circle:Fi,Ellipse:We,Image:ne,Label:oa,Tag:ci,Line:xe,Path:pt,Rect:Tr,RegularPolygon:fi,Ring:ui,Sprite:ge,Star:ze,Text:Ct,TextPath:Mt,Transformer:ut,Wedge:Ee,Filters:{Blur:Jg,Brighten:Qg,Contrast:Zg,Emboss:tp,Enhance:ep,Grayscale:ip,HSL:rp,HSV:np,Invert:sp,Kaleidoscope:lp,Mask:pp,Noise:vp,Pixelate:mp,Posterize:_p,RGB:yp,RGBA:bp,Sepia:Cp,Solarize:Sp,Threshold:wp}}),Ep=Object.freeze(Object.defineProperty({__proto__:null,default:xp},Symbol.toStringTag,{value:"Module"})),Tp=eh(Ep);/*!
 * vue-konva v3.0.1 - https://github.com/konvajs/vue-konva#readme
 * MIT Licensed
 */(function(e,t){(function(r,n){e.exports=n(dd,Tp)})(fd,function(i,r){return function(n){var s={};function a(o){if(s[o])return s[o].exports;var l=s[o]={i:o,l:!1,exports:{}};return n[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=n,a.c=s,a.d=function(o,l,h){a.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:h})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,l){if(l&1&&(o=a(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var h=Object.create(null);if(a.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var c in o)a.d(h,c,function(f){return o[f]}.bind(null,c));return h},a.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(l,"a",l),l},a.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},a.p="",a(a.s=2)}([function(n,s){n.exports=i},function(n,s){n.exports=r},function(n,s,a){n.exports=a(3)},function(n,s,a){a.r(s);var o=a(0),l=a(1),h=a.n(l);function c(M){if(!h.a.autoDrawEnabled){var k=M.getLayer()||M.getStage();k&&k.batchDraw()}}var f={key:!0,style:!0,elm:!0,isRootInsert:!0},u=".vue-konva-event";function g(M,k,X,W){k===void 0&&(k={}),X===void 0&&(X={});var $=M.__konvaNode,Z={},st=!1;for(var q in X)if(!f[q]){var nt=q.slice(0,2)==="on",ot=X[q]!==k[q];if(nt&&ot){var dt=q.substr(2).toLowerCase();dt.substr(0,7)==="content"&&(dt="content"+dt.substr(7,1).toUpperCase()+dt.substr(8)),$.off(dt+u,X[q])}var Dt=!k.hasOwnProperty(q);Dt&&$.setAttr(q,void 0)}for(var wt in k)if(!f[wt]){var xt=wt.slice(0,2)==="on",Zt=X[wt]!==k[wt];if(xt&&Zt){var Rt=wt.substr(2).toLowerCase();Rt.substr(0,7)==="content"&&(Rt="content"+Rt.substr(7,1).toUpperCase()+Rt.substr(8)),k[wt]&&($.off(Rt+u),$.on(Rt+u,k[wt]))}!xt&&(k[wt]!==X[wt]||W&&k[wt]!==$.getAttr(wt))&&(st=!0,Z[wt]=k[wt])}st&&($.setAttrs(Z),c($))}var d="v";function b(M){function k(X){return X.__konvaNode?X:X.parent?k(X.parent):(console.error("vue-konva error: Can not find parent node"),{})}return k(M.parent)}function C(M){if(M!=null&&M.component)return M.component.__konvaNode||C(M.component.subTree)}function _(M){var k=M.el,X=M.component,W=C(M);if((k==null?void 0:k.tagName)&&X&&!W){var $=k&&k.tagName.toLowerCase();return console.error('vue-konva error: You are trying to render "'+$+'" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.'),null}return W}function p(M){var k=[];return M.children&&M.children.forEach(function(X){!X.component&&Array.isArray(X.children)&&X.children.forEach(function(W){!W.component&&Array.isArray(W.children)?k.push.apply(k,W.children):k.push(W)}),X.component&&k.push(X)}),k}function v(M,k){var X=p(M),W=[];X.forEach(function(Z){var st=_(Z);st&&W.push(st)});var $=!1;W.forEach(function(Z,st){Z.getZIndex()!==st&&(Z.setZIndex(st),$=!0)}),$&&c(k)}function S(){return S=Object.assign||function(M){for(var k=1;k<arguments.length;k++){var X=arguments[k];for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(M[W]=X[W])}return M},S.apply(this,arguments)}var P={props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup:function(k,X){var W=X.attrs,$=X.slots,Z=X.expose;X.emits;var st=Object(o.getCurrentInstance)(),q=Object(o.reactive)({}),nt=Object(o.ref)(null),ot=new window.Konva.Stage({width:k.config.width,height:k.config.height,container:document.createElement("div")});st.__konvaNode=ot,wt();function dt(){return st.__konvaNode}function Dt(){return st.__konvaNode}function wt(){var xt=q||{},Zt=S({},W,k.config);g(st,Zt,xt,k.__useStrictMode),Object.assign(q,Zt)}return Object(o.onMounted)(function(){nt.value.innerHTML="",ot.container(nt.value),wt()}),Object(o.onUpdated)(function(){wt(),v(st.subTree,ot)}),Object(o.onBeforeUnmount)(function(){ot.destroy()}),Object(o.watch)(function(){return k.config},wt,{deep:!0}),Z({getStage:Dt,getNode:dt}),function(){var xt;return Object(o.h)("div",{ref:nt},(xt=$.default)===null||xt===void 0?void 0:xt.call($))}}};function T(){return T=Object.assign||function(M){for(var k=1;k<arguments.length;k++){var X=arguments[k];for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(M[W]=X[W])}return M},T.apply(this,arguments)}var A=".vue-konva-event",x={Group:!0,Layer:!0,FastLayer:!0,Label:!0},L=function(M){return{props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup:function(X,W){var $=W.attrs,Z=W.slots,st=W.expose,q=Object(o.getCurrentInstance)(),nt=Object(o.reactive)({}),ot=window.Konva[M];if(!ot){console.error("vue-konva error: Can not find node "+M);return}var dt=new ot;q.__konvaNode=dt,q.vnode.__konvaNode=dt,xt();function Dt(){return q.__konvaNode}function wt(){return q.__konvaNode}function xt(){var Rt={};for(var se in q.vnode.props)se.slice(0,2)==="on"&&(Rt[se]=q.vnode.props[se]);var Ni=nt||{},di=T({},$,X.config,Rt);g(q,di,Ni,X.__useStrictMode),Object.assign(nt,di)}Object(o.onMounted)(function(){var Rt=b(q).__konvaNode;Rt.add(dt),c(dt)}),Object(o.onUnmounted)(function(){c(dt),dt.destroy(),dt.off(A)}),Object(o.onUpdated)(function(){xt(),v(q.subTree,dt)}),Object(o.watch)(function(){return X.config},xt,{deep:!0}),st({getStage:wt,getNode:Dt});var Zt=x[M];return Zt?function(){var Rt;return Object(o.h)("template",{},(Rt=Z.default)===null||Rt===void 0?void 0:Rt.call(Z))}:function(){return null}}}};typeof window<"u"&&!window.Konva&&a(1);var R=["Layer","FastLayer","Group","Label","Rect","Circle","Ellipse","Wedge","Line","Sprite","Image","Text","TextPath","Star","Ring","Arc","Tag","Path","RegularPolygon","Arrow","Shape","Transformer"],I=[{name:"Stage",component:P}].concat(R.map(function(M){return{name:M,component:L(M)}})),D={install:function(k,X){var W=d;X&&X.prefix&&(W=X.prefix),I.forEach(function($){k.component(""+W+$.name,$.component)})}};s.default=D}]).default})})(ih);const Pp=ud(ih.exports),Dh=Ql(cd);Dh.use(Pp);Dh.mount("#app");
